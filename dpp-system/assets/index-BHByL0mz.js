function $h(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();function Fh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var _u={exports:{}},wi={},$u={exports:{}},we={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yn=Symbol.for("react.element"),zh=Symbol.for("react.portal"),Bh=Symbol.for("react.fragment"),Uh=Symbol.for("react.strict_mode"),Vh=Symbol.for("react.profiler"),Wh=Symbol.for("react.provider"),Hh=Symbol.for("react.context"),Kh=Symbol.for("react.forward_ref"),Gh=Symbol.for("react.suspense"),qh=Symbol.for("react.memo"),Qh=Symbol.for("react.lazy"),qc=Symbol.iterator;function Yh(e){return e===null||typeof e!="object"?null:(e=qc&&e[qc]||e["@@iterator"],typeof e=="function"?e:null)}var Fu={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},zu=Object.assign,Bu={};function Gr(e,t,r){this.props=e,this.context=t,this.refs=Bu,this.updater=r||Fu}Gr.prototype.isReactComponent={};Gr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Gr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Uu(){}Uu.prototype=Gr.prototype;function Oo(e,t,r){this.props=e,this.context=t,this.refs=Bu,this.updater=r||Fu}var _o=Oo.prototype=new Uu;_o.constructor=Oo;zu(_o,Gr.prototype);_o.isPureReactComponent=!0;var Qc=Array.isArray,Vu=Object.prototype.hasOwnProperty,$o={current:null},Wu={key:!0,ref:!0,__self:!0,__source:!0};function Hu(e,t,r){var n,s={},i=null,l=null;if(t!=null)for(n in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(i=""+t.key),t)Vu.call(t,n)&&!Wu.hasOwnProperty(n)&&(s[n]=t[n]);var d=arguments.length-2;if(d===1)s.children=r;else if(1<d){for(var o=Array(d),c=0;c<d;c++)o[c]=arguments[c+2];s.children=o}if(e&&e.defaultProps)for(n in d=e.defaultProps,d)s[n]===void 0&&(s[n]=d[n]);return{$$typeof:Yn,type:e,key:i,ref:l,props:s,_owner:$o.current}}function Jh(e,t){return{$$typeof:Yn,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Fo(e){return typeof e=="object"&&e!==null&&e.$$typeof===Yn}function Zh(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Yc=/\/+/g;function Xi(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Zh(""+e.key):t.toString(36)}function Is(e,t,r,n,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case Yn:case zh:l=!0}}if(l)return l=e,s=s(l),e=n===""?"."+Xi(l,0):n,Qc(s)?(r="",e!=null&&(r=e.replace(Yc,"$&/")+"/"),Is(s,t,r,"",function(c){return c})):s!=null&&(Fo(s)&&(s=Jh(s,r+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(Yc,"$&/")+"/")+e)),t.push(s)),1;if(l=0,n=n===""?".":n+":",Qc(e))for(var d=0;d<e.length;d++){i=e[d];var o=n+Xi(i,d);l+=Is(i,t,r,o,s)}else if(o=Yh(e),typeof o=="function")for(e=o.call(e),d=0;!(i=e.next()).done;)i=i.value,o=n+Xi(i,d++),l+=Is(i,t,r,o,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function ds(e,t,r){if(e==null)return e;var n=[],s=0;return Is(e,n,"","",function(i){return t.call(r,i,s++)}),n}function Xh(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ft={current:null},Ds={transition:null},ef={ReactCurrentDispatcher:ft,ReactCurrentBatchConfig:Ds,ReactCurrentOwner:$o};function Ku(){throw Error("act(...) is not supported in production builds of React.")}we.Children={map:ds,forEach:function(e,t,r){ds(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return ds(e,function(){t++}),t},toArray:function(e){return ds(e,function(t){return t})||[]},only:function(e){if(!Fo(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};we.Component=Gr;we.Fragment=Bh;we.Profiler=Vh;we.PureComponent=Oo;we.StrictMode=Uh;we.Suspense=Gh;we.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ef;we.act=Ku;we.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=zu({},e.props),s=e.key,i=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,l=$o.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var d=e.type.defaultProps;for(o in t)Vu.call(t,o)&&!Wu.hasOwnProperty(o)&&(n[o]=t[o]===void 0&&d!==void 0?d[o]:t[o])}var o=arguments.length-2;if(o===1)n.children=r;else if(1<o){d=Array(o);for(var c=0;c<o;c++)d[c]=arguments[c+2];n.children=d}return{$$typeof:Yn,type:e.type,key:s,ref:i,props:n,_owner:l}};we.createContext=function(e){return e={$$typeof:Hh,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Wh,_context:e},e.Consumer=e};we.createElement=Hu;we.createFactory=function(e){var t=Hu.bind(null,e);return t.type=e,t};we.createRef=function(){return{current:null}};we.forwardRef=function(e){return{$$typeof:Kh,render:e}};we.isValidElement=Fo;we.lazy=function(e){return{$$typeof:Qh,_payload:{_status:-1,_result:e},_init:Xh}};we.memo=function(e,t){return{$$typeof:qh,type:e,compare:t===void 0?null:t}};we.startTransition=function(e){var t=Ds.transition;Ds.transition={};try{e()}finally{Ds.transition=t}};we.unstable_act=Ku;we.useCallback=function(e,t){return ft.current.useCallback(e,t)};we.useContext=function(e){return ft.current.useContext(e)};we.useDebugValue=function(){};we.useDeferredValue=function(e){return ft.current.useDeferredValue(e)};we.useEffect=function(e,t){return ft.current.useEffect(e,t)};we.useId=function(){return ft.current.useId()};we.useImperativeHandle=function(e,t,r){return ft.current.useImperativeHandle(e,t,r)};we.useInsertionEffect=function(e,t){return ft.current.useInsertionEffect(e,t)};we.useLayoutEffect=function(e,t){return ft.current.useLayoutEffect(e,t)};we.useMemo=function(e,t){return ft.current.useMemo(e,t)};we.useReducer=function(e,t,r){return ft.current.useReducer(e,t,r)};we.useRef=function(e){return ft.current.useRef(e)};we.useState=function(e){return ft.current.useState(e)};we.useSyncExternalStore=function(e,t,r){return ft.current.useSyncExternalStore(e,t,r)};we.useTransition=function(){return ft.current.useTransition()};we.version="18.3.1";$u.exports=we;var v=$u.exports;const gr=Fh(v),tf=$h({__proto__:null,default:gr},[v]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var af=v,rf=Symbol.for("react.element"),nf=Symbol.for("react.fragment"),sf=Object.prototype.hasOwnProperty,lf=af.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,of={key:!0,ref:!0,__self:!0,__source:!0};function Gu(e,t,r){var n,s={},i=null,l=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(l=t.ref);for(n in t)sf.call(t,n)&&!of.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:rf,type:e,key:i,ref:l,props:s,_owner:lf.current}}wi.Fragment=nf;wi.jsx=Gu;wi.jsxs=Gu;_u.exports=wi;var a=_u.exports,Dl={},qu={exports:{}},Lt={},Qu={exports:{}},Yu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(W,te){var ae=W.length;W.push(te);e:for(;0<ae;){var Z=ae-1>>>1,oe=W[Z];if(0<s(oe,te))W[Z]=te,W[ae]=oe,ae=Z;else break e}}function r(W){return W.length===0?null:W[0]}function n(W){if(W.length===0)return null;var te=W[0],ae=W.pop();if(ae!==te){W[0]=ae;e:for(var Z=0,oe=W.length,ve=oe>>>1;Z<ve;){var ee=2*(Z+1)-1,ne=W[ee],me=ee+1,_=W[me];if(0>s(ne,ae))me<oe&&0>s(_,ne)?(W[Z]=_,W[me]=ae,Z=me):(W[Z]=ne,W[ee]=ae,Z=ee);else if(me<oe&&0>s(_,ae))W[Z]=_,W[me]=ae,Z=me;else break e}}return te}function s(W,te){var ae=W.sortIndex-te.sortIndex;return ae!==0?ae:W.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,d=l.now();e.unstable_now=function(){return l.now()-d}}var o=[],c=[],u=1,p=null,m=3,N=!1,f=!1,h=!1,j=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(W){for(var te=r(c);te!==null;){if(te.callback===null)n(c);else if(te.startTime<=W)n(c),te.sortIndex=te.expirationTime,t(o,te);else break;te=r(c)}}function E(W){if(h=!1,b(W),!f)if(r(o)!==null)f=!0,ie(y);else{var te=r(c);te!==null&&he(E,te.startTime-W)}}function y(W,te){f=!1,h&&(h=!1,x(I),I=-1),N=!0;var ae=m;try{for(b(te),p=r(o);p!==null&&(!(p.expirationTime>te)||W&&!M());){var Z=p.callback;if(typeof Z=="function"){p.callback=null,m=p.priorityLevel;var oe=Z(p.expirationTime<=te);te=e.unstable_now(),typeof oe=="function"?p.callback=oe:p===r(o)&&n(o),b(te)}else n(o);p=r(o)}if(p!==null)var ve=!0;else{var ee=r(c);ee!==null&&he(E,ee.startTime-te),ve=!1}return ve}finally{p=null,m=ae,N=!1}}var w=!1,k=null,I=-1,R=5,U=-1;function M(){return!(e.unstable_now()-U<R)}function L(){if(k!==null){var W=e.unstable_now();U=W;var te=!0;try{te=k(!0,W)}finally{te?D():(w=!1,k=null)}}else w=!1}var D;if(typeof g=="function")D=function(){g(L)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,re=H.port2;H.port1.onmessage=L,D=function(){re.postMessage(null)}}else D=function(){j(L,0)};function ie(W){k=W,w||(w=!0,D())}function he(W,te){I=j(function(){W(e.unstable_now())},te)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(W){W.callback=null},e.unstable_continueExecution=function(){f||N||(f=!0,ie(y))},e.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<W?Math.floor(1e3/W):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(o)},e.unstable_next=function(W){switch(m){case 1:case 2:case 3:var te=3;break;default:te=m}var ae=m;m=te;try{return W()}finally{m=ae}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(W,te){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var ae=m;m=W;try{return te()}finally{m=ae}},e.unstable_scheduleCallback=function(W,te,ae){var Z=e.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?Z+ae:Z):ae=Z,W){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=ae+oe,W={id:u++,callback:te,priorityLevel:W,startTime:ae,expirationTime:oe,sortIndex:-1},ae>Z?(W.sortIndex=ae,t(c,W),r(o)===null&&W===r(c)&&(h?(x(I),I=-1):h=!0,he(E,ae-Z))):(W.sortIndex=oe,t(o,W),f||N||(f=!0,ie(y))),W},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(W){var te=m;return function(){var ae=m;m=te;try{return W.apply(this,arguments)}finally{m=ae}}}})(Yu);Qu.exports=Yu;var cf=Qu.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var df=v,Tt=cf;function J(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ju=new Set,Tn={};function pr(e,t){_r(e,t),_r(e+"Capture",t)}function _r(e,t){for(Tn[e]=t,e=0;e<t.length;e++)Ju.add(t[e])}var ua=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rl=Object.prototype.hasOwnProperty,uf=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Jc={},Zc={};function pf(e){return Rl.call(Zc,e)?!0:Rl.call(Jc,e)?!1:uf.test(e)?Zc[e]=!0:(Jc[e]=!0,!1)}function mf(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function hf(e,t,r,n){if(t===null||typeof t>"u"||mf(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function xt(e,t,r,n,s,i,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=l}var it={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){it[e]=new xt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];it[t]=new xt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){it[e]=new xt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){it[e]=new xt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){it[e]=new xt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){it[e]=new xt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){it[e]=new xt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){it[e]=new xt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){it[e]=new xt(e,5,!1,e.toLowerCase(),null,!1,!1)});var zo=/[\-:]([a-z])/g;function Bo(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(zo,Bo);it[t]=new xt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(zo,Bo);it[t]=new xt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(zo,Bo);it[t]=new xt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){it[e]=new xt(e,1,!1,e.toLowerCase(),null,!1,!1)});it.xlinkHref=new xt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){it[e]=new xt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Uo(e,t,r,n){var s=it.hasOwnProperty(t)?it[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(hf(t,r,s,n)&&(r=null),n||s===null?pf(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var fa=df.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,us=Symbol.for("react.element"),yr=Symbol.for("react.portal"),vr=Symbol.for("react.fragment"),Vo=Symbol.for("react.strict_mode"),Ml=Symbol.for("react.profiler"),Zu=Symbol.for("react.provider"),Xu=Symbol.for("react.context"),Wo=Symbol.for("react.forward_ref"),Ol=Symbol.for("react.suspense"),_l=Symbol.for("react.suspense_list"),Ho=Symbol.for("react.memo"),Na=Symbol.for("react.lazy"),ep=Symbol.for("react.offscreen"),Xc=Symbol.iterator;function rn(e){return e===null||typeof e!="object"?null:(e=Xc&&e[Xc]||e["@@iterator"],typeof e=="function"?e:null)}var We=Object.assign,el;function hn(e){if(el===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);el=t&&t[1]||""}return`
`+el+e}var tl=!1;function al(e,t){if(!e||tl)return"";tl=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=n.stack.split(`
`),l=s.length-1,d=i.length-1;1<=l&&0<=d&&s[l]!==i[d];)d--;for(;1<=l&&0<=d;l--,d--)if(s[l]!==i[d]){if(l!==1||d!==1)do if(l--,d--,0>d||s[l]!==i[d]){var o=`
`+s[l].replace(" at new "," at ");return e.displayName&&o.includes("<anonymous>")&&(o=o.replace("<anonymous>",e.displayName)),o}while(1<=l&&0<=d);break}}}finally{tl=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?hn(e):""}function ff(e){switch(e.tag){case 5:return hn(e.type);case 16:return hn("Lazy");case 13:return hn("Suspense");case 19:return hn("SuspenseList");case 0:case 2:case 15:return e=al(e.type,!1),e;case 11:return e=al(e.type.render,!1),e;case 1:return e=al(e.type,!0),e;default:return""}}function $l(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case vr:return"Fragment";case yr:return"Portal";case Ml:return"Profiler";case Vo:return"StrictMode";case Ol:return"Suspense";case _l:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Xu:return(e.displayName||"Context")+".Consumer";case Zu:return(e._context.displayName||"Context")+".Provider";case Wo:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ho:return t=e.displayName||null,t!==null?t:$l(e.type)||"Memo";case Na:t=e._payload,e=e._init;try{return $l(e(t))}catch{}}return null}function xf(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $l(t);case 8:return t===Vo?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Fa(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function tp(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function gf(e){var t=tp(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(l){n=""+l,i.call(this,l)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(l){n=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ps(e){e._valueTracker||(e._valueTracker=gf(e))}function ap(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=tp(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function qs(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Fl(e,t){var r=t.checked;return We({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function ed(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Fa(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function rp(e,t){t=t.checked,t!=null&&Uo(e,"checked",t,!1)}function zl(e,t){rp(e,t);var r=Fa(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Bl(e,t.type,r):t.hasOwnProperty("defaultValue")&&Bl(e,t.type,Fa(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function td(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Bl(e,t,r){(t!=="number"||qs(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var fn=Array.isArray;function Tr(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Fa(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Ul(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(J(91));return We({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ad(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(J(92));if(fn(r)){if(1<r.length)throw Error(J(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Fa(r)}}function np(e,t){var r=Fa(t.value),n=Fa(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function rd(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function sp(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Vl(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?sp(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ms,ip=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ms=ms||document.createElement("div"),ms.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ms.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ln(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var bn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},yf=["Webkit","ms","Moz","O"];Object.keys(bn).forEach(function(e){yf.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),bn[t]=bn[e]})});function lp(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||bn.hasOwnProperty(e)&&bn[e]?(""+t).trim():t+"px"}function op(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=lp(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var vf=We({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Wl(e,t){if(t){if(vf[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(J(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(J(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(J(61))}if(t.style!=null&&typeof t.style!="object")throw Error(J(62))}}function Hl(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kl=null;function Ko(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Gl=null,Lr=null,Ir=null;function nd(e){if(e=Xn(e)){if(typeof Gl!="function")throw Error(J(280));var t=e.stateNode;t&&(t=Pi(t),Gl(e.stateNode,e.type,t))}}function cp(e){Lr?Ir?Ir.push(e):Ir=[e]:Lr=e}function dp(){if(Lr){var e=Lr,t=Ir;if(Ir=Lr=null,nd(e),t)for(e=0;e<t.length;e++)nd(t[e])}}function up(e,t){return e(t)}function pp(){}var rl=!1;function mp(e,t,r){if(rl)return e(t,r);rl=!0;try{return up(e,t,r)}finally{rl=!1,(Lr!==null||Ir!==null)&&(pp(),dp())}}function In(e,t){var r=e.stateNode;if(r===null)return null;var n=Pi(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(J(231,t,typeof r));return r}var ql=!1;if(ua)try{var nn={};Object.defineProperty(nn,"passive",{get:function(){ql=!0}}),window.addEventListener("test",nn,nn),window.removeEventListener("test",nn,nn)}catch{ql=!1}function bf(e,t,r,n,s,i,l,d,o){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(u){this.onError(u)}}var jn=!1,Qs=null,Ys=!1,Ql=null,jf={onError:function(e){jn=!0,Qs=e}};function Nf(e,t,r,n,s,i,l,d,o){jn=!1,Qs=null,bf.apply(jf,arguments)}function wf(e,t,r,n,s,i,l,d,o){if(Nf.apply(this,arguments),jn){if(jn){var c=Qs;jn=!1,Qs=null}else throw Error(J(198));Ys||(Ys=!0,Ql=c)}}function mr(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function hp(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function sd(e){if(mr(e)!==e)throw Error(J(188))}function Cf(e){var t=e.alternate;if(!t){if(t=mr(e),t===null)throw Error(J(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return sd(s),e;if(i===n)return sd(s),t;i=i.sibling}throw Error(J(188))}if(r.return!==n.return)r=s,n=i;else{for(var l=!1,d=s.child;d;){if(d===r){l=!0,r=s,n=i;break}if(d===n){l=!0,n=s,r=i;break}d=d.sibling}if(!l){for(d=i.child;d;){if(d===r){l=!0,r=i,n=s;break}if(d===n){l=!0,n=i,r=s;break}d=d.sibling}if(!l)throw Error(J(189))}}if(r.alternate!==n)throw Error(J(190))}if(r.tag!==3)throw Error(J(188));return r.stateNode.current===r?e:t}function fp(e){return e=Cf(e),e!==null?xp(e):null}function xp(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=xp(e);if(t!==null)return t;e=e.sibling}return null}var gp=Tt.unstable_scheduleCallback,id=Tt.unstable_cancelCallback,Sf=Tt.unstable_shouldYield,kf=Tt.unstable_requestPaint,qe=Tt.unstable_now,Ef=Tt.unstable_getCurrentPriorityLevel,Go=Tt.unstable_ImmediatePriority,yp=Tt.unstable_UserBlockingPriority,Js=Tt.unstable_NormalPriority,Pf=Tt.unstable_LowPriority,vp=Tt.unstable_IdlePriority,Ci=null,ea=null;function Af(e){if(ea&&typeof ea.onCommitFiberRoot=="function")try{ea.onCommitFiberRoot(Ci,e,void 0,(e.current.flags&128)===128)}catch{}}var Ht=Math.clz32?Math.clz32:If,Tf=Math.log,Lf=Math.LN2;function If(e){return e>>>=0,e===0?32:31-(Tf(e)/Lf|0)|0}var hs=64,fs=4194304;function xn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Zs(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,i=e.pingedLanes,l=r&268435455;if(l!==0){var d=l&~s;d!==0?n=xn(d):(i&=l,i!==0&&(n=xn(i)))}else l=r&~s,l!==0?n=xn(l):i!==0&&(n=xn(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Ht(t),s=1<<r,n|=e[r],t&=~s;return n}function Df(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Rf(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var l=31-Ht(i),d=1<<l,o=s[l];o===-1?(!(d&r)||d&n)&&(s[l]=Df(d,t)):o<=t&&(e.expiredLanes|=d),i&=~d}}function Yl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function bp(){var e=hs;return hs<<=1,!(hs&4194240)&&(hs=64),e}function nl(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Jn(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ht(t),e[t]=r}function Mf(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-Ht(r),i=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~i}}function qo(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Ht(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var Te=0;function jp(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Np,Qo,wp,Cp,Sp,Jl=!1,xs=[],Aa=null,Ta=null,La=null,Dn=new Map,Rn=new Map,Ca=[],Of="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ld(e,t){switch(e){case"focusin":case"focusout":Aa=null;break;case"dragenter":case"dragleave":Ta=null;break;case"mouseover":case"mouseout":La=null;break;case"pointerover":case"pointerout":Dn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rn.delete(t.pointerId)}}function sn(e,t,r,n,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Xn(t),t!==null&&Qo(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function _f(e,t,r,n,s){switch(t){case"focusin":return Aa=sn(Aa,e,t,r,n,s),!0;case"dragenter":return Ta=sn(Ta,e,t,r,n,s),!0;case"mouseover":return La=sn(La,e,t,r,n,s),!0;case"pointerover":var i=s.pointerId;return Dn.set(i,sn(Dn.get(i)||null,e,t,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,Rn.set(i,sn(Rn.get(i)||null,e,t,r,n,s)),!0}return!1}function kp(e){var t=Qa(e.target);if(t!==null){var r=mr(t);if(r!==null){if(t=r.tag,t===13){if(t=hp(r),t!==null){e.blockedOn=t,Sp(e.priority,function(){wp(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Rs(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Zl(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Kl=n,r.target.dispatchEvent(n),Kl=null}else return t=Xn(r),t!==null&&Qo(t),e.blockedOn=r,!1;t.shift()}return!0}function od(e,t,r){Rs(e)&&r.delete(t)}function $f(){Jl=!1,Aa!==null&&Rs(Aa)&&(Aa=null),Ta!==null&&Rs(Ta)&&(Ta=null),La!==null&&Rs(La)&&(La=null),Dn.forEach(od),Rn.forEach(od)}function ln(e,t){e.blockedOn===t&&(e.blockedOn=null,Jl||(Jl=!0,Tt.unstable_scheduleCallback(Tt.unstable_NormalPriority,$f)))}function Mn(e){function t(s){return ln(s,e)}if(0<xs.length){ln(xs[0],e);for(var r=1;r<xs.length;r++){var n=xs[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Aa!==null&&ln(Aa,e),Ta!==null&&ln(Ta,e),La!==null&&ln(La,e),Dn.forEach(t),Rn.forEach(t),r=0;r<Ca.length;r++)n=Ca[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Ca.length&&(r=Ca[0],r.blockedOn===null);)kp(r),r.blockedOn===null&&Ca.shift()}var Dr=fa.ReactCurrentBatchConfig,Xs=!0;function Ff(e,t,r,n){var s=Te,i=Dr.transition;Dr.transition=null;try{Te=1,Yo(e,t,r,n)}finally{Te=s,Dr.transition=i}}function zf(e,t,r,n){var s=Te,i=Dr.transition;Dr.transition=null;try{Te=4,Yo(e,t,r,n)}finally{Te=s,Dr.transition=i}}function Yo(e,t,r,n){if(Xs){var s=Zl(e,t,r,n);if(s===null)hl(e,t,n,ei,r),ld(e,n);else if(_f(s,e,t,r,n))n.stopPropagation();else if(ld(e,n),t&4&&-1<Of.indexOf(e)){for(;s!==null;){var i=Xn(s);if(i!==null&&Np(i),i=Zl(e,t,r,n),i===null&&hl(e,t,n,ei,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else hl(e,t,n,null,r)}}var ei=null;function Zl(e,t,r,n){if(ei=null,e=Ko(n),e=Qa(e),e!==null)if(t=mr(e),t===null)e=null;else if(r=t.tag,r===13){if(e=hp(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ei=e,null}function Ep(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ef()){case Go:return 1;case yp:return 4;case Js:case Pf:return 16;case vp:return 536870912;default:return 16}default:return 16}}var ka=null,Jo=null,Ms=null;function Pp(){if(Ms)return Ms;var e,t=Jo,r=t.length,n,s="value"in ka?ka.value:ka.textContent,i=s.length;for(e=0;e<r&&t[e]===s[e];e++);var l=r-e;for(n=1;n<=l&&t[r-n]===s[i-n];n++);return Ms=s.slice(e,1<n?1-n:void 0)}function Os(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function gs(){return!0}function cd(){return!1}function It(e){function t(r,n,s,i,l){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var d in e)e.hasOwnProperty(d)&&(r=e[d],this[d]=r?r(i):i[d]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?gs:cd,this.isPropagationStopped=cd,this}return We(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=gs)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=gs)},persist:function(){},isPersistent:gs}),t}var qr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zo=It(qr),Zn=We({},qr,{view:0,detail:0}),Bf=It(Zn),sl,il,on,Si=We({},Zn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==on&&(on&&e.type==="mousemove"?(sl=e.screenX-on.screenX,il=e.screenY-on.screenY):il=sl=0,on=e),sl)},movementY:function(e){return"movementY"in e?e.movementY:il}}),dd=It(Si),Uf=We({},Si,{dataTransfer:0}),Vf=It(Uf),Wf=We({},Zn,{relatedTarget:0}),ll=It(Wf),Hf=We({},qr,{animationName:0,elapsedTime:0,pseudoElement:0}),Kf=It(Hf),Gf=We({},qr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),qf=It(Gf),Qf=We({},qr,{data:0}),ud=It(Qf),Yf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Zf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xf(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Zf[e])?!!t[e]:!1}function Xo(){return Xf}var e0=We({},Zn,{key:function(e){if(e.key){var t=Yf[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Os(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Jf[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xo,charCode:function(e){return e.type==="keypress"?Os(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Os(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),t0=It(e0),a0=We({},Si,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pd=It(a0),r0=We({},Zn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xo}),n0=It(r0),s0=We({},qr,{propertyName:0,elapsedTime:0,pseudoElement:0}),i0=It(s0),l0=We({},Si,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),o0=It(l0),c0=[9,13,27,32],ec=ua&&"CompositionEvent"in window,Nn=null;ua&&"documentMode"in document&&(Nn=document.documentMode);var d0=ua&&"TextEvent"in window&&!Nn,Ap=ua&&(!ec||Nn&&8<Nn&&11>=Nn),md=" ",hd=!1;function Tp(e,t){switch(e){case"keyup":return c0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Lp(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var br=!1;function u0(e,t){switch(e){case"compositionend":return Lp(t);case"keypress":return t.which!==32?null:(hd=!0,md);case"textInput":return e=t.data,e===md&&hd?null:e;default:return null}}function p0(e,t){if(br)return e==="compositionend"||!ec&&Tp(e,t)?(e=Pp(),Ms=Jo=ka=null,br=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ap&&t.locale!=="ko"?null:t.data;default:return null}}var m0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!m0[e.type]:t==="textarea"}function Ip(e,t,r,n){cp(n),t=ti(t,"onChange"),0<t.length&&(r=new Zo("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var wn=null,On=null;function h0(e){Vp(e,0)}function ki(e){var t=wr(e);if(ap(t))return e}function f0(e,t){if(e==="change")return t}var Dp=!1;if(ua){var ol;if(ua){var cl="oninput"in document;if(!cl){var xd=document.createElement("div");xd.setAttribute("oninput","return;"),cl=typeof xd.oninput=="function"}ol=cl}else ol=!1;Dp=ol&&(!document.documentMode||9<document.documentMode)}function gd(){wn&&(wn.detachEvent("onpropertychange",Rp),On=wn=null)}function Rp(e){if(e.propertyName==="value"&&ki(On)){var t=[];Ip(t,On,e,Ko(e)),mp(h0,t)}}function x0(e,t,r){e==="focusin"?(gd(),wn=t,On=r,wn.attachEvent("onpropertychange",Rp)):e==="focusout"&&gd()}function g0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ki(On)}function y0(e,t){if(e==="click")return ki(t)}function v0(e,t){if(e==="input"||e==="change")return ki(t)}function b0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Gt=typeof Object.is=="function"?Object.is:b0;function _n(e,t){if(Gt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Rl.call(t,s)||!Gt(e[s],t[s]))return!1}return!0}function yd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function vd(e,t){var r=yd(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=yd(r)}}function Mp(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Mp(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Op(){for(var e=window,t=qs();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=qs(e.document)}return t}function tc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function j0(e){var t=Op(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Mp(r.ownerDocument.documentElement,r)){if(n!==null&&tc(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!e.extend&&i>n&&(s=n,n=i,i=s),s=vd(r,i);var l=vd(r,n);s&&l&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var N0=ua&&"documentMode"in document&&11>=document.documentMode,jr=null,Xl=null,Cn=null,eo=!1;function bd(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;eo||jr==null||jr!==qs(n)||(n=jr,"selectionStart"in n&&tc(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Cn&&_n(Cn,n)||(Cn=n,n=ti(Xl,"onSelect"),0<n.length&&(t=new Zo("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=jr)))}function ys(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Nr={animationend:ys("Animation","AnimationEnd"),animationiteration:ys("Animation","AnimationIteration"),animationstart:ys("Animation","AnimationStart"),transitionend:ys("Transition","TransitionEnd")},dl={},_p={};ua&&(_p=document.createElement("div").style,"AnimationEvent"in window||(delete Nr.animationend.animation,delete Nr.animationiteration.animation,delete Nr.animationstart.animation),"TransitionEvent"in window||delete Nr.transitionend.transition);function Ei(e){if(dl[e])return dl[e];if(!Nr[e])return e;var t=Nr[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in _p)return dl[e]=t[r];return e}var $p=Ei("animationend"),Fp=Ei("animationiteration"),zp=Ei("animationstart"),Bp=Ei("transitionend"),Up=new Map,jd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ba(e,t){Up.set(e,t),pr(t,[e])}for(var ul=0;ul<jd.length;ul++){var pl=jd[ul],w0=pl.toLowerCase(),C0=pl[0].toUpperCase()+pl.slice(1);Ba(w0,"on"+C0)}Ba($p,"onAnimationEnd");Ba(Fp,"onAnimationIteration");Ba(zp,"onAnimationStart");Ba("dblclick","onDoubleClick");Ba("focusin","onFocus");Ba("focusout","onBlur");Ba(Bp,"onTransitionEnd");_r("onMouseEnter",["mouseout","mouseover"]);_r("onMouseLeave",["mouseout","mouseover"]);_r("onPointerEnter",["pointerout","pointerover"]);_r("onPointerLeave",["pointerout","pointerover"]);pr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));pr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));pr("onBeforeInput",["compositionend","keypress","textInput","paste"]);pr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));pr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));pr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),S0=new Set("cancel close invalid load scroll toggle".split(" ").concat(gn));function Nd(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,wf(n,t,void 0,e),e.currentTarget=null}function Vp(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var l=n.length-1;0<=l;l--){var d=n[l],o=d.instance,c=d.currentTarget;if(d=d.listener,o!==i&&s.isPropagationStopped())break e;Nd(s,d,c),i=o}else for(l=0;l<n.length;l++){if(d=n[l],o=d.instance,c=d.currentTarget,d=d.listener,o!==i&&s.isPropagationStopped())break e;Nd(s,d,c),i=o}}}if(Ys)throw e=Ql,Ys=!1,Ql=null,e}function Oe(e,t){var r=t[so];r===void 0&&(r=t[so]=new Set);var n=e+"__bubble";r.has(n)||(Wp(t,e,2,!1),r.add(n))}function ml(e,t,r){var n=0;t&&(n|=4),Wp(r,e,n,t)}var vs="_reactListening"+Math.random().toString(36).slice(2);function $n(e){if(!e[vs]){e[vs]=!0,Ju.forEach(function(r){r!=="selectionchange"&&(S0.has(r)||ml(r,!1,e),ml(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[vs]||(t[vs]=!0,ml("selectionchange",!1,t))}}function Wp(e,t,r,n){switch(Ep(t)){case 1:var s=Ff;break;case 4:s=zf;break;default:s=Yo}r=s.bind(null,t,r,e),s=void 0,!ql||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function hl(e,t,r,n,s){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var l=n.tag;if(l===3||l===4){var d=n.stateNode.containerInfo;if(d===s||d.nodeType===8&&d.parentNode===s)break;if(l===4)for(l=n.return;l!==null;){var o=l.tag;if((o===3||o===4)&&(o=l.stateNode.containerInfo,o===s||o.nodeType===8&&o.parentNode===s))return;l=l.return}for(;d!==null;){if(l=Qa(d),l===null)return;if(o=l.tag,o===5||o===6){n=i=l;continue e}d=d.parentNode}}n=n.return}mp(function(){var c=i,u=Ko(r),p=[];e:{var m=Up.get(e);if(m!==void 0){var N=Zo,f=e;switch(e){case"keypress":if(Os(r)===0)break e;case"keydown":case"keyup":N=t0;break;case"focusin":f="focus",N=ll;break;case"focusout":f="blur",N=ll;break;case"beforeblur":case"afterblur":N=ll;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":N=dd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":N=Vf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":N=n0;break;case $p:case Fp:case zp:N=Kf;break;case Bp:N=i0;break;case"scroll":N=Bf;break;case"wheel":N=o0;break;case"copy":case"cut":case"paste":N=qf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":N=pd}var h=(t&4)!==0,j=!h&&e==="scroll",x=h?m!==null?m+"Capture":null:m;h=[];for(var g=c,b;g!==null;){b=g;var E=b.stateNode;if(b.tag===5&&E!==null&&(b=E,x!==null&&(E=In(g,x),E!=null&&h.push(Fn(g,E,b)))),j)break;g=g.return}0<h.length&&(m=new N(m,f,null,r,u),p.push({event:m,listeners:h}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",N=e==="mouseout"||e==="pointerout",m&&r!==Kl&&(f=r.relatedTarget||r.fromElement)&&(Qa(f)||f[pa]))break e;if((N||m)&&(m=u.window===u?u:(m=u.ownerDocument)?m.defaultView||m.parentWindow:window,N?(f=r.relatedTarget||r.toElement,N=c,f=f?Qa(f):null,f!==null&&(j=mr(f),f!==j||f.tag!==5&&f.tag!==6)&&(f=null)):(N=null,f=c),N!==f)){if(h=dd,E="onMouseLeave",x="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(h=pd,E="onPointerLeave",x="onPointerEnter",g="pointer"),j=N==null?m:wr(N),b=f==null?m:wr(f),m=new h(E,g+"leave",N,r,u),m.target=j,m.relatedTarget=b,E=null,Qa(u)===c&&(h=new h(x,g+"enter",f,r,u),h.target=b,h.relatedTarget=j,E=h),j=E,N&&f)t:{for(h=N,x=f,g=0,b=h;b;b=fr(b))g++;for(b=0,E=x;E;E=fr(E))b++;for(;0<g-b;)h=fr(h),g--;for(;0<b-g;)x=fr(x),b--;for(;g--;){if(h===x||x!==null&&h===x.alternate)break t;h=fr(h),x=fr(x)}h=null}else h=null;N!==null&&wd(p,m,N,h,!1),f!==null&&j!==null&&wd(p,j,f,h,!0)}}e:{if(m=c?wr(c):window,N=m.nodeName&&m.nodeName.toLowerCase(),N==="select"||N==="input"&&m.type==="file")var y=f0;else if(fd(m))if(Dp)y=v0;else{y=g0;var w=x0}else(N=m.nodeName)&&N.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(y=y0);if(y&&(y=y(e,c))){Ip(p,y,r,u);break e}w&&w(e,m,c),e==="focusout"&&(w=m._wrapperState)&&w.controlled&&m.type==="number"&&Bl(m,"number",m.value)}switch(w=c?wr(c):window,e){case"focusin":(fd(w)||w.contentEditable==="true")&&(jr=w,Xl=c,Cn=null);break;case"focusout":Cn=Xl=jr=null;break;case"mousedown":eo=!0;break;case"contextmenu":case"mouseup":case"dragend":eo=!1,bd(p,r,u);break;case"selectionchange":if(N0)break;case"keydown":case"keyup":bd(p,r,u)}var k;if(ec)e:{switch(e){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else br?Tp(e,r)&&(I="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(I="onCompositionStart");I&&(Ap&&r.locale!=="ko"&&(br||I!=="onCompositionStart"?I==="onCompositionEnd"&&br&&(k=Pp()):(ka=u,Jo="value"in ka?ka.value:ka.textContent,br=!0)),w=ti(c,I),0<w.length&&(I=new ud(I,e,null,r,u),p.push({event:I,listeners:w}),k?I.data=k:(k=Lp(r),k!==null&&(I.data=k)))),(k=d0?u0(e,r):p0(e,r))&&(c=ti(c,"onBeforeInput"),0<c.length&&(u=new ud("onBeforeInput","beforeinput",null,r,u),p.push({event:u,listeners:c}),u.data=k))}Vp(p,t)})}function Fn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function ti(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=In(e,r),i!=null&&n.unshift(Fn(e,i,s)),i=In(e,t),i!=null&&n.push(Fn(e,i,s))),e=e.return}return n}function fr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function wd(e,t,r,n,s){for(var i=t._reactName,l=[];r!==null&&r!==n;){var d=r,o=d.alternate,c=d.stateNode;if(o!==null&&o===n)break;d.tag===5&&c!==null&&(d=c,s?(o=In(r,i),o!=null&&l.unshift(Fn(r,o,d))):s||(o=In(r,i),o!=null&&l.push(Fn(r,o,d)))),r=r.return}l.length!==0&&e.push({event:t,listeners:l})}var k0=/\r\n?/g,E0=/\u0000|\uFFFD/g;function Cd(e){return(typeof e=="string"?e:""+e).replace(k0,`
`).replace(E0,"")}function bs(e,t,r){if(t=Cd(t),Cd(e)!==t&&r)throw Error(J(425))}function ai(){}var to=null,ao=null;function ro(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var no=typeof setTimeout=="function"?setTimeout:void 0,P0=typeof clearTimeout=="function"?clearTimeout:void 0,Sd=typeof Promise=="function"?Promise:void 0,A0=typeof queueMicrotask=="function"?queueMicrotask:typeof Sd<"u"?function(e){return Sd.resolve(null).then(e).catch(T0)}:no;function T0(e){setTimeout(function(){throw e})}function fl(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),Mn(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Mn(t)}function Ia(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function kd(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Qr=Math.random().toString(36).slice(2),Zt="__reactFiber$"+Qr,zn="__reactProps$"+Qr,pa="__reactContainer$"+Qr,so="__reactEvents$"+Qr,L0="__reactListeners$"+Qr,I0="__reactHandles$"+Qr;function Qa(e){var t=e[Zt];if(t)return t;for(var r=e.parentNode;r;){if(t=r[pa]||r[Zt]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=kd(e);e!==null;){if(r=e[Zt])return r;e=kd(e)}return t}e=r,r=e.parentNode}return null}function Xn(e){return e=e[Zt]||e[pa],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function wr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(J(33))}function Pi(e){return e[zn]||null}var io=[],Cr=-1;function Ua(e){return{current:e}}function _e(e){0>Cr||(e.current=io[Cr],io[Cr]=null,Cr--)}function Re(e,t){Cr++,io[Cr]=e.current,e.current=t}var za={},pt=Ua(za),jt=Ua(!1),nr=za;function $r(e,t){var r=e.type.contextTypes;if(!r)return za;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Nt(e){return e=e.childContextTypes,e!=null}function ri(){_e(jt),_e(pt)}function Ed(e,t,r){if(pt.current!==za)throw Error(J(168));Re(pt,t),Re(jt,r)}function Hp(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(J(108,xf(e)||"Unknown",s));return We({},r,n)}function ni(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||za,nr=pt.current,Re(pt,e),Re(jt,jt.current),!0}function Pd(e,t,r){var n=e.stateNode;if(!n)throw Error(J(169));r?(e=Hp(e,t,nr),n.__reactInternalMemoizedMergedChildContext=e,_e(jt),_e(pt),Re(pt,e)):_e(jt),Re(jt,r)}var ia=null,Ai=!1,xl=!1;function Kp(e){ia===null?ia=[e]:ia.push(e)}function D0(e){Ai=!0,Kp(e)}function Va(){if(!xl&&ia!==null){xl=!0;var e=0,t=Te;try{var r=ia;for(Te=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}ia=null,Ai=!1}catch(s){throw ia!==null&&(ia=ia.slice(e+1)),gp(Go,Va),s}finally{Te=t,xl=!1}}return null}var Sr=[],kr=0,si=null,ii=0,Rt=[],Mt=0,sr=null,oa=1,ca="";function Ka(e,t){Sr[kr++]=ii,Sr[kr++]=si,si=e,ii=t}function Gp(e,t,r){Rt[Mt++]=oa,Rt[Mt++]=ca,Rt[Mt++]=sr,sr=e;var n=oa;e=ca;var s=32-Ht(n)-1;n&=~(1<<s),r+=1;var i=32-Ht(t)+s;if(30<i){var l=s-s%5;i=(n&(1<<l)-1).toString(32),n>>=l,s-=l,oa=1<<32-Ht(t)+s|r<<s|n,ca=i+e}else oa=1<<i|r<<s|n,ca=e}function ac(e){e.return!==null&&(Ka(e,1),Gp(e,1,0))}function rc(e){for(;e===si;)si=Sr[--kr],Sr[kr]=null,ii=Sr[--kr],Sr[kr]=null;for(;e===sr;)sr=Rt[--Mt],Rt[Mt]=null,ca=Rt[--Mt],Rt[Mt]=null,oa=Rt[--Mt],Rt[Mt]=null}var At=null,Pt=null,$e=!1,Wt=null;function qp(e,t){var r=Ot(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Ad(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,At=e,Pt=Ia(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,At=e,Pt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=sr!==null?{id:oa,overflow:ca}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Ot(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,At=e,Pt=null,!0):!1;default:return!1}}function lo(e){return(e.mode&1)!==0&&(e.flags&128)===0}function oo(e){if($e){var t=Pt;if(t){var r=t;if(!Ad(e,t)){if(lo(e))throw Error(J(418));t=Ia(r.nextSibling);var n=At;t&&Ad(e,t)?qp(n,r):(e.flags=e.flags&-4097|2,$e=!1,At=e)}}else{if(lo(e))throw Error(J(418));e.flags=e.flags&-4097|2,$e=!1,At=e}}}function Td(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;At=e}function js(e){if(e!==At)return!1;if(!$e)return Td(e),$e=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ro(e.type,e.memoizedProps)),t&&(t=Pt)){if(lo(e))throw Qp(),Error(J(418));for(;t;)qp(e,t),t=Ia(t.nextSibling)}if(Td(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(J(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Pt=Ia(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Pt=null}}else Pt=At?Ia(e.stateNode.nextSibling):null;return!0}function Qp(){for(var e=Pt;e;)e=Ia(e.nextSibling)}function Fr(){Pt=At=null,$e=!1}function nc(e){Wt===null?Wt=[e]:Wt.push(e)}var R0=fa.ReactCurrentBatchConfig;function cn(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(J(309));var n=r.stateNode}if(!n)throw Error(J(147,e));var s=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(l){var d=s.refs;l===null?delete d[i]:d[i]=l},t._stringRef=i,t)}if(typeof e!="string")throw Error(J(284));if(!r._owner)throw Error(J(290,e))}return e}function Ns(e,t){throw e=Object.prototype.toString.call(t),Error(J(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ld(e){var t=e._init;return t(e._payload)}function Yp(e){function t(x,g){if(e){var b=x.deletions;b===null?(x.deletions=[g],x.flags|=16):b.push(g)}}function r(x,g){if(!e)return null;for(;g!==null;)t(x,g),g=g.sibling;return null}function n(x,g){for(x=new Map;g!==null;)g.key!==null?x.set(g.key,g):x.set(g.index,g),g=g.sibling;return x}function s(x,g){return x=Oa(x,g),x.index=0,x.sibling=null,x}function i(x,g,b){return x.index=b,e?(b=x.alternate,b!==null?(b=b.index,b<g?(x.flags|=2,g):b):(x.flags|=2,g)):(x.flags|=1048576,g)}function l(x){return e&&x.alternate===null&&(x.flags|=2),x}function d(x,g,b,E){return g===null||g.tag!==6?(g=wl(b,x.mode,E),g.return=x,g):(g=s(g,b),g.return=x,g)}function o(x,g,b,E){var y=b.type;return y===vr?u(x,g,b.props.children,E,b.key):g!==null&&(g.elementType===y||typeof y=="object"&&y!==null&&y.$$typeof===Na&&Ld(y)===g.type)?(E=s(g,b.props),E.ref=cn(x,g,b),E.return=x,E):(E=Vs(b.type,b.key,b.props,null,x.mode,E),E.ref=cn(x,g,b),E.return=x,E)}function c(x,g,b,E){return g===null||g.tag!==4||g.stateNode.containerInfo!==b.containerInfo||g.stateNode.implementation!==b.implementation?(g=Cl(b,x.mode,E),g.return=x,g):(g=s(g,b.children||[]),g.return=x,g)}function u(x,g,b,E,y){return g===null||g.tag!==7?(g=ar(b,x.mode,E,y),g.return=x,g):(g=s(g,b),g.return=x,g)}function p(x,g,b){if(typeof g=="string"&&g!==""||typeof g=="number")return g=wl(""+g,x.mode,b),g.return=x,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case us:return b=Vs(g.type,g.key,g.props,null,x.mode,b),b.ref=cn(x,null,g),b.return=x,b;case yr:return g=Cl(g,x.mode,b),g.return=x,g;case Na:var E=g._init;return p(x,E(g._payload),b)}if(fn(g)||rn(g))return g=ar(g,x.mode,b,null),g.return=x,g;Ns(x,g)}return null}function m(x,g,b,E){var y=g!==null?g.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return y!==null?null:d(x,g,""+b,E);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case us:return b.key===y?o(x,g,b,E):null;case yr:return b.key===y?c(x,g,b,E):null;case Na:return y=b._init,m(x,g,y(b._payload),E)}if(fn(b)||rn(b))return y!==null?null:u(x,g,b,E,null);Ns(x,b)}return null}function N(x,g,b,E,y){if(typeof E=="string"&&E!==""||typeof E=="number")return x=x.get(b)||null,d(g,x,""+E,y);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case us:return x=x.get(E.key===null?b:E.key)||null,o(g,x,E,y);case yr:return x=x.get(E.key===null?b:E.key)||null,c(g,x,E,y);case Na:var w=E._init;return N(x,g,b,w(E._payload),y)}if(fn(E)||rn(E))return x=x.get(b)||null,u(g,x,E,y,null);Ns(g,E)}return null}function f(x,g,b,E){for(var y=null,w=null,k=g,I=g=0,R=null;k!==null&&I<b.length;I++){k.index>I?(R=k,k=null):R=k.sibling;var U=m(x,k,b[I],E);if(U===null){k===null&&(k=R);break}e&&k&&U.alternate===null&&t(x,k),g=i(U,g,I),w===null?y=U:w.sibling=U,w=U,k=R}if(I===b.length)return r(x,k),$e&&Ka(x,I),y;if(k===null){for(;I<b.length;I++)k=p(x,b[I],E),k!==null&&(g=i(k,g,I),w===null?y=k:w.sibling=k,w=k);return $e&&Ka(x,I),y}for(k=n(x,k);I<b.length;I++)R=N(k,x,I,b[I],E),R!==null&&(e&&R.alternate!==null&&k.delete(R.key===null?I:R.key),g=i(R,g,I),w===null?y=R:w.sibling=R,w=R);return e&&k.forEach(function(M){return t(x,M)}),$e&&Ka(x,I),y}function h(x,g,b,E){var y=rn(b);if(typeof y!="function")throw Error(J(150));if(b=y.call(b),b==null)throw Error(J(151));for(var w=y=null,k=g,I=g=0,R=null,U=b.next();k!==null&&!U.done;I++,U=b.next()){k.index>I?(R=k,k=null):R=k.sibling;var M=m(x,k,U.value,E);if(M===null){k===null&&(k=R);break}e&&k&&M.alternate===null&&t(x,k),g=i(M,g,I),w===null?y=M:w.sibling=M,w=M,k=R}if(U.done)return r(x,k),$e&&Ka(x,I),y;if(k===null){for(;!U.done;I++,U=b.next())U=p(x,U.value,E),U!==null&&(g=i(U,g,I),w===null?y=U:w.sibling=U,w=U);return $e&&Ka(x,I),y}for(k=n(x,k);!U.done;I++,U=b.next())U=N(k,x,I,U.value,E),U!==null&&(e&&U.alternate!==null&&k.delete(U.key===null?I:U.key),g=i(U,g,I),w===null?y=U:w.sibling=U,w=U);return e&&k.forEach(function(L){return t(x,L)}),$e&&Ka(x,I),y}function j(x,g,b,E){if(typeof b=="object"&&b!==null&&b.type===vr&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case us:e:{for(var y=b.key,w=g;w!==null;){if(w.key===y){if(y=b.type,y===vr){if(w.tag===7){r(x,w.sibling),g=s(w,b.props.children),g.return=x,x=g;break e}}else if(w.elementType===y||typeof y=="object"&&y!==null&&y.$$typeof===Na&&Ld(y)===w.type){r(x,w.sibling),g=s(w,b.props),g.ref=cn(x,w,b),g.return=x,x=g;break e}r(x,w);break}else t(x,w);w=w.sibling}b.type===vr?(g=ar(b.props.children,x.mode,E,b.key),g.return=x,x=g):(E=Vs(b.type,b.key,b.props,null,x.mode,E),E.ref=cn(x,g,b),E.return=x,x=E)}return l(x);case yr:e:{for(w=b.key;g!==null;){if(g.key===w)if(g.tag===4&&g.stateNode.containerInfo===b.containerInfo&&g.stateNode.implementation===b.implementation){r(x,g.sibling),g=s(g,b.children||[]),g.return=x,x=g;break e}else{r(x,g);break}else t(x,g);g=g.sibling}g=Cl(b,x.mode,E),g.return=x,x=g}return l(x);case Na:return w=b._init,j(x,g,w(b._payload),E)}if(fn(b))return f(x,g,b,E);if(rn(b))return h(x,g,b,E);Ns(x,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,g!==null&&g.tag===6?(r(x,g.sibling),g=s(g,b),g.return=x,x=g):(r(x,g),g=wl(b,x.mode,E),g.return=x,x=g),l(x)):r(x,g)}return j}var zr=Yp(!0),Jp=Yp(!1),li=Ua(null),oi=null,Er=null,sc=null;function ic(){sc=Er=oi=null}function lc(e){var t=li.current;_e(li),e._currentValue=t}function co(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Rr(e,t){oi=e,sc=Er=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(bt=!0),e.firstContext=null)}function $t(e){var t=e._currentValue;if(sc!==e)if(e={context:e,memoizedValue:t,next:null},Er===null){if(oi===null)throw Error(J(308));Er=e,oi.dependencies={lanes:0,firstContext:e}}else Er=Er.next=e;return t}var Ya=null;function oc(e){Ya===null?Ya=[e]:Ya.push(e)}function Zp(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,oc(t)):(r.next=s.next,s.next=r),t.interleaved=r,ma(e,n)}function ma(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var wa=!1;function cc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Xp(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function da(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Da(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,ke&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,ma(e,r)}return s=n.interleaved,s===null?(t.next=t,oc(n)):(t.next=s.next,s.next=t),n.interleaved=t,ma(e,r)}function _s(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,qo(e,r)}}function Id(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var l={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=l:i=i.next=l,r=r.next}while(r!==null);i===null?s=i=t:i=i.next=t}else s=i=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function ci(e,t,r,n){var s=e.updateQueue;wa=!1;var i=s.firstBaseUpdate,l=s.lastBaseUpdate,d=s.shared.pending;if(d!==null){s.shared.pending=null;var o=d,c=o.next;o.next=null,l===null?i=c:l.next=c,l=o;var u=e.alternate;u!==null&&(u=u.updateQueue,d=u.lastBaseUpdate,d!==l&&(d===null?u.firstBaseUpdate=c:d.next=c,u.lastBaseUpdate=o))}if(i!==null){var p=s.baseState;l=0,u=c=o=null,d=i;do{var m=d.lane,N=d.eventTime;if((n&m)===m){u!==null&&(u=u.next={eventTime:N,lane:0,tag:d.tag,payload:d.payload,callback:d.callback,next:null});e:{var f=e,h=d;switch(m=t,N=r,h.tag){case 1:if(f=h.payload,typeof f=="function"){p=f.call(N,p,m);break e}p=f;break e;case 3:f.flags=f.flags&-65537|128;case 0:if(f=h.payload,m=typeof f=="function"?f.call(N,p,m):f,m==null)break e;p=We({},p,m);break e;case 2:wa=!0}}d.callback!==null&&d.lane!==0&&(e.flags|=64,m=s.effects,m===null?s.effects=[d]:m.push(d))}else N={eventTime:N,lane:m,tag:d.tag,payload:d.payload,callback:d.callback,next:null},u===null?(c=u=N,o=p):u=u.next=N,l|=m;if(d=d.next,d===null){if(d=s.shared.pending,d===null)break;m=d,d=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(u===null&&(o=p),s.baseState=o,s.firstBaseUpdate=c,s.lastBaseUpdate=u,t=s.shared.interleaved,t!==null){s=t;do l|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);lr|=l,e.lanes=l,e.memoizedState=p}}function Dd(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(J(191,s));s.call(n)}}}var es={},ta=Ua(es),Bn=Ua(es),Un=Ua(es);function Ja(e){if(e===es)throw Error(J(174));return e}function dc(e,t){switch(Re(Un,t),Re(Bn,e),Re(ta,es),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Vl(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Vl(t,e)}_e(ta),Re(ta,t)}function Br(){_e(ta),_e(Bn),_e(Un)}function em(e){Ja(Un.current);var t=Ja(ta.current),r=Vl(t,e.type);t!==r&&(Re(Bn,e),Re(ta,r))}function uc(e){Bn.current===e&&(_e(ta),_e(Bn))}var ze=Ua(0);function di(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var gl=[];function pc(){for(var e=0;e<gl.length;e++)gl[e]._workInProgressVersionPrimary=null;gl.length=0}var $s=fa.ReactCurrentDispatcher,yl=fa.ReactCurrentBatchConfig,ir=0,Ue=null,Je=null,et=null,ui=!1,Sn=!1,Vn=0,M0=0;function ot(){throw Error(J(321))}function mc(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Gt(e[r],t[r]))return!1;return!0}function hc(e,t,r,n,s,i){if(ir=i,Ue=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,$s.current=e===null||e.memoizedState===null?F0:z0,e=r(n,s),Sn){i=0;do{if(Sn=!1,Vn=0,25<=i)throw Error(J(301));i+=1,et=Je=null,t.updateQueue=null,$s.current=B0,e=r(n,s)}while(Sn)}if($s.current=pi,t=Je!==null&&Je.next!==null,ir=0,et=Je=Ue=null,ui=!1,t)throw Error(J(300));return e}function fc(){var e=Vn!==0;return Vn=0,e}function Jt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return et===null?Ue.memoizedState=et=e:et=et.next=e,et}function Ft(){if(Je===null){var e=Ue.alternate;e=e!==null?e.memoizedState:null}else e=Je.next;var t=et===null?Ue.memoizedState:et.next;if(t!==null)et=t,Je=e;else{if(e===null)throw Error(J(310));Je=e,e={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},et===null?Ue.memoizedState=et=e:et=et.next=e}return et}function Wn(e,t){return typeof t=="function"?t(e):t}function vl(e){var t=Ft(),r=t.queue;if(r===null)throw Error(J(311));r.lastRenderedReducer=e;var n=Je,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var l=s.next;s.next=i.next,i.next=l}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var d=l=null,o=null,c=i;do{var u=c.lane;if((ir&u)===u)o!==null&&(o=o.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:e(n,c.action);else{var p={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};o===null?(d=o=p,l=n):o=o.next=p,Ue.lanes|=u,lr|=u}c=c.next}while(c!==null&&c!==i);o===null?l=n:o.next=d,Gt(n,t.memoizedState)||(bt=!0),t.memoizedState=n,t.baseState=l,t.baseQueue=o,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do i=s.lane,Ue.lanes|=i,lr|=i,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function bl(e){var t=Ft(),r=t.queue;if(r===null)throw Error(J(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,i=t.memoizedState;if(s!==null){r.pending=null;var l=s=s.next;do i=e(i,l.action),l=l.next;while(l!==s);Gt(i,t.memoizedState)||(bt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function tm(){}function am(e,t){var r=Ue,n=Ft(),s=t(),i=!Gt(n.memoizedState,s);if(i&&(n.memoizedState=s,bt=!0),n=n.queue,xc(sm.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||et!==null&&et.memoizedState.tag&1){if(r.flags|=2048,Hn(9,nm.bind(null,r,n,s,t),void 0,null),tt===null)throw Error(J(349));ir&30||rm(r,t,s)}return s}function rm(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Ue.updateQueue,t===null?(t={lastEffect:null,stores:null},Ue.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function nm(e,t,r,n){t.value=r,t.getSnapshot=n,im(t)&&lm(e)}function sm(e,t,r){return r(function(){im(t)&&lm(e)})}function im(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Gt(e,r)}catch{return!0}}function lm(e){var t=ma(e,1);t!==null&&Kt(t,e,1,-1)}function Rd(e){var t=Jt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wn,lastRenderedState:e},t.queue=e,e=e.dispatch=$0.bind(null,Ue,e),[t.memoizedState,e]}function Hn(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Ue.updateQueue,t===null?(t={lastEffect:null,stores:null},Ue.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function om(){return Ft().memoizedState}function Fs(e,t,r,n){var s=Jt();Ue.flags|=e,s.memoizedState=Hn(1|t,r,void 0,n===void 0?null:n)}function Ti(e,t,r,n){var s=Ft();n=n===void 0?null:n;var i=void 0;if(Je!==null){var l=Je.memoizedState;if(i=l.destroy,n!==null&&mc(n,l.deps)){s.memoizedState=Hn(t,r,i,n);return}}Ue.flags|=e,s.memoizedState=Hn(1|t,r,i,n)}function Md(e,t){return Fs(8390656,8,e,t)}function xc(e,t){return Ti(2048,8,e,t)}function cm(e,t){return Ti(4,2,e,t)}function dm(e,t){return Ti(4,4,e,t)}function um(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function pm(e,t,r){return r=r!=null?r.concat([e]):null,Ti(4,4,um.bind(null,t,e),r)}function gc(){}function mm(e,t){var r=Ft();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&mc(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function hm(e,t){var r=Ft();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&mc(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function fm(e,t,r){return ir&21?(Gt(r,t)||(r=bp(),Ue.lanes|=r,lr|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,bt=!0),e.memoizedState=r)}function O0(e,t){var r=Te;Te=r!==0&&4>r?r:4,e(!0);var n=yl.transition;yl.transition={};try{e(!1),t()}finally{Te=r,yl.transition=n}}function xm(){return Ft().memoizedState}function _0(e,t,r){var n=Ma(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},gm(e))ym(t,r);else if(r=Zp(e,t,r,n),r!==null){var s=ht();Kt(r,e,n,s),vm(r,t,n)}}function $0(e,t,r){var n=Ma(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(gm(e))ym(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var l=t.lastRenderedState,d=i(l,r);if(s.hasEagerState=!0,s.eagerState=d,Gt(d,l)){var o=t.interleaved;o===null?(s.next=s,oc(t)):(s.next=o.next,o.next=s),t.interleaved=s;return}}catch{}finally{}r=Zp(e,t,s,n),r!==null&&(s=ht(),Kt(r,e,n,s),vm(r,t,n))}}function gm(e){var t=e.alternate;return e===Ue||t!==null&&t===Ue}function ym(e,t){Sn=ui=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function vm(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,qo(e,r)}}var pi={readContext:$t,useCallback:ot,useContext:ot,useEffect:ot,useImperativeHandle:ot,useInsertionEffect:ot,useLayoutEffect:ot,useMemo:ot,useReducer:ot,useRef:ot,useState:ot,useDebugValue:ot,useDeferredValue:ot,useTransition:ot,useMutableSource:ot,useSyncExternalStore:ot,useId:ot,unstable_isNewReconciler:!1},F0={readContext:$t,useCallback:function(e,t){return Jt().memoizedState=[e,t===void 0?null:t],e},useContext:$t,useEffect:Md,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Fs(4194308,4,um.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Fs(4194308,4,e,t)},useInsertionEffect:function(e,t){return Fs(4,2,e,t)},useMemo:function(e,t){var r=Jt();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Jt();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=_0.bind(null,Ue,e),[n.memoizedState,e]},useRef:function(e){var t=Jt();return e={current:e},t.memoizedState=e},useState:Rd,useDebugValue:gc,useDeferredValue:function(e){return Jt().memoizedState=e},useTransition:function(){var e=Rd(!1),t=e[0];return e=O0.bind(null,e[1]),Jt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Ue,s=Jt();if($e){if(r===void 0)throw Error(J(407));r=r()}else{if(r=t(),tt===null)throw Error(J(349));ir&30||rm(n,t,r)}s.memoizedState=r;var i={value:r,getSnapshot:t};return s.queue=i,Md(sm.bind(null,n,i,e),[e]),n.flags|=2048,Hn(9,nm.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=Jt(),t=tt.identifierPrefix;if($e){var r=ca,n=oa;r=(n&~(1<<32-Ht(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Vn++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=M0++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},z0={readContext:$t,useCallback:mm,useContext:$t,useEffect:xc,useImperativeHandle:pm,useInsertionEffect:cm,useLayoutEffect:dm,useMemo:hm,useReducer:vl,useRef:om,useState:function(){return vl(Wn)},useDebugValue:gc,useDeferredValue:function(e){var t=Ft();return fm(t,Je.memoizedState,e)},useTransition:function(){var e=vl(Wn)[0],t=Ft().memoizedState;return[e,t]},useMutableSource:tm,useSyncExternalStore:am,useId:xm,unstable_isNewReconciler:!1},B0={readContext:$t,useCallback:mm,useContext:$t,useEffect:xc,useImperativeHandle:pm,useInsertionEffect:cm,useLayoutEffect:dm,useMemo:hm,useReducer:bl,useRef:om,useState:function(){return bl(Wn)},useDebugValue:gc,useDeferredValue:function(e){var t=Ft();return Je===null?t.memoizedState=e:fm(t,Je.memoizedState,e)},useTransition:function(){var e=bl(Wn)[0],t=Ft().memoizedState;return[e,t]},useMutableSource:tm,useSyncExternalStore:am,useId:xm,unstable_isNewReconciler:!1};function Ut(e,t){if(e&&e.defaultProps){t=We({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function uo(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:We({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Li={isMounted:function(e){return(e=e._reactInternals)?mr(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=ht(),s=Ma(e),i=da(n,s);i.payload=t,r!=null&&(i.callback=r),t=Da(e,i,s),t!==null&&(Kt(t,e,s,n),_s(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=ht(),s=Ma(e),i=da(n,s);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Da(e,i,s),t!==null&&(Kt(t,e,s,n),_s(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ht(),n=Ma(e),s=da(r,n);s.tag=2,t!=null&&(s.callback=t),t=Da(e,s,n),t!==null&&(Kt(t,e,n,r),_s(t,e,n))}};function Od(e,t,r,n,s,i,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,l):t.prototype&&t.prototype.isPureReactComponent?!_n(r,n)||!_n(s,i):!0}function bm(e,t,r){var n=!1,s=za,i=t.contextType;return typeof i=="object"&&i!==null?i=$t(i):(s=Nt(t)?nr:pt.current,n=t.contextTypes,i=(n=n!=null)?$r(e,s):za),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Li,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function _d(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Li.enqueueReplaceState(t,t.state,null)}function po(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},cc(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=$t(i):(i=Nt(t)?nr:pt.current,s.context=$r(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(uo(e,t,i,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Li.enqueueReplaceState(s,s.state,null),ci(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Ur(e,t){try{var r="",n=t;do r+=ff(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function jl(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function mo(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var U0=typeof WeakMap=="function"?WeakMap:Map;function jm(e,t,r){r=da(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){hi||(hi=!0,wo=n),mo(e,t)},r}function Nm(e,t,r){r=da(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){mo(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){mo(e,t),typeof n!="function"&&(Ra===null?Ra=new Set([this]):Ra.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),r}function $d(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new U0;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=ax.bind(null,e,t,r),t.then(e,e))}function Fd(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function zd(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=da(-1,1),t.tag=2,Da(r,t,1))),r.lanes|=1),e)}var V0=fa.ReactCurrentOwner,bt=!1;function mt(e,t,r,n){t.child=e===null?Jp(t,null,r,n):zr(t,e.child,r,n)}function Bd(e,t,r,n,s){r=r.render;var i=t.ref;return Rr(t,s),n=hc(e,t,r,n,i,s),r=fc(),e!==null&&!bt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,ha(e,t,s)):($e&&r&&ac(t),t.flags|=1,mt(e,t,n,s),t.child)}function Ud(e,t,r,n,s){if(e===null){var i=r.type;return typeof i=="function"&&!Sc(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,wm(e,t,i,n,s)):(e=Vs(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var l=i.memoizedProps;if(r=r.compare,r=r!==null?r:_n,r(l,n)&&e.ref===t.ref)return ha(e,t,s)}return t.flags|=1,e=Oa(i,n),e.ref=t.ref,e.return=t,t.child=e}function wm(e,t,r,n,s){if(e!==null){var i=e.memoizedProps;if(_n(i,n)&&e.ref===t.ref)if(bt=!1,t.pendingProps=n=i,(e.lanes&s)!==0)e.flags&131072&&(bt=!0);else return t.lanes=e.lanes,ha(e,t,s)}return ho(e,t,r,n,s)}function Cm(e,t,r){var n=t.pendingProps,s=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Re(Ar,Et),Et|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Re(Ar,Et),Et|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,Re(Ar,Et),Et|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,Re(Ar,Et),Et|=n;return mt(e,t,s,r),t.child}function Sm(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function ho(e,t,r,n,s){var i=Nt(r)?nr:pt.current;return i=$r(t,i),Rr(t,s),r=hc(e,t,r,n,i,s),n=fc(),e!==null&&!bt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,ha(e,t,s)):($e&&n&&ac(t),t.flags|=1,mt(e,t,r,s),t.child)}function Vd(e,t,r,n,s){if(Nt(r)){var i=!0;ni(t)}else i=!1;if(Rr(t,s),t.stateNode===null)zs(e,t),bm(t,r,n),po(t,r,n,s),n=!0;else if(e===null){var l=t.stateNode,d=t.memoizedProps;l.props=d;var o=l.context,c=r.contextType;typeof c=="object"&&c!==null?c=$t(c):(c=Nt(r)?nr:pt.current,c=$r(t,c));var u=r.getDerivedStateFromProps,p=typeof u=="function"||typeof l.getSnapshotBeforeUpdate=="function";p||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(d!==n||o!==c)&&_d(t,l,n,c),wa=!1;var m=t.memoizedState;l.state=m,ci(t,n,l,s),o=t.memoizedState,d!==n||m!==o||jt.current||wa?(typeof u=="function"&&(uo(t,r,u,n),o=t.memoizedState),(d=wa||Od(t,r,d,n,m,o,c))?(p||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=o),l.props=n,l.state=o,l.context=c,n=d):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{l=t.stateNode,Xp(e,t),d=t.memoizedProps,c=t.type===t.elementType?d:Ut(t.type,d),l.props=c,p=t.pendingProps,m=l.context,o=r.contextType,typeof o=="object"&&o!==null?o=$t(o):(o=Nt(r)?nr:pt.current,o=$r(t,o));var N=r.getDerivedStateFromProps;(u=typeof N=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(d!==p||m!==o)&&_d(t,l,n,o),wa=!1,m=t.memoizedState,l.state=m,ci(t,n,l,s);var f=t.memoizedState;d!==p||m!==f||jt.current||wa?(typeof N=="function"&&(uo(t,r,N,n),f=t.memoizedState),(c=wa||Od(t,r,c,n,m,f,o)||!1)?(u||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(n,f,o),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(n,f,o)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||d===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=f),l.props=n,l.state=f,l.context=o,n=c):(typeof l.componentDidUpdate!="function"||d===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),n=!1)}return fo(e,t,r,n,i,s)}function fo(e,t,r,n,s,i){Sm(e,t);var l=(t.flags&128)!==0;if(!n&&!l)return s&&Pd(t,r,!1),ha(e,t,i);n=t.stateNode,V0.current=t;var d=l&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&l?(t.child=zr(t,e.child,null,i),t.child=zr(t,null,d,i)):mt(e,t,d,i),t.memoizedState=n.state,s&&Pd(t,r,!0),t.child}function km(e){var t=e.stateNode;t.pendingContext?Ed(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ed(e,t.context,!1),dc(e,t.containerInfo)}function Wd(e,t,r,n,s){return Fr(),nc(s),t.flags|=256,mt(e,t,r,n),t.child}var xo={dehydrated:null,treeContext:null,retryLane:0};function go(e){return{baseLanes:e,cachePool:null,transitions:null}}function Em(e,t,r){var n=t.pendingProps,s=ze.current,i=!1,l=(t.flags&128)!==0,d;if((d=l)||(d=e!==null&&e.memoizedState===null?!1:(s&2)!==0),d?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Re(ze,s&1),e===null)return oo(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=n.children,e=n.fallback,i?(n=t.mode,i=t.child,l={mode:"hidden",children:l},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=Ri(l,n,0,null),e=ar(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=go(r),t.memoizedState=xo,e):yc(t,l));if(s=e.memoizedState,s!==null&&(d=s.dehydrated,d!==null))return W0(e,t,l,n,d,s,r);if(i){i=n.fallback,l=t.mode,s=e.child,d=s.sibling;var o={mode:"hidden",children:n.children};return!(l&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=o,t.deletions=null):(n=Oa(s,o),n.subtreeFlags=s.subtreeFlags&14680064),d!==null?i=Oa(d,i):(i=ar(i,l,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,l=e.child.memoizedState,l=l===null?go(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=e.childLanes&~r,t.memoizedState=xo,n}return i=e.child,e=i.sibling,n=Oa(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function yc(e,t){return t=Ri({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ws(e,t,r,n){return n!==null&&nc(n),zr(t,e.child,null,r),e=yc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function W0(e,t,r,n,s,i,l){if(r)return t.flags&256?(t.flags&=-257,n=jl(Error(J(422))),ws(e,t,l,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,s=t.mode,n=Ri({mode:"visible",children:n.children},s,0,null),i=ar(i,s,l,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&zr(t,e.child,null,l),t.child.memoizedState=go(l),t.memoizedState=xo,i);if(!(t.mode&1))return ws(e,t,l,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var d=n.dgst;return n=d,i=Error(J(419)),n=jl(i,n,void 0),ws(e,t,l,n)}if(d=(l&e.childLanes)!==0,bt||d){if(n=tt,n!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|l)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,ma(e,s),Kt(n,e,s,-1))}return Cc(),n=jl(Error(J(421))),ws(e,t,l,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=rx.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Pt=Ia(s.nextSibling),At=t,$e=!0,Wt=null,e!==null&&(Rt[Mt++]=oa,Rt[Mt++]=ca,Rt[Mt++]=sr,oa=e.id,ca=e.overflow,sr=t),t=yc(t,n.children),t.flags|=4096,t)}function Hd(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),co(e.return,t,r)}function Nl(e,t,r,n,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function Pm(e,t,r){var n=t.pendingProps,s=n.revealOrder,i=n.tail;if(mt(e,t,n.children,r),n=ze.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Hd(e,r,t);else if(e.tag===19)Hd(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Re(ze,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&di(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),Nl(t,!1,s,r,i);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&di(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}Nl(t,!0,r,null,i);break;case"together":Nl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function zs(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ha(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),lr|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(J(153));if(t.child!==null){for(e=t.child,r=Oa(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Oa(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function H0(e,t,r){switch(t.tag){case 3:km(t),Fr();break;case 5:em(t);break;case 1:Nt(t.type)&&ni(t);break;case 4:dc(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;Re(li,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Re(ze,ze.current&1),t.flags|=128,null):r&t.child.childLanes?Em(e,t,r):(Re(ze,ze.current&1),e=ha(e,t,r),e!==null?e.sibling:null);Re(ze,ze.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return Pm(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Re(ze,ze.current),n)break;return null;case 22:case 23:return t.lanes=0,Cm(e,t,r)}return ha(e,t,r)}var Am,yo,Tm,Lm;Am=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};yo=function(){};Tm=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,Ja(ta.current);var i=null;switch(r){case"input":s=Fl(e,s),n=Fl(e,n),i=[];break;case"select":s=We({},s,{value:void 0}),n=We({},n,{value:void 0}),i=[];break;case"textarea":s=Ul(e,s),n=Ul(e,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=ai)}Wl(r,n);var l;r=null;for(c in s)if(!n.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var d=s[c];for(l in d)d.hasOwnProperty(l)&&(r||(r={}),r[l]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Tn.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in n){var o=n[c];if(d=s!=null?s[c]:void 0,n.hasOwnProperty(c)&&o!==d&&(o!=null||d!=null))if(c==="style")if(d){for(l in d)!d.hasOwnProperty(l)||o&&o.hasOwnProperty(l)||(r||(r={}),r[l]="");for(l in o)o.hasOwnProperty(l)&&d[l]!==o[l]&&(r||(r={}),r[l]=o[l])}else r||(i||(i=[]),i.push(c,r)),r=o;else c==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,d=d?d.__html:void 0,o!=null&&d!==o&&(i=i||[]).push(c,o)):c==="children"?typeof o!="string"&&typeof o!="number"||(i=i||[]).push(c,""+o):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Tn.hasOwnProperty(c)?(o!=null&&c==="onScroll"&&Oe("scroll",e),i||d===o||(i=[])):(i=i||[]).push(c,o))}r&&(i=i||[]).push("style",r);var c=i;(t.updateQueue=c)&&(t.flags|=4)}};Lm=function(e,t,r,n){r!==n&&(t.flags|=4)};function dn(e,t){if(!$e)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function ct(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function K0(e,t,r){var n=t.pendingProps;switch(rc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ct(t),null;case 1:return Nt(t.type)&&ri(),ct(t),null;case 3:return n=t.stateNode,Br(),_e(jt),_e(pt),pc(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(js(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Wt!==null&&(ko(Wt),Wt=null))),yo(e,t),ct(t),null;case 5:uc(t);var s=Ja(Un.current);if(r=t.type,e!==null&&t.stateNode!=null)Tm(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(J(166));return ct(t),null}if(e=Ja(ta.current),js(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[Zt]=t,n[zn]=i,e=(t.mode&1)!==0,r){case"dialog":Oe("cancel",n),Oe("close",n);break;case"iframe":case"object":case"embed":Oe("load",n);break;case"video":case"audio":for(s=0;s<gn.length;s++)Oe(gn[s],n);break;case"source":Oe("error",n);break;case"img":case"image":case"link":Oe("error",n),Oe("load",n);break;case"details":Oe("toggle",n);break;case"input":ed(n,i),Oe("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Oe("invalid",n);break;case"textarea":ad(n,i),Oe("invalid",n)}Wl(r,i),s=null;for(var l in i)if(i.hasOwnProperty(l)){var d=i[l];l==="children"?typeof d=="string"?n.textContent!==d&&(i.suppressHydrationWarning!==!0&&bs(n.textContent,d,e),s=["children",d]):typeof d=="number"&&n.textContent!==""+d&&(i.suppressHydrationWarning!==!0&&bs(n.textContent,d,e),s=["children",""+d]):Tn.hasOwnProperty(l)&&d!=null&&l==="onScroll"&&Oe("scroll",n)}switch(r){case"input":ps(n),td(n,i,!0);break;case"textarea":ps(n),rd(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=ai)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=sp(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=l.createElement(r,{is:n.is}):(e=l.createElement(r),r==="select"&&(l=e,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):e=l.createElementNS(e,r),e[Zt]=t,e[zn]=n,Am(e,t,!1,!1),t.stateNode=e;e:{switch(l=Hl(r,n),r){case"dialog":Oe("cancel",e),Oe("close",e),s=n;break;case"iframe":case"object":case"embed":Oe("load",e),s=n;break;case"video":case"audio":for(s=0;s<gn.length;s++)Oe(gn[s],e);s=n;break;case"source":Oe("error",e),s=n;break;case"img":case"image":case"link":Oe("error",e),Oe("load",e),s=n;break;case"details":Oe("toggle",e),s=n;break;case"input":ed(e,n),s=Fl(e,n),Oe("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=We({},n,{value:void 0}),Oe("invalid",e);break;case"textarea":ad(e,n),s=Ul(e,n),Oe("invalid",e);break;default:s=n}Wl(r,s),d=s;for(i in d)if(d.hasOwnProperty(i)){var o=d[i];i==="style"?op(e,o):i==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,o!=null&&ip(e,o)):i==="children"?typeof o=="string"?(r!=="textarea"||o!=="")&&Ln(e,o):typeof o=="number"&&Ln(e,""+o):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Tn.hasOwnProperty(i)?o!=null&&i==="onScroll"&&Oe("scroll",e):o!=null&&Uo(e,i,o,l))}switch(r){case"input":ps(e),td(e,n,!1);break;case"textarea":ps(e),rd(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Fa(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?Tr(e,!!n.multiple,i,!1):n.defaultValue!=null&&Tr(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=ai)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ct(t),null;case 6:if(e&&t.stateNode!=null)Lm(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(J(166));if(r=Ja(Un.current),Ja(ta.current),js(t)){if(n=t.stateNode,r=t.memoizedProps,n[Zt]=t,(i=n.nodeValue!==r)&&(e=At,e!==null))switch(e.tag){case 3:bs(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&bs(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Zt]=t,t.stateNode=n}return ct(t),null;case 13:if(_e(ze),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if($e&&Pt!==null&&t.mode&1&&!(t.flags&128))Qp(),Fr(),t.flags|=98560,i=!1;else if(i=js(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(J(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(J(317));i[Zt]=t}else Fr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ct(t),i=!1}else Wt!==null&&(ko(Wt),Wt=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||ze.current&1?Xe===0&&(Xe=3):Cc())),t.updateQueue!==null&&(t.flags|=4),ct(t),null);case 4:return Br(),yo(e,t),e===null&&$n(t.stateNode.containerInfo),ct(t),null;case 10:return lc(t.type._context),ct(t),null;case 17:return Nt(t.type)&&ri(),ct(t),null;case 19:if(_e(ze),i=t.memoizedState,i===null)return ct(t),null;if(n=(t.flags&128)!==0,l=i.rendering,l===null)if(n)dn(i,!1);else{if(Xe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=di(e),l!==null){for(t.flags|=128,dn(i,!1),n=l.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Re(ze,ze.current&1|2),t.child}e=e.sibling}i.tail!==null&&qe()>Vr&&(t.flags|=128,n=!0,dn(i,!1),t.lanes=4194304)}else{if(!n)if(e=di(l),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),dn(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!$e)return ct(t),null}else 2*qe()-i.renderingStartTime>Vr&&r!==1073741824&&(t.flags|=128,n=!0,dn(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(r=i.last,r!==null?r.sibling=l:t.child=l,i.last=l)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=qe(),t.sibling=null,r=ze.current,Re(ze,n?r&1|2:r&1),t):(ct(t),null);case 22:case 23:return wc(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Et&1073741824&&(ct(t),t.subtreeFlags&6&&(t.flags|=8192)):ct(t),null;case 24:return null;case 25:return null}throw Error(J(156,t.tag))}function G0(e,t){switch(rc(t),t.tag){case 1:return Nt(t.type)&&ri(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Br(),_e(jt),_e(pt),pc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return uc(t),null;case 13:if(_e(ze),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(J(340));Fr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return _e(ze),null;case 4:return Br(),null;case 10:return lc(t.type._context),null;case 22:case 23:return wc(),null;case 24:return null;default:return null}}var Cs=!1,dt=!1,q0=typeof WeakSet=="function"?WeakSet:Set,ce=null;function Pr(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Ke(e,t,n)}else r.current=null}function vo(e,t,r){try{r()}catch(n){Ke(e,t,n)}}var Kd=!1;function Q0(e,t){if(to=Xs,e=Op(),tc(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var l=0,d=-1,o=-1,c=0,u=0,p=e,m=null;t:for(;;){for(var N;p!==r||s!==0&&p.nodeType!==3||(d=l+s),p!==i||n!==0&&p.nodeType!==3||(o=l+n),p.nodeType===3&&(l+=p.nodeValue.length),(N=p.firstChild)!==null;)m=p,p=N;for(;;){if(p===e)break t;if(m===r&&++c===s&&(d=l),m===i&&++u===n&&(o=l),(N=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=N}r=d===-1||o===-1?null:{start:d,end:o}}else r=null}r=r||{start:0,end:0}}else r=null;for(ao={focusedElem:e,selectionRange:r},Xs=!1,ce=t;ce!==null;)if(t=ce,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ce=e;else for(;ce!==null;){t=ce;try{var f=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(f!==null){var h=f.memoizedProps,j=f.memoizedState,x=t.stateNode,g=x.getSnapshotBeforeUpdate(t.elementType===t.type?h:Ut(t.type,h),j);x.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(J(163))}}catch(E){Ke(t,t.return,E)}if(e=t.sibling,e!==null){e.return=t.return,ce=e;break}ce=t.return}return f=Kd,Kd=!1,f}function kn(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&vo(t,r,i)}s=s.next}while(s!==n)}}function Ii(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function bo(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Im(e){var t=e.alternate;t!==null&&(e.alternate=null,Im(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Zt],delete t[zn],delete t[so],delete t[L0],delete t[I0])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Dm(e){return e.tag===5||e.tag===3||e.tag===4}function Gd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Dm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function jo(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=ai));else if(n!==4&&(e=e.child,e!==null))for(jo(e,t,r),e=e.sibling;e!==null;)jo(e,t,r),e=e.sibling}function No(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(No(e,t,r),e=e.sibling;e!==null;)No(e,t,r),e=e.sibling}var rt=null,Vt=!1;function ja(e,t,r){for(r=r.child;r!==null;)Rm(e,t,r),r=r.sibling}function Rm(e,t,r){if(ea&&typeof ea.onCommitFiberUnmount=="function")try{ea.onCommitFiberUnmount(Ci,r)}catch{}switch(r.tag){case 5:dt||Pr(r,t);case 6:var n=rt,s=Vt;rt=null,ja(e,t,r),rt=n,Vt=s,rt!==null&&(Vt?(e=rt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):rt.removeChild(r.stateNode));break;case 18:rt!==null&&(Vt?(e=rt,r=r.stateNode,e.nodeType===8?fl(e.parentNode,r):e.nodeType===1&&fl(e,r),Mn(e)):fl(rt,r.stateNode));break;case 4:n=rt,s=Vt,rt=r.stateNode.containerInfo,Vt=!0,ja(e,t,r),rt=n,Vt=s;break;case 0:case 11:case 14:case 15:if(!dt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&vo(r,t,l),s=s.next}while(s!==n)}ja(e,t,r);break;case 1:if(!dt&&(Pr(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(d){Ke(r,t,d)}ja(e,t,r);break;case 21:ja(e,t,r);break;case 22:r.mode&1?(dt=(n=dt)||r.memoizedState!==null,ja(e,t,r),dt=n):ja(e,t,r);break;default:ja(e,t,r)}}function qd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new q0),t.forEach(function(n){var s=nx.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Bt(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=e,l=t,d=l;e:for(;d!==null;){switch(d.tag){case 5:rt=d.stateNode,Vt=!1;break e;case 3:rt=d.stateNode.containerInfo,Vt=!0;break e;case 4:rt=d.stateNode.containerInfo,Vt=!0;break e}d=d.return}if(rt===null)throw Error(J(160));Rm(i,l,s),rt=null,Vt=!1;var o=s.alternate;o!==null&&(o.return=null),s.return=null}catch(c){Ke(s,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Mm(t,e),t=t.sibling}function Mm(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Bt(t,e),Qt(e),n&4){try{kn(3,e,e.return),Ii(3,e)}catch(h){Ke(e,e.return,h)}try{kn(5,e,e.return)}catch(h){Ke(e,e.return,h)}}break;case 1:Bt(t,e),Qt(e),n&512&&r!==null&&Pr(r,r.return);break;case 5:if(Bt(t,e),Qt(e),n&512&&r!==null&&Pr(r,r.return),e.flags&32){var s=e.stateNode;try{Ln(s,"")}catch(h){Ke(e,e.return,h)}}if(n&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,l=r!==null?r.memoizedProps:i,d=e.type,o=e.updateQueue;if(e.updateQueue=null,o!==null)try{d==="input"&&i.type==="radio"&&i.name!=null&&rp(s,i),Hl(d,l);var c=Hl(d,i);for(l=0;l<o.length;l+=2){var u=o[l],p=o[l+1];u==="style"?op(s,p):u==="dangerouslySetInnerHTML"?ip(s,p):u==="children"?Ln(s,p):Uo(s,u,p,c)}switch(d){case"input":zl(s,i);break;case"textarea":np(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var N=i.value;N!=null?Tr(s,!!i.multiple,N,!1):m!==!!i.multiple&&(i.defaultValue!=null?Tr(s,!!i.multiple,i.defaultValue,!0):Tr(s,!!i.multiple,i.multiple?[]:"",!1))}s[zn]=i}catch(h){Ke(e,e.return,h)}}break;case 6:if(Bt(t,e),Qt(e),n&4){if(e.stateNode===null)throw Error(J(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(h){Ke(e,e.return,h)}}break;case 3:if(Bt(t,e),Qt(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Mn(t.containerInfo)}catch(h){Ke(e,e.return,h)}break;case 4:Bt(t,e),Qt(e);break;case 13:Bt(t,e),Qt(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(jc=qe())),n&4&&qd(e);break;case 22:if(u=r!==null&&r.memoizedState!==null,e.mode&1?(dt=(c=dt)||u,Bt(t,e),dt=c):Bt(t,e),Qt(e),n&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!u&&e.mode&1)for(ce=e,u=e.child;u!==null;){for(p=ce=u;ce!==null;){switch(m=ce,N=m.child,m.tag){case 0:case 11:case 14:case 15:kn(4,m,m.return);break;case 1:Pr(m,m.return);var f=m.stateNode;if(typeof f.componentWillUnmount=="function"){n=m,r=m.return;try{t=n,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(h){Ke(n,r,h)}}break;case 5:Pr(m,m.return);break;case 22:if(m.memoizedState!==null){Yd(p);continue}}N!==null?(N.return=m,ce=N):Yd(p)}u=u.sibling}e:for(u=null,p=e;;){if(p.tag===5){if(u===null){u=p;try{s=p.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(d=p.stateNode,o=p.memoizedProps.style,l=o!=null&&o.hasOwnProperty("display")?o.display:null,d.style.display=lp("display",l))}catch(h){Ke(e,e.return,h)}}}else if(p.tag===6){if(u===null)try{p.stateNode.nodeValue=c?"":p.memoizedProps}catch(h){Ke(e,e.return,h)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===e)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;p.sibling===null;){if(p.return===null||p.return===e)break e;u===p&&(u=null),p=p.return}u===p&&(u=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Bt(t,e),Qt(e),n&4&&qd(e);break;case 21:break;default:Bt(t,e),Qt(e)}}function Qt(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Dm(r)){var n=r;break e}r=r.return}throw Error(J(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Ln(s,""),n.flags&=-33);var i=Gd(e);No(e,i,s);break;case 3:case 4:var l=n.stateNode.containerInfo,d=Gd(e);jo(e,d,l);break;default:throw Error(J(161))}}catch(o){Ke(e,e.return,o)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Y0(e,t,r){ce=e,Om(e)}function Om(e,t,r){for(var n=(e.mode&1)!==0;ce!==null;){var s=ce,i=s.child;if(s.tag===22&&n){var l=s.memoizedState!==null||Cs;if(!l){var d=s.alternate,o=d!==null&&d.memoizedState!==null||dt;d=Cs;var c=dt;if(Cs=l,(dt=o)&&!c)for(ce=s;ce!==null;)l=ce,o=l.child,l.tag===22&&l.memoizedState!==null?Jd(s):o!==null?(o.return=l,ce=o):Jd(s);for(;i!==null;)ce=i,Om(i),i=i.sibling;ce=s,Cs=d,dt=c}Qd(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ce=i):Qd(e)}}function Qd(e){for(;ce!==null;){var t=ce;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:dt||Ii(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!dt)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:Ut(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Dd(t,i,n);break;case 3:var l=t.updateQueue;if(l!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Dd(t,l,r)}break;case 5:var d=t.stateNode;if(r===null&&t.flags&4){r=d;var o=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":o.autoFocus&&r.focus();break;case"img":o.src&&(r.src=o.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var p=u.dehydrated;p!==null&&Mn(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(J(163))}dt||t.flags&512&&bo(t)}catch(m){Ke(t,t.return,m)}}if(t===e){ce=null;break}if(r=t.sibling,r!==null){r.return=t.return,ce=r;break}ce=t.return}}function Yd(e){for(;ce!==null;){var t=ce;if(t===e){ce=null;break}var r=t.sibling;if(r!==null){r.return=t.return,ce=r;break}ce=t.return}}function Jd(e){for(;ce!==null;){var t=ce;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Ii(4,t)}catch(o){Ke(t,r,o)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(o){Ke(t,s,o)}}var i=t.return;try{bo(t)}catch(o){Ke(t,i,o)}break;case 5:var l=t.return;try{bo(t)}catch(o){Ke(t,l,o)}}}catch(o){Ke(t,t.return,o)}if(t===e){ce=null;break}var d=t.sibling;if(d!==null){d.return=t.return,ce=d;break}ce=t.return}}var J0=Math.ceil,mi=fa.ReactCurrentDispatcher,vc=fa.ReactCurrentOwner,_t=fa.ReactCurrentBatchConfig,ke=0,tt=null,Ye=null,st=0,Et=0,Ar=Ua(0),Xe=0,Kn=null,lr=0,Di=0,bc=0,En=null,vt=null,jc=0,Vr=1/0,sa=null,hi=!1,wo=null,Ra=null,Ss=!1,Ea=null,fi=0,Pn=0,Co=null,Bs=-1,Us=0;function ht(){return ke&6?qe():Bs!==-1?Bs:Bs=qe()}function Ma(e){return e.mode&1?ke&2&&st!==0?st&-st:R0.transition!==null?(Us===0&&(Us=bp()),Us):(e=Te,e!==0||(e=window.event,e=e===void 0?16:Ep(e.type)),e):1}function Kt(e,t,r,n){if(50<Pn)throw Pn=0,Co=null,Error(J(185));Jn(e,r,n),(!(ke&2)||e!==tt)&&(e===tt&&(!(ke&2)&&(Di|=r),Xe===4&&Sa(e,st)),wt(e,n),r===1&&ke===0&&!(t.mode&1)&&(Vr=qe()+500,Ai&&Va()))}function wt(e,t){var r=e.callbackNode;Rf(e,t);var n=Zs(e,e===tt?st:0);if(n===0)r!==null&&id(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&id(r),t===1)e.tag===0?D0(Zd.bind(null,e)):Kp(Zd.bind(null,e)),A0(function(){!(ke&6)&&Va()}),r=null;else{switch(jp(n)){case 1:r=Go;break;case 4:r=yp;break;case 16:r=Js;break;case 536870912:r=vp;break;default:r=Js}r=Wm(r,_m.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function _m(e,t){if(Bs=-1,Us=0,ke&6)throw Error(J(327));var r=e.callbackNode;if(Mr()&&e.callbackNode!==r)return null;var n=Zs(e,e===tt?st:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=xi(e,n);else{t=n;var s=ke;ke|=2;var i=Fm();(tt!==e||st!==t)&&(sa=null,Vr=qe()+500,tr(e,t));do try{ex();break}catch(d){$m(e,d)}while(!0);ic(),mi.current=i,ke=s,Ye!==null?t=0:(tt=null,st=0,t=Xe)}if(t!==0){if(t===2&&(s=Yl(e),s!==0&&(n=s,t=So(e,s))),t===1)throw r=Kn,tr(e,0),Sa(e,n),wt(e,qe()),r;if(t===6)Sa(e,n);else{if(s=e.current.alternate,!(n&30)&&!Z0(s)&&(t=xi(e,n),t===2&&(i=Yl(e),i!==0&&(n=i,t=So(e,i))),t===1))throw r=Kn,tr(e,0),Sa(e,n),wt(e,qe()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(J(345));case 2:Ga(e,vt,sa);break;case 3:if(Sa(e,n),(n&130023424)===n&&(t=jc+500-qe(),10<t)){if(Zs(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){ht(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=no(Ga.bind(null,e,vt,sa),t);break}Ga(e,vt,sa);break;case 4:if(Sa(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var l=31-Ht(n);i=1<<l,l=t[l],l>s&&(s=l),n&=~i}if(n=s,n=qe()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*J0(n/1960))-n,10<n){e.timeoutHandle=no(Ga.bind(null,e,vt,sa),n);break}Ga(e,vt,sa);break;case 5:Ga(e,vt,sa);break;default:throw Error(J(329))}}}return wt(e,qe()),e.callbackNode===r?_m.bind(null,e):null}function So(e,t){var r=En;return e.current.memoizedState.isDehydrated&&(tr(e,t).flags|=256),e=xi(e,t),e!==2&&(t=vt,vt=r,t!==null&&ko(t)),e}function ko(e){vt===null?vt=e:vt.push.apply(vt,e)}function Z0(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!Gt(i(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Sa(e,t){for(t&=~bc,t&=~Di,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Ht(t),n=1<<r;e[r]=-1,t&=~n}}function Zd(e){if(ke&6)throw Error(J(327));Mr();var t=Zs(e,0);if(!(t&1))return wt(e,qe()),null;var r=xi(e,t);if(e.tag!==0&&r===2){var n=Yl(e);n!==0&&(t=n,r=So(e,n))}if(r===1)throw r=Kn,tr(e,0),Sa(e,t),wt(e,qe()),r;if(r===6)throw Error(J(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ga(e,vt,sa),wt(e,qe()),null}function Nc(e,t){var r=ke;ke|=1;try{return e(t)}finally{ke=r,ke===0&&(Vr=qe()+500,Ai&&Va())}}function or(e){Ea!==null&&Ea.tag===0&&!(ke&6)&&Mr();var t=ke;ke|=1;var r=_t.transition,n=Te;try{if(_t.transition=null,Te=1,e)return e()}finally{Te=n,_t.transition=r,ke=t,!(ke&6)&&Va()}}function wc(){Et=Ar.current,_e(Ar)}function tr(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,P0(r)),Ye!==null)for(r=Ye.return;r!==null;){var n=r;switch(rc(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&ri();break;case 3:Br(),_e(jt),_e(pt),pc();break;case 5:uc(n);break;case 4:Br();break;case 13:_e(ze);break;case 19:_e(ze);break;case 10:lc(n.type._context);break;case 22:case 23:wc()}r=r.return}if(tt=e,Ye=e=Oa(e.current,null),st=Et=t,Xe=0,Kn=null,bc=Di=lr=0,vt=En=null,Ya!==null){for(t=0;t<Ya.length;t++)if(r=Ya[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var l=i.next;i.next=s,n.next=l}r.pending=n}Ya=null}return e}function $m(e,t){do{var r=Ye;try{if(ic(),$s.current=pi,ui){for(var n=Ue.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}ui=!1}if(ir=0,et=Je=Ue=null,Sn=!1,Vn=0,vc.current=null,r===null||r.return===null){Xe=1,Kn=t,Ye=null;break}e:{var i=e,l=r.return,d=r,o=t;if(t=st,d.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){var c=o,u=d,p=u.tag;if(!(u.mode&1)&&(p===0||p===11||p===15)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var N=Fd(l);if(N!==null){N.flags&=-257,zd(N,l,d,i,t),N.mode&1&&$d(i,c,t),t=N,o=c;var f=t.updateQueue;if(f===null){var h=new Set;h.add(o),t.updateQueue=h}else f.add(o);break e}else{if(!(t&1)){$d(i,c,t),Cc();break e}o=Error(J(426))}}else if($e&&d.mode&1){var j=Fd(l);if(j!==null){!(j.flags&65536)&&(j.flags|=256),zd(j,l,d,i,t),nc(Ur(o,d));break e}}i=o=Ur(o,d),Xe!==4&&(Xe=2),En===null?En=[i]:En.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var x=jm(i,o,t);Id(i,x);break e;case 1:d=o;var g=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Ra===null||!Ra.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t;var E=Nm(i,d,t);Id(i,E);break e}}i=i.return}while(i!==null)}Bm(r)}catch(y){t=y,Ye===r&&r!==null&&(Ye=r=r.return);continue}break}while(!0)}function Fm(){var e=mi.current;return mi.current=pi,e===null?pi:e}function Cc(){(Xe===0||Xe===3||Xe===2)&&(Xe=4),tt===null||!(lr&268435455)&&!(Di&268435455)||Sa(tt,st)}function xi(e,t){var r=ke;ke|=2;var n=Fm();(tt!==e||st!==t)&&(sa=null,tr(e,t));do try{X0();break}catch(s){$m(e,s)}while(!0);if(ic(),ke=r,mi.current=n,Ye!==null)throw Error(J(261));return tt=null,st=0,Xe}function X0(){for(;Ye!==null;)zm(Ye)}function ex(){for(;Ye!==null&&!Sf();)zm(Ye)}function zm(e){var t=Vm(e.alternate,e,Et);e.memoizedProps=e.pendingProps,t===null?Bm(e):Ye=t,vc.current=null}function Bm(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=G0(r,t),r!==null){r.flags&=32767,Ye=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Xe=6,Ye=null;return}}else if(r=K0(r,t,Et),r!==null){Ye=r;return}if(t=t.sibling,t!==null){Ye=t;return}Ye=t=e}while(t!==null);Xe===0&&(Xe=5)}function Ga(e,t,r){var n=Te,s=_t.transition;try{_t.transition=null,Te=1,tx(e,t,r,n)}finally{_t.transition=s,Te=n}return null}function tx(e,t,r,n){do Mr();while(Ea!==null);if(ke&6)throw Error(J(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(J(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(Mf(e,i),e===tt&&(Ye=tt=null,st=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Ss||(Ss=!0,Wm(Js,function(){return Mr(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=_t.transition,_t.transition=null;var l=Te;Te=1;var d=ke;ke|=4,vc.current=null,Q0(e,r),Mm(r,e),j0(ao),Xs=!!to,ao=to=null,e.current=r,Y0(r),kf(),ke=d,Te=l,_t.transition=i}else e.current=r;if(Ss&&(Ss=!1,Ea=e,fi=s),i=e.pendingLanes,i===0&&(Ra=null),Af(r.stateNode),wt(e,qe()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(hi)throw hi=!1,e=wo,wo=null,e;return fi&1&&e.tag!==0&&Mr(),i=e.pendingLanes,i&1?e===Co?Pn++:(Pn=0,Co=e):Pn=0,Va(),null}function Mr(){if(Ea!==null){var e=jp(fi),t=_t.transition,r=Te;try{if(_t.transition=null,Te=16>e?16:e,Ea===null)var n=!1;else{if(e=Ea,Ea=null,fi=0,ke&6)throw Error(J(331));var s=ke;for(ke|=4,ce=e.current;ce!==null;){var i=ce,l=i.child;if(ce.flags&16){var d=i.deletions;if(d!==null){for(var o=0;o<d.length;o++){var c=d[o];for(ce=c;ce!==null;){var u=ce;switch(u.tag){case 0:case 11:case 15:kn(8,u,i)}var p=u.child;if(p!==null)p.return=u,ce=p;else for(;ce!==null;){u=ce;var m=u.sibling,N=u.return;if(Im(u),u===c){ce=null;break}if(m!==null){m.return=N,ce=m;break}ce=N}}}var f=i.alternate;if(f!==null){var h=f.child;if(h!==null){f.child=null;do{var j=h.sibling;h.sibling=null,h=j}while(h!==null)}}ce=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,ce=l;else e:for(;ce!==null;){if(i=ce,i.flags&2048)switch(i.tag){case 0:case 11:case 15:kn(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,ce=x;break e}ce=i.return}}var g=e.current;for(ce=g;ce!==null;){l=ce;var b=l.child;if(l.subtreeFlags&2064&&b!==null)b.return=l,ce=b;else e:for(l=g;ce!==null;){if(d=ce,d.flags&2048)try{switch(d.tag){case 0:case 11:case 15:Ii(9,d)}}catch(y){Ke(d,d.return,y)}if(d===l){ce=null;break e}var E=d.sibling;if(E!==null){E.return=d.return,ce=E;break e}ce=d.return}}if(ke=s,Va(),ea&&typeof ea.onPostCommitFiberRoot=="function")try{ea.onPostCommitFiberRoot(Ci,e)}catch{}n=!0}return n}finally{Te=r,_t.transition=t}}return!1}function Xd(e,t,r){t=Ur(r,t),t=jm(e,t,1),e=Da(e,t,1),t=ht(),e!==null&&(Jn(e,1,t),wt(e,t))}function Ke(e,t,r){if(e.tag===3)Xd(e,e,r);else for(;t!==null;){if(t.tag===3){Xd(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ra===null||!Ra.has(n))){e=Ur(r,e),e=Nm(t,e,1),t=Da(t,e,1),e=ht(),t!==null&&(Jn(t,1,e),wt(t,e));break}}t=t.return}}function ax(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=ht(),e.pingedLanes|=e.suspendedLanes&r,tt===e&&(st&r)===r&&(Xe===4||Xe===3&&(st&130023424)===st&&500>qe()-jc?tr(e,0):bc|=r),wt(e,t)}function Um(e,t){t===0&&(e.mode&1?(t=fs,fs<<=1,!(fs&130023424)&&(fs=4194304)):t=1);var r=ht();e=ma(e,t),e!==null&&(Jn(e,t,r),wt(e,r))}function rx(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Um(e,r)}function nx(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(J(314))}n!==null&&n.delete(t),Um(e,r)}var Vm;Vm=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||jt.current)bt=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return bt=!1,H0(e,t,r);bt=!!(e.flags&131072)}else bt=!1,$e&&t.flags&1048576&&Gp(t,ii,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;zs(e,t),e=t.pendingProps;var s=$r(t,pt.current);Rr(t,r),s=hc(null,t,n,e,s,r);var i=fc();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Nt(n)?(i=!0,ni(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,cc(t),s.updater=Li,t.stateNode=s,s._reactInternals=t,po(t,n,e,r),t=fo(null,t,n,!0,i,r)):(t.tag=0,$e&&i&&ac(t),mt(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(zs(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=ix(n),e=Ut(n,e),s){case 0:t=ho(null,t,n,e,r);break e;case 1:t=Vd(null,t,n,e,r);break e;case 11:t=Bd(null,t,n,e,r);break e;case 14:t=Ud(null,t,n,Ut(n.type,e),r);break e}throw Error(J(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Ut(n,s),ho(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Ut(n,s),Vd(e,t,n,s,r);case 3:e:{if(km(t),e===null)throw Error(J(387));n=t.pendingProps,i=t.memoizedState,s=i.element,Xp(e,t),ci(t,n,null,r);var l=t.memoizedState;if(n=l.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Ur(Error(J(423)),t),t=Wd(e,t,n,r,s);break e}else if(n!==s){s=Ur(Error(J(424)),t),t=Wd(e,t,n,r,s);break e}else for(Pt=Ia(t.stateNode.containerInfo.firstChild),At=t,$e=!0,Wt=null,r=Jp(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Fr(),n===s){t=ha(e,t,r);break e}mt(e,t,n,r)}t=t.child}return t;case 5:return em(t),e===null&&oo(t),n=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,l=s.children,ro(n,s)?l=null:i!==null&&ro(n,i)&&(t.flags|=32),Sm(e,t),mt(e,t,l,r),t.child;case 6:return e===null&&oo(t),null;case 13:return Em(e,t,r);case 4:return dc(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=zr(t,null,n,r):mt(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Ut(n,s),Bd(e,t,n,s,r);case 7:return mt(e,t,t.pendingProps,r),t.child;case 8:return mt(e,t,t.pendingProps.children,r),t.child;case 12:return mt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,i=t.memoizedProps,l=s.value,Re(li,n._currentValue),n._currentValue=l,i!==null)if(Gt(i.value,l)){if(i.children===s.children&&!jt.current){t=ha(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var d=i.dependencies;if(d!==null){l=i.child;for(var o=d.firstContext;o!==null;){if(o.context===n){if(i.tag===1){o=da(-1,r&-r),o.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?o.next=o:(o.next=u.next,u.next=o),c.pending=o}}i.lanes|=r,o=i.alternate,o!==null&&(o.lanes|=r),co(i.return,r,t),d.lanes|=r;break}o=o.next}}else if(i.tag===10)l=i.type===t.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(J(341));l.lanes|=r,d=l.alternate,d!==null&&(d.lanes|=r),co(l,r,t),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===t){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}mt(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,Rr(t,r),s=$t(s),n=n(s),t.flags|=1,mt(e,t,n,r),t.child;case 14:return n=t.type,s=Ut(n,t.pendingProps),s=Ut(n.type,s),Ud(e,t,n,s,r);case 15:return wm(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Ut(n,s),zs(e,t),t.tag=1,Nt(n)?(e=!0,ni(t)):e=!1,Rr(t,r),bm(t,n,s),po(t,n,s,r),fo(null,t,n,!0,e,r);case 19:return Pm(e,t,r);case 22:return Cm(e,t,r)}throw Error(J(156,t.tag))};function Wm(e,t){return gp(e,t)}function sx(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ot(e,t,r,n){return new sx(e,t,r,n)}function Sc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ix(e){if(typeof e=="function")return Sc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Wo)return 11;if(e===Ho)return 14}return 2}function Oa(e,t){var r=e.alternate;return r===null?(r=Ot(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Vs(e,t,r,n,s,i){var l=2;if(n=e,typeof e=="function")Sc(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case vr:return ar(r.children,s,i,t);case Vo:l=8,s|=8;break;case Ml:return e=Ot(12,r,t,s|2),e.elementType=Ml,e.lanes=i,e;case Ol:return e=Ot(13,r,t,s),e.elementType=Ol,e.lanes=i,e;case _l:return e=Ot(19,r,t,s),e.elementType=_l,e.lanes=i,e;case ep:return Ri(r,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Zu:l=10;break e;case Xu:l=9;break e;case Wo:l=11;break e;case Ho:l=14;break e;case Na:l=16,n=null;break e}throw Error(J(130,e==null?e:typeof e,""))}return t=Ot(l,r,t,s),t.elementType=e,t.type=n,t.lanes=i,t}function ar(e,t,r,n){return e=Ot(7,e,n,t),e.lanes=r,e}function Ri(e,t,r,n){return e=Ot(22,e,n,t),e.elementType=ep,e.lanes=r,e.stateNode={isHidden:!1},e}function wl(e,t,r){return e=Ot(6,e,null,t),e.lanes=r,e}function Cl(e,t,r){return t=Ot(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function lx(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nl(0),this.expirationTimes=nl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nl(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function kc(e,t,r,n,s,i,l,d,o){return e=new lx(e,t,r,d,o),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Ot(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},cc(i),e}function ox(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:yr,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function Hm(e){if(!e)return za;e=e._reactInternals;e:{if(mr(e)!==e||e.tag!==1)throw Error(J(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Nt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(J(171))}if(e.tag===1){var r=e.type;if(Nt(r))return Hp(e,r,t)}return t}function Km(e,t,r,n,s,i,l,d,o){return e=kc(r,n,!0,e,s,i,l,d,o),e.context=Hm(null),r=e.current,n=ht(),s=Ma(r),i=da(n,s),i.callback=t??null,Da(r,i,s),e.current.lanes=s,Jn(e,s,n),wt(e,n),e}function Mi(e,t,r,n){var s=t.current,i=ht(),l=Ma(s);return r=Hm(r),t.context===null?t.context=r:t.pendingContext=r,t=da(i,l),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Da(s,t,l),e!==null&&(Kt(e,s,l,i),_s(e,s,l)),l}function gi(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function eu(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Ec(e,t){eu(e,t),(e=e.alternate)&&eu(e,t)}function cx(){return null}var Gm=typeof reportError=="function"?reportError:function(e){console.error(e)};function Pc(e){this._internalRoot=e}Oi.prototype.render=Pc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(J(409));Mi(e,t,null,null)};Oi.prototype.unmount=Pc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;or(function(){Mi(null,e,null,null)}),t[pa]=null}};function Oi(e){this._internalRoot=e}Oi.prototype.unstable_scheduleHydration=function(e){if(e){var t=Cp();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Ca.length&&t!==0&&t<Ca[r].priority;r++);Ca.splice(r,0,e),r===0&&kp(e)}};function Ac(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function _i(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function tu(){}function dx(e,t,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var c=gi(l);i.call(c)}}var l=Km(t,n,e,0,null,!1,!1,"",tu);return e._reactRootContainer=l,e[pa]=l.current,$n(e.nodeType===8?e.parentNode:e),or(),l}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var d=n;n=function(){var c=gi(o);d.call(c)}}var o=kc(e,0,!1,null,null,!1,!1,"",tu);return e._reactRootContainer=o,e[pa]=o.current,$n(e.nodeType===8?e.parentNode:e),or(function(){Mi(t,o,r,n)}),o}function $i(e,t,r,n,s){var i=r._reactRootContainer;if(i){var l=i;if(typeof s=="function"){var d=s;s=function(){var o=gi(l);d.call(o)}}Mi(t,l,e,s)}else l=dx(r,t,e,s,n);return gi(l)}Np=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=xn(t.pendingLanes);r!==0&&(qo(t,r|1),wt(t,qe()),!(ke&6)&&(Vr=qe()+500,Va()))}break;case 13:or(function(){var n=ma(e,1);if(n!==null){var s=ht();Kt(n,e,1,s)}}),Ec(e,1)}};Qo=function(e){if(e.tag===13){var t=ma(e,134217728);if(t!==null){var r=ht();Kt(t,e,134217728,r)}Ec(e,134217728)}};wp=function(e){if(e.tag===13){var t=Ma(e),r=ma(e,t);if(r!==null){var n=ht();Kt(r,e,t,n)}Ec(e,t)}};Cp=function(){return Te};Sp=function(e,t){var r=Te;try{return Te=e,t()}finally{Te=r}};Gl=function(e,t,r){switch(t){case"input":if(zl(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=Pi(n);if(!s)throw Error(J(90));ap(n),zl(n,s)}}}break;case"textarea":np(e,r);break;case"select":t=r.value,t!=null&&Tr(e,!!r.multiple,t,!1)}};up=Nc;pp=or;var ux={usingClientEntryPoint:!1,Events:[Xn,wr,Pi,cp,dp,Nc]},un={findFiberByHostInstance:Qa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},px={bundleType:un.bundleType,version:un.version,rendererPackageName:un.rendererPackageName,rendererConfig:un.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:fa.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=fp(e),e===null?null:e.stateNode},findFiberByHostInstance:un.findFiberByHostInstance||cx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ks=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ks.isDisabled&&ks.supportsFiber)try{Ci=ks.inject(px),ea=ks}catch{}}Lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ux;Lt.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ac(t))throw Error(J(200));return ox(e,t,null,r)};Lt.createRoot=function(e,t){if(!Ac(e))throw Error(J(299));var r=!1,n="",s=Gm;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=kc(e,1,!1,null,null,r,!1,n,s),e[pa]=t.current,$n(e.nodeType===8?e.parentNode:e),new Pc(t)};Lt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(J(188)):(e=Object.keys(e).join(","),Error(J(268,e)));return e=fp(t),e=e===null?null:e.stateNode,e};Lt.flushSync=function(e){return or(e)};Lt.hydrate=function(e,t,r){if(!_i(t))throw Error(J(200));return $i(null,e,t,!0,r)};Lt.hydrateRoot=function(e,t,r){if(!Ac(e))throw Error(J(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",l=Gm;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(l=r.onRecoverableError)),t=Km(t,null,e,1,r??null,s,!1,i,l),e[pa]=t.current,$n(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new Oi(t)};Lt.render=function(e,t,r){if(!_i(t))throw Error(J(200));return $i(null,e,t,!1,r)};Lt.unmountComponentAtNode=function(e){if(!_i(e))throw Error(J(40));return e._reactRootContainer?(or(function(){$i(null,null,e,!1,function(){e._reactRootContainer=null,e[pa]=null})}),!0):!1};Lt.unstable_batchedUpdates=Nc;Lt.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!_i(r))throw Error(J(200));if(e==null||e._reactInternals===void 0)throw Error(J(38));return $i(e,t,r,!1,n)};Lt.version="18.3.1-next-f1338f8080-20240426";function qm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(qm)}catch(e){console.error(e)}}qm(),qu.exports=Lt;var mx=qu.exports,au=mx;Dl.createRoot=au.createRoot,Dl.hydrateRoot=au.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Gn(){return Gn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gn.apply(this,arguments)}var Pa;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Pa||(Pa={}));const ru="popstate";function hx(e){e===void 0&&(e={});function t(n,s){let{pathname:i,search:l,hash:d}=n.location;return Eo("",{pathname:i,search:l,hash:d},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:yi(s)}return xx(t,r,null,e)}function Ve(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Tc(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function fx(){return Math.random().toString(36).substr(2,8)}function nu(e,t){return{usr:e.state,key:e.key,idx:t}}function Eo(e,t,r,n){return r===void 0&&(r=null),Gn({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Yr(t):t,{state:r,key:t&&t.key||n||fx()})}function yi(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Yr(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function xx(e,t,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,l=s.history,d=Pa.Pop,o=null,c=u();c==null&&(c=0,l.replaceState(Gn({},l.state,{idx:c}),""));function u(){return(l.state||{idx:null}).idx}function p(){d=Pa.Pop;let j=u(),x=j==null?null:j-c;c=j,o&&o({action:d,location:h.location,delta:x})}function m(j,x){d=Pa.Push;let g=Eo(h.location,j,x);c=u()+1;let b=nu(g,c),E=h.createHref(g);try{l.pushState(b,"",E)}catch(y){if(y instanceof DOMException&&y.name==="DataCloneError")throw y;s.location.assign(E)}i&&o&&o({action:d,location:h.location,delta:1})}function N(j,x){d=Pa.Replace;let g=Eo(h.location,j,x);c=u();let b=nu(g,c),E=h.createHref(g);l.replaceState(b,"",E),i&&o&&o({action:d,location:h.location,delta:0})}function f(j){let x=s.location.origin!=="null"?s.location.origin:s.location.href,g=typeof j=="string"?j:yi(j);return g=g.replace(/ $/,"%20"),Ve(x,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,x)}let h={get action(){return d},get location(){return e(s,l)},listen(j){if(o)throw new Error("A history only accepts one active listener");return s.addEventListener(ru,p),o=j,()=>{s.removeEventListener(ru,p),o=null}},createHref(j){return t(s,j)},createURL:f,encodeLocation(j){let x=f(j);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:m,replace:N,go(j){return l.go(j)}};return h}var su;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(su||(su={}));function gx(e,t,r){return r===void 0&&(r="/"),yx(e,t,r)}function yx(e,t,r,n){let s=typeof t=="string"?Yr(t):t,i=Wr(s.pathname||"/",r);if(i==null)return null;let l=Qm(e);vx(l);let d=null;for(let o=0;d==null&&o<l.length;++o){let c=Tx(i);d=Px(l[o],c)}return d}function Qm(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(i,l,d)=>{let o={relativePath:d===void 0?i.path||"":d,caseSensitive:i.caseSensitive===!0,childrenIndex:l,route:i};o.relativePath.startsWith("/")&&(Ve(o.relativePath.startsWith(n),'Absolute route path "'+o.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),o.relativePath=o.relativePath.slice(n.length));let c=_a([n,o.relativePath]),u=r.concat(o);i.children&&i.children.length>0&&(Ve(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),Qm(i.children,t,u,c)),!(i.path==null&&!i.index)&&t.push({path:c,score:kx(c,i.index),routesMeta:u})};return e.forEach((i,l)=>{var d;if(i.path===""||!((d=i.path)!=null&&d.includes("?")))s(i,l);else for(let o of Ym(i.path))s(i,l,o)}),t}function Ym(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let l=Ym(n.join("/")),d=[];return d.push(...l.map(o=>o===""?i:[i,o].join("/"))),s&&d.push(...l),d.map(o=>e.startsWith("/")&&o===""?"/":o)}function vx(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:Ex(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const bx=/^:[\w-]+$/,jx=3,Nx=2,wx=1,Cx=10,Sx=-2,iu=e=>e==="*";function kx(e,t){let r=e.split("/"),n=r.length;return r.some(iu)&&(n+=Sx),t&&(n+=Nx),r.filter(s=>!iu(s)).reduce((s,i)=>s+(bx.test(i)?jx:i===""?wx:Cx),n)}function Ex(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function Px(e,t,r){let{routesMeta:n}=e,s={},i="/",l=[];for(let d=0;d<n.length;++d){let o=n[d],c=d===n.length-1,u=i==="/"?t:t.slice(i.length)||"/",p=Po({path:o.relativePath,caseSensitive:o.caseSensitive,end:c},u),m=o.route;if(!p)return null;Object.assign(s,p.params),l.push({params:s,pathname:_a([i,p.pathname]),pathnameBase:Mx(_a([i,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(i=_a([i,p.pathnameBase]))}return l}function Po(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=Ax(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let i=s[0],l=i.replace(/(.)\/+$/,"$1"),d=s.slice(1);return{params:n.reduce((c,u,p)=>{let{paramName:m,isOptional:N}=u;if(m==="*"){let h=d[p]||"";l=i.slice(0,i.length-h.length).replace(/(.)\/+$/,"$1")}const f=d[p];return N&&!f?c[m]=void 0:c[m]=(f||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:l,pattern:e}}function Ax(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),Tc(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,d,o)=>(n.push({paramName:d,isOptional:o!=null}),o?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function Tx(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Tc(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Wr(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}const Lx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ix=e=>Lx.test(e);function Dx(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?Yr(e):e,i;if(r)if(Ix(r))i=r;else{if(r.includes("//")){let l=r;r=r.replace(/\/\/+/g,"/"),Tc(!1,"Pathnames cannot have embedded double slashes - normalizing "+(l+" -> "+r))}r.startsWith("/")?i=lu(r.substring(1),"/"):i=lu(r,t)}else i=t;return{pathname:i,search:Ox(n),hash:_x(s)}}function lu(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Sl(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Rx(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Lc(e,t){let r=Rx(e);return t?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function Ic(e,t,r,n){n===void 0&&(n=!1);let s;typeof e=="string"?s=Yr(e):(s=Gn({},e),Ve(!s.pathname||!s.pathname.includes("?"),Sl("?","pathname","search",s)),Ve(!s.pathname||!s.pathname.includes("#"),Sl("#","pathname","hash",s)),Ve(!s.search||!s.search.includes("#"),Sl("#","search","hash",s)));let i=e===""||s.pathname==="",l=i?"/":s.pathname,d;if(l==null)d=r;else{let p=t.length-1;if(!n&&l.startsWith("..")){let m=l.split("/");for(;m[0]==="..";)m.shift(),p-=1;s.pathname=m.join("/")}d=p>=0?t[p]:"/"}let o=Dx(s,d),c=l&&l!=="/"&&l.endsWith("/"),u=(i||l===".")&&r.endsWith("/");return!o.pathname.endsWith("/")&&(c||u)&&(o.pathname+="/"),o}const _a=e=>e.join("/").replace(/\/\/+/g,"/"),Mx=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Ox=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,_x=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function $x(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Jm=["post","put","patch","delete"];new Set(Jm);const Fx=["get",...Jm];new Set(Fx);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qn(){return qn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qn.apply(this,arguments)}const Fi=v.createContext(null),Zm=v.createContext(null),xa=v.createContext(null),zi=v.createContext(null),ga=v.createContext({outlet:null,matches:[],isDataRoute:!1}),Xm=v.createContext(null);function zx(e,t){let{relative:r}=t===void 0?{}:t;Jr()||Ve(!1);let{basename:n,navigator:s}=v.useContext(xa),{hash:i,pathname:l,search:d}=Bi(e,{relative:r}),o=l;return n!=="/"&&(o=l==="/"?n:_a([n,l])),s.createHref({pathname:o,search:d,hash:i})}function Jr(){return v.useContext(zi)!=null}function ya(){return Jr()||Ve(!1),v.useContext(zi).location}function eh(e){v.useContext(xa).static||v.useLayoutEffect(e)}function va(){let{isDataRoute:e}=v.useContext(ga);return e?Xx():Bx()}function Bx(){Jr()||Ve(!1);let e=v.useContext(Fi),{basename:t,future:r,navigator:n}=v.useContext(xa),{matches:s}=v.useContext(ga),{pathname:i}=ya(),l=JSON.stringify(Lc(s,r.v7_relativeSplatPath)),d=v.useRef(!1);return eh(()=>{d.current=!0}),v.useCallback(function(c,u){if(u===void 0&&(u={}),!d.current)return;if(typeof c=="number"){n.go(c);return}let p=Ic(c,JSON.parse(l),i,u.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:_a([t,p.pathname])),(u.replace?n.replace:n.push)(p,u.state,u)},[t,n,l,i,e])}function Zr(){let{matches:e}=v.useContext(ga),t=e[e.length-1];return t?t.params:{}}function Bi(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=v.useContext(xa),{matches:s}=v.useContext(ga),{pathname:i}=ya(),l=JSON.stringify(Lc(s,n.v7_relativeSplatPath));return v.useMemo(()=>Ic(e,JSON.parse(l),i,r==="path"),[e,l,i,r])}function Ux(e,t){return Vx(e,t)}function Vx(e,t,r,n){Jr()||Ve(!1);let{navigator:s}=v.useContext(xa),{matches:i}=v.useContext(ga),l=i[i.length-1],d=l?l.params:{};l&&l.pathname;let o=l?l.pathnameBase:"/";l&&l.route;let c=ya(),u;if(t){var p;let j=typeof t=="string"?Yr(t):t;o==="/"||(p=j.pathname)!=null&&p.startsWith(o)||Ve(!1),u=j}else u=c;let m=u.pathname||"/",N=m;if(o!=="/"){let j=o.replace(/^\//,"").split("/");N="/"+m.replace(/^\//,"").split("/").slice(j.length).join("/")}let f=gx(e,{pathname:N}),h=qx(f&&f.map(j=>Object.assign({},j,{params:Object.assign({},d,j.params),pathname:_a([o,s.encodeLocation?s.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?o:_a([o,s.encodeLocation?s.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),i,r,n);return t&&h?v.createElement(zi.Provider,{value:{location:qn({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Pa.Pop}},h):h}function Wx(){let e=Zx(),t=$x(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},t),r?v.createElement("pre",{style:s},r):null,null)}const Hx=v.createElement(Wx,null);class Kx extends v.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?v.createElement(ga.Provider,{value:this.props.routeContext},v.createElement(Xm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Gx(e){let{routeContext:t,match:r,children:n}=e,s=v.useContext(Fi);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),v.createElement(ga.Provider,{value:t},n)}function qx(e,t,r,n){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let l=e,d=(s=r)==null?void 0:s.errors;if(d!=null){let u=l.findIndex(p=>p.route.id&&(d==null?void 0:d[p.route.id])!==void 0);u>=0||Ve(!1),l=l.slice(0,Math.min(l.length,u+1))}let o=!1,c=-1;if(r&&n&&n.v7_partialHydration)for(let u=0;u<l.length;u++){let p=l[u];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(c=u),p.route.id){let{loaderData:m,errors:N}=r,f=p.route.loader&&m[p.route.id]===void 0&&(!N||N[p.route.id]===void 0);if(p.route.lazy||f){o=!0,c>=0?l=l.slice(0,c+1):l=[l[0]];break}}}return l.reduceRight((u,p,m)=>{let N,f=!1,h=null,j=null;r&&(N=d&&p.route.id?d[p.route.id]:void 0,h=p.route.errorElement||Hx,o&&(c<0&&m===0?(eg("route-fallback"),f=!0,j=null):c===m&&(f=!0,j=p.route.hydrateFallbackElement||null)));let x=t.concat(l.slice(0,m+1)),g=()=>{let b;return N?b=h:f?b=j:p.route.Component?b=v.createElement(p.route.Component,null):p.route.element?b=p.route.element:b=u,v.createElement(Gx,{match:p,routeContext:{outlet:u,matches:x,isDataRoute:r!=null},children:b})};return r&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?v.createElement(Kx,{location:r.location,revalidation:r.revalidation,component:h,error:N,children:g(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):g()},null)}var th=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(th||{}),ah=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ah||{});function Qx(e){let t=v.useContext(Fi);return t||Ve(!1),t}function Yx(e){let t=v.useContext(Zm);return t||Ve(!1),t}function Jx(e){let t=v.useContext(ga);return t||Ve(!1),t}function rh(e){let t=Jx(),r=t.matches[t.matches.length-1];return r.route.id||Ve(!1),r.route.id}function Zx(){var e;let t=v.useContext(Xm),r=Yx(),n=rh();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function Xx(){let{router:e}=Qx(th.UseNavigateStable),t=rh(ah.UseNavigateStable),r=v.useRef(!1);return eh(()=>{r.current=!0}),v.useCallback(function(s,i){i===void 0&&(i={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,qn({fromRouteId:t},i)))},[e,t])}const ou={};function eg(e,t,r){ou[e]||(ou[e]=!0)}function tg(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Ws(e){let{to:t,replace:r,state:n,relative:s}=e;Jr()||Ve(!1);let{future:i,static:l}=v.useContext(xa),{matches:d}=v.useContext(ga),{pathname:o}=ya(),c=va(),u=Ic(t,Lc(d,i.v7_relativeSplatPath),o,s==="path"),p=JSON.stringify(u);return v.useEffect(()=>c(JSON.parse(p),{replace:r,state:n,relative:s}),[c,p,s,r,n]),null}function De(e){Ve(!1)}function ag(e){let{basename:t="/",children:r=null,location:n,navigationType:s=Pa.Pop,navigator:i,static:l=!1,future:d}=e;Jr()&&Ve(!1);let o=t.replace(/^\/*/,"/"),c=v.useMemo(()=>({basename:o,navigator:i,static:l,future:qn({v7_relativeSplatPath:!1},d)}),[o,d,i,l]);typeof n=="string"&&(n=Yr(n));let{pathname:u="/",search:p="",hash:m="",state:N=null,key:f="default"}=n,h=v.useMemo(()=>{let j=Wr(u,o);return j==null?null:{location:{pathname:j,search:p,hash:m,state:N,key:f},navigationType:s}},[o,u,p,m,N,f,s]);return h==null?null:v.createElement(xa.Provider,{value:c},v.createElement(zi.Provider,{children:r,value:h}))}function nh(e){let{children:t,location:r}=e;return Ux(Ao(t),r)}new Promise(()=>{});function Ao(e,t){t===void 0&&(t=[]);let r=[];return v.Children.forEach(e,(n,s)=>{if(!v.isValidElement(n))return;let i=[...t,s];if(n.type===v.Fragment){r.push.apply(r,Ao(n.props.children,i));return}n.type!==De&&Ve(!1),!n.props.index||!n.props.children||Ve(!1);let l={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=Ao(n.props.children,i)),r.push(l)}),r}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vi(){return vi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vi.apply(this,arguments)}function sh(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,i;for(i=0;i<n.length;i++)s=n[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function rg(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function ng(e,t){return e.button===0&&(!t||t==="_self")&&!rg(e)}function To(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(s=>[r,s]):[[r,n]])},[]))}function sg(e,t){let r=To(e);return t&&t.forEach((n,s)=>{r.has(s)||t.getAll(s).forEach(i=>{r.append(s,i)})}),r}const ig=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],lg=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],og="6";try{window.__reactRouterVersion=og}catch{}const cg=v.createContext({isTransitioning:!1}),dg="startTransition",cu=tf[dg];function ug(e){let{basename:t,children:r,future:n,window:s}=e,i=v.useRef();i.current==null&&(i.current=hx({window:s,v5Compat:!0}));let l=i.current,[d,o]=v.useState({action:l.action,location:l.location}),{v7_startTransition:c}=n||{},u=v.useCallback(p=>{c&&cu?cu(()=>o(p)):o(p)},[o,c]);return v.useLayoutEffect(()=>l.listen(u),[l,u]),v.useEffect(()=>tg(n),[n]),v.createElement(ag,{basename:t,children:r,location:d.location,navigationType:d.action,navigator:l,future:n})}const pg=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",mg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Se=v.forwardRef(function(t,r){let{onClick:n,relative:s,reloadDocument:i,replace:l,state:d,target:o,to:c,preventScrollReset:u,viewTransition:p}=t,m=sh(t,ig),{basename:N}=v.useContext(xa),f,h=!1;if(typeof c=="string"&&mg.test(c)&&(f=c,pg))try{let b=new URL(window.location.href),E=c.startsWith("//")?new URL(b.protocol+c):new URL(c),y=Wr(E.pathname,N);E.origin===b.origin&&y!=null?c=y+E.search+E.hash:h=!0}catch{}let j=zx(c,{relative:s}),x=xg(c,{replace:l,state:d,target:o,preventScrollReset:u,relative:s,viewTransition:p});function g(b){n&&n(b),b.defaultPrevented||x(b)}return v.createElement("a",vi({},m,{href:f||j,onClick:h||i?n:g,ref:r,target:o}))}),hg=v.forwardRef(function(t,r){let{"aria-current":n="page",caseSensitive:s=!1,className:i="",end:l=!1,style:d,to:o,viewTransition:c,children:u}=t,p=sh(t,lg),m=Bi(o,{relative:p.relative}),N=ya(),f=v.useContext(Zm),{navigator:h,basename:j}=v.useContext(xa),x=f!=null&&gg(m)&&c===!0,g=h.encodeLocation?h.encodeLocation(m).pathname:m.pathname,b=N.pathname,E=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;s||(b=b.toLowerCase(),E=E?E.toLowerCase():null,g=g.toLowerCase()),E&&j&&(E=Wr(E,j)||E);const y=g!=="/"&&g.endsWith("/")?g.length-1:g.length;let w=b===g||!l&&b.startsWith(g)&&b.charAt(y)==="/",k=E!=null&&(E===g||!l&&E.startsWith(g)&&E.charAt(g.length)==="/"),I={isActive:w,isPending:k,isTransitioning:x},R=w?n:void 0,U;typeof i=="function"?U=i(I):U=[i,w?"active":null,k?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let M=typeof d=="function"?d(I):d;return v.createElement(Se,vi({},p,{"aria-current":R,className:U,ref:r,style:M,to:o,viewTransition:c}),typeof u=="function"?u(I):u)});var Lo;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Lo||(Lo={}));var du;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(du||(du={}));function fg(e){let t=v.useContext(Fi);return t||Ve(!1),t}function xg(e,t){let{target:r,replace:n,state:s,preventScrollReset:i,relative:l,viewTransition:d}=t===void 0?{}:t,o=va(),c=ya(),u=Bi(e,{relative:l});return v.useCallback(p=>{if(ng(p,r)){p.preventDefault();let m=n!==void 0?n:yi(c)===yi(u);o(e,{replace:m,state:s,preventScrollReset:i,relative:l,viewTransition:d})}},[c,o,u,n,s,r,e,i,l,d])}function ih(e){let t=v.useRef(To(e)),r=v.useRef(!1),n=ya(),s=v.useMemo(()=>sg(n.search,r.current?null:t.current),[n.search]),i=va(),l=v.useCallback((d,o)=>{const c=To(typeof d=="function"?d(s):d);r.current=!0,i("?"+c,o)},[i,s]);return[s,l]}function gg(e,t){t===void 0&&(t={});let r=v.useContext(cg);r==null&&Ve(!1);let{basename:n}=fg(Lo.useViewTransitionState),s=Bi(e,{relative:t.relative});if(!r.isTransitioning)return!1;let i=Wr(r.currentLocation.pathname,n)||r.currentLocation.pathname,l=Wr(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Po(s.pathname,l)!=null||Po(s.pathname,i)!=null}function lh(e,t){return function(){return e.apply(t,arguments)}}const{toString:yg}=Object.prototype,{getPrototypeOf:Dc}=Object,{iterator:Ui,toStringTag:oh}=Symbol,Vi=(e=>t=>{const r=yg.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),qt=e=>(e=e.toLowerCase(),t=>Vi(t)===e),Wi=e=>t=>typeof t===e,{isArray:Xr}=Array,Hr=Wi("undefined");function ts(e){return e!==null&&!Hr(e)&&e.constructor!==null&&!Hr(e.constructor)&&Ct(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const ch=qt("ArrayBuffer");function vg(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&ch(e.buffer),t}const bg=Wi("string"),Ct=Wi("function"),dh=Wi("number"),as=e=>e!==null&&typeof e=="object",jg=e=>e===!0||e===!1,Hs=e=>{if(Vi(e)!=="object")return!1;const t=Dc(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(oh in e)&&!(Ui in e)},Ng=e=>{if(!as(e)||ts(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},wg=qt("Date"),Cg=qt("File"),Sg=qt("Blob"),kg=qt("FileList"),Eg=e=>as(e)&&Ct(e.pipe),Pg=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Ct(e.append)&&((t=Vi(e))==="formdata"||t==="object"&&Ct(e.toString)&&e.toString()==="[object FormData]"))},Ag=qt("URLSearchParams"),[Tg,Lg,Ig,Dg]=["ReadableStream","Request","Response","Headers"].map(qt),Rg=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function rs(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,s;if(typeof e!="object"&&(e=[e]),Xr(e))for(n=0,s=e.length;n<s;n++)t.call(null,e[n],n,e);else{if(ts(e))return;const i=r?Object.getOwnPropertyNames(e):Object.keys(e),l=i.length;let d;for(n=0;n<l;n++)d=i[n],t.call(null,e[d],d,e)}}function uh(e,t){if(ts(e))return null;t=t.toLowerCase();const r=Object.keys(e);let n=r.length,s;for(;n-- >0;)if(s=r[n],t===s.toLowerCase())return s;return null}const Za=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,ph=e=>!Hr(e)&&e!==Za;function Io(){const{caseless:e,skipUndefined:t}=ph(this)&&this||{},r={},n=(s,i)=>{const l=e&&uh(r,i)||i;Hs(r[l])&&Hs(s)?r[l]=Io(r[l],s):Hs(s)?r[l]=Io({},s):Xr(s)?r[l]=s.slice():(!t||!Hr(s))&&(r[l]=s)};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&rs(arguments[s],n);return r}const Mg=(e,t,r,{allOwnKeys:n}={})=>(rs(t,(s,i)=>{r&&Ct(s)?Object.defineProperty(e,i,{value:lh(s,r),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(e,i,{value:s,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:n}),e),Og=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),_g=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},$g=(e,t,r,n)=>{let s,i,l;const d={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),i=s.length;i-- >0;)l=s[i],(!n||n(l,e,t))&&!d[l]&&(t[l]=e[l],d[l]=!0);e=r!==!1&&Dc(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},Fg=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},zg=e=>{if(!e)return null;if(Xr(e))return e;let t=e.length;if(!dh(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},Bg=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Dc(Uint8Array)),Ug=(e,t)=>{const n=(e&&e[Ui]).call(e);let s;for(;(s=n.next())&&!s.done;){const i=s.value;t.call(e,i[0],i[1])}},Vg=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},Wg=qt("HTMLFormElement"),Hg=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,s){return n.toUpperCase()+s}),uu=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),Kg=qt("RegExp"),mh=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};rs(r,(s,i)=>{let l;(l=t(s,i,e))!==!1&&(n[i]=l||s)}),Object.defineProperties(e,n)},Gg=e=>{mh(e,(t,r)=>{if(Ct(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(Ct(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},qg=(e,t)=>{const r={},n=s=>{s.forEach(i=>{r[i]=!0})};return Xr(e)?n(e):n(String(e).split(t)),r},Qg=()=>{},Yg=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function Jg(e){return!!(e&&Ct(e.append)&&e[oh]==="FormData"&&e[Ui])}const Zg=e=>{const t=new Array(10),r=(n,s)=>{if(as(n)){if(t.indexOf(n)>=0)return;if(ts(n))return n;if(!("toJSON"in n)){t[s]=n;const i=Xr(n)?[]:{};return rs(n,(l,d)=>{const o=r(l,s+1);!Hr(o)&&(i[d]=o)}),t[s]=void 0,i}}return n};return r(e,0)},Xg=qt("AsyncFunction"),ey=e=>e&&(as(e)||Ct(e))&&Ct(e.then)&&Ct(e.catch),hh=((e,t)=>e?setImmediate:t?((r,n)=>(Za.addEventListener("message",({source:s,data:i})=>{s===Za&&i===r&&n.length&&n.shift()()},!1),s=>{n.push(s),Za.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Ct(Za.postMessage)),ty=typeof queueMicrotask<"u"?queueMicrotask.bind(Za):typeof process<"u"&&process.nextTick||hh,ay=e=>e!=null&&Ct(e[Ui]),z={isArray:Xr,isArrayBuffer:ch,isBuffer:ts,isFormData:Pg,isArrayBufferView:vg,isString:bg,isNumber:dh,isBoolean:jg,isObject:as,isPlainObject:Hs,isEmptyObject:Ng,isReadableStream:Tg,isRequest:Lg,isResponse:Ig,isHeaders:Dg,isUndefined:Hr,isDate:wg,isFile:Cg,isBlob:Sg,isRegExp:Kg,isFunction:Ct,isStream:Eg,isURLSearchParams:Ag,isTypedArray:Bg,isFileList:kg,forEach:rs,merge:Io,extend:Mg,trim:Rg,stripBOM:Og,inherits:_g,toFlatObject:$g,kindOf:Vi,kindOfTest:qt,endsWith:Fg,toArray:zg,forEachEntry:Ug,matchAll:Vg,isHTMLForm:Wg,hasOwnProperty:uu,hasOwnProp:uu,reduceDescriptors:mh,freezeMethods:Gg,toObjectSet:qg,toCamelCase:Hg,noop:Qg,toFiniteNumber:Yg,findKey:uh,global:Za,isContextDefined:ph,isSpecCompliantForm:Jg,toJSONObject:Zg,isAsyncFn:Xg,isThenable:ey,setImmediate:hh,asap:ty,isIterable:ay};let ge=class fh extends Error{static from(t,r,n,s,i,l){const d=new fh(t.message,r||t.code,n,s,i);return d.cause=t,d.name=t.name,l&&Object.assign(d,l),d}constructor(t,r,n,s,i){super(t),this.name="AxiosError",this.isAxiosError=!0,r&&(this.code=r),n&&(this.config=n),s&&(this.request=s),i&&(this.response=i,this.status=i.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:z.toJSONObject(this.config),code:this.code,status:this.status}}};ge.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";ge.ERR_BAD_OPTION="ERR_BAD_OPTION";ge.ECONNABORTED="ECONNABORTED";ge.ETIMEDOUT="ETIMEDOUT";ge.ERR_NETWORK="ERR_NETWORK";ge.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";ge.ERR_DEPRECATED="ERR_DEPRECATED";ge.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";ge.ERR_BAD_REQUEST="ERR_BAD_REQUEST";ge.ERR_CANCELED="ERR_CANCELED";ge.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";ge.ERR_INVALID_URL="ERR_INVALID_URL";const ry=null;function Do(e){return z.isPlainObject(e)||z.isArray(e)}function xh(e){return z.endsWith(e,"[]")?e.slice(0,-2):e}function pu(e,t,r){return e?e.concat(t).map(function(s,i){return s=xh(s),!r&&i?"["+s+"]":s}).join(r?".":""):t}function ny(e){return z.isArray(e)&&!e.some(Do)}const sy=z.toFlatObject(z,{},null,function(t){return/^is[A-Z]/.test(t)});function Hi(e,t,r){if(!z.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=z.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(h,j){return!z.isUndefined(j[h])});const n=r.metaTokens,s=r.visitor||u,i=r.dots,l=r.indexes,o=(r.Blob||typeof Blob<"u"&&Blob)&&z.isSpecCompliantForm(t);if(!z.isFunction(s))throw new TypeError("visitor must be a function");function c(f){if(f===null)return"";if(z.isDate(f))return f.toISOString();if(z.isBoolean(f))return f.toString();if(!o&&z.isBlob(f))throw new ge("Blob is not supported. Use a Buffer instead.");return z.isArrayBuffer(f)||z.isTypedArray(f)?o&&typeof Blob=="function"?new Blob([f]):Buffer.from(f):f}function u(f,h,j){let x=f;if(f&&!j&&typeof f=="object"){if(z.endsWith(h,"{}"))h=n?h:h.slice(0,-2),f=JSON.stringify(f);else if(z.isArray(f)&&ny(f)||(z.isFileList(f)||z.endsWith(h,"[]"))&&(x=z.toArray(f)))return h=xh(h),x.forEach(function(b,E){!(z.isUndefined(b)||b===null)&&t.append(l===!0?pu([h],E,i):l===null?h:h+"[]",c(b))}),!1}return Do(f)?!0:(t.append(pu(j,h,i),c(f)),!1)}const p=[],m=Object.assign(sy,{defaultVisitor:u,convertValue:c,isVisitable:Do});function N(f,h){if(!z.isUndefined(f)){if(p.indexOf(f)!==-1)throw Error("Circular reference detected in "+h.join("."));p.push(f),z.forEach(f,function(x,g){(!(z.isUndefined(x)||x===null)&&s.call(t,x,z.isString(g)?g.trim():g,h,m))===!0&&N(x,h?h.concat(g):[g])}),p.pop()}}if(!z.isObject(e))throw new TypeError("data must be an object");return N(e),t}function mu(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function Rc(e,t){this._pairs=[],e&&Hi(e,this,t)}const gh=Rc.prototype;gh.append=function(t,r){this._pairs.push([t,r])};gh.toString=function(t){const r=t?function(n){return t.call(this,n,mu)}:mu;return this._pairs.map(function(s){return r(s[0])+"="+r(s[1])},"").join("&")};function iy(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function yh(e,t,r){if(!t)return e;const n=r&&r.encode||iy,s=z.isFunction(r)?{serialize:r}:r,i=s&&s.serialize;let l;if(i?l=i(t,s):l=z.isURLSearchParams(t)?t.toString():new Rc(t,s).toString(n),l){const d=e.indexOf("#");d!==-1&&(e=e.slice(0,d)),e+=(e.indexOf("?")===-1?"?":"&")+l}return e}class hu{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){z.forEach(this.handlers,function(n){n!==null&&t(n)})}}const vh={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ly=typeof URLSearchParams<"u"?URLSearchParams:Rc,oy=typeof FormData<"u"?FormData:null,cy=typeof Blob<"u"?Blob:null,dy={isBrowser:!0,classes:{URLSearchParams:ly,FormData:oy,Blob:cy},protocols:["http","https","file","blob","url","data"]},Mc=typeof window<"u"&&typeof document<"u",Ro=typeof navigator=="object"&&navigator||void 0,uy=Mc&&(!Ro||["ReactNative","NativeScript","NS"].indexOf(Ro.product)<0),py=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",my=Mc&&window.location.href||"http://localhost",hy=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Mc,hasStandardBrowserEnv:uy,hasStandardBrowserWebWorkerEnv:py,navigator:Ro,origin:my},Symbol.toStringTag,{value:"Module"})),ut={...hy,...dy};function fy(e,t){return Hi(e,new ut.classes.URLSearchParams,{visitor:function(r,n,s,i){return ut.isNode&&z.isBuffer(r)?(this.append(n,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function xy(e){return z.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function gy(e){const t={},r=Object.keys(e);let n;const s=r.length;let i;for(n=0;n<s;n++)i=r[n],t[i]=e[i];return t}function bh(e){function t(r,n,s,i){let l=r[i++];if(l==="__proto__")return!0;const d=Number.isFinite(+l),o=i>=r.length;return l=!l&&z.isArray(s)?s.length:l,o?(z.hasOwnProp(s,l)?s[l]=[s[l],n]:s[l]=n,!d):((!s[l]||!z.isObject(s[l]))&&(s[l]=[]),t(r,n,s[l],i)&&z.isArray(s[l])&&(s[l]=gy(s[l])),!d)}if(z.isFormData(e)&&z.isFunction(e.entries)){const r={};return z.forEachEntry(e,(n,s)=>{t(xy(n),s,r,0)}),r}return null}function yy(e,t,r){if(z.isString(e))try{return(t||JSON.parse)(e),z.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}const ns={transitional:vh,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const n=r.getContentType()||"",s=n.indexOf("application/json")>-1,i=z.isObject(t);if(i&&z.isHTMLForm(t)&&(t=new FormData(t)),z.isFormData(t))return s?JSON.stringify(bh(t)):t;if(z.isArrayBuffer(t)||z.isBuffer(t)||z.isStream(t)||z.isFile(t)||z.isBlob(t)||z.isReadableStream(t))return t;if(z.isArrayBufferView(t))return t.buffer;if(z.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let d;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return fy(t,this.formSerializer).toString();if((d=z.isFileList(t))||n.indexOf("multipart/form-data")>-1){const o=this.env&&this.env.FormData;return Hi(d?{"files[]":t}:t,o&&new o,this.formSerializer)}}return i||s?(r.setContentType("application/json",!1),yy(t)):t}],transformResponse:[function(t){const r=this.transitional||ns.transitional,n=r&&r.forcedJSONParsing,s=this.responseType==="json";if(z.isResponse(t)||z.isReadableStream(t))return t;if(t&&z.isString(t)&&(n&&!this.responseType||s)){const l=!(r&&r.silentJSONParsing)&&s;try{return JSON.parse(t,this.parseReviver)}catch(d){if(l)throw d.name==="SyntaxError"?ge.from(d,ge.ERR_BAD_RESPONSE,this,null,this.response):d}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ut.classes.FormData,Blob:ut.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};z.forEach(["delete","get","head","post","put","patch"],e=>{ns.headers[e]={}});const vy=z.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),by=e=>{const t={};let r,n,s;return e&&e.split(`
`).forEach(function(l){s=l.indexOf(":"),r=l.substring(0,s).trim().toLowerCase(),n=l.substring(s+1).trim(),!(!r||t[r]&&vy[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},fu=Symbol("internals");function pn(e){return e&&String(e).trim().toLowerCase()}function Ks(e){return e===!1||e==null?e:z.isArray(e)?e.map(Ks):String(e)}function jy(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const Ny=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function kl(e,t,r,n,s){if(z.isFunction(n))return n.call(this,t,r);if(s&&(t=r),!!z.isString(t)){if(z.isString(n))return t.indexOf(n)!==-1;if(z.isRegExp(n))return n.test(t)}}function wy(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function Cy(e,t){const r=z.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(s,i,l){return this[n].call(this,t,s,i,l)},configurable:!0})})}let St=class{constructor(t){t&&this.set(t)}set(t,r,n){const s=this;function i(d,o,c){const u=pn(o);if(!u)throw new Error("header name must be a non-empty string");const p=z.findKey(s,u);(!p||s[p]===void 0||c===!0||c===void 0&&s[p]!==!1)&&(s[p||o]=Ks(d))}const l=(d,o)=>z.forEach(d,(c,u)=>i(c,u,o));if(z.isPlainObject(t)||t instanceof this.constructor)l(t,r);else if(z.isString(t)&&(t=t.trim())&&!Ny(t))l(by(t),r);else if(z.isObject(t)&&z.isIterable(t)){let d={},o,c;for(const u of t){if(!z.isArray(u))throw TypeError("Object iterator must return a key-value pair");d[c=u[0]]=(o=d[c])?z.isArray(o)?[...o,u[1]]:[o,u[1]]:u[1]}l(d,r)}else t!=null&&i(r,t,n);return this}get(t,r){if(t=pn(t),t){const n=z.findKey(this,t);if(n){const s=this[n];if(!r)return s;if(r===!0)return jy(s);if(z.isFunction(r))return r.call(this,s,n);if(z.isRegExp(r))return r.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=pn(t),t){const n=z.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||kl(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let s=!1;function i(l){if(l=pn(l),l){const d=z.findKey(n,l);d&&(!r||kl(n,n[d],d,r))&&(delete n[d],s=!0)}}return z.isArray(t)?t.forEach(i):i(t),s}clear(t){const r=Object.keys(this);let n=r.length,s=!1;for(;n--;){const i=r[n];(!t||kl(this,this[i],i,t,!0))&&(delete this[i],s=!0)}return s}normalize(t){const r=this,n={};return z.forEach(this,(s,i)=>{const l=z.findKey(n,i);if(l){r[l]=Ks(s),delete r[i];return}const d=t?wy(i):String(i).trim();d!==i&&delete r[i],r[d]=Ks(s),n[d]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return z.forEach(this,(n,s)=>{n!=null&&n!==!1&&(r[s]=t&&z.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(s=>n.set(s)),n}static accessor(t){const n=(this[fu]=this[fu]={accessors:{}}).accessors,s=this.prototype;function i(l){const d=pn(l);n[d]||(Cy(s,l),n[d]=!0)}return z.isArray(t)?t.forEach(i):i(t),this}};St.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);z.reduceDescriptors(St.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}});z.freezeMethods(St);function El(e,t){const r=this||ns,n=t||r,s=St.from(n.headers);let i=n.data;return z.forEach(e,function(d){i=d.call(r,i,s.normalize(),t?t.status:void 0)}),s.normalize(),i}function jh(e){return!!(e&&e.__CANCEL__)}let ss=class extends ge{constructor(t,r,n){super(t??"canceled",ge.ERR_CANCELED,r,n),this.name="CanceledError",this.__CANCEL__=!0}};function Nh(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new ge("Request failed with status code "+r.status,[ge.ERR_BAD_REQUEST,ge.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function Sy(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function ky(e,t){e=e||10;const r=new Array(e),n=new Array(e);let s=0,i=0,l;return t=t!==void 0?t:1e3,function(o){const c=Date.now(),u=n[i];l||(l=c),r[s]=o,n[s]=c;let p=i,m=0;for(;p!==s;)m+=r[p++],p=p%e;if(s=(s+1)%e,s===i&&(i=(i+1)%e),c-l<t)return;const N=u&&c-u;return N?Math.round(m*1e3/N):void 0}}function Ey(e,t){let r=0,n=1e3/t,s,i;const l=(c,u=Date.now())=>{r=u,s=null,i&&(clearTimeout(i),i=null),e(...c)};return[(...c)=>{const u=Date.now(),p=u-r;p>=n?l(c,u):(s=c,i||(i=setTimeout(()=>{i=null,l(s)},n-p)))},()=>s&&l(s)]}const bi=(e,t,r=3)=>{let n=0;const s=ky(50,250);return Ey(i=>{const l=i.loaded,d=i.lengthComputable?i.total:void 0,o=l-n,c=s(o),u=l<=d;n=l;const p={loaded:l,total:d,progress:d?l/d:void 0,bytes:o,rate:c||void 0,estimated:c&&d&&u?(d-l)/c:void 0,event:i,lengthComputable:d!=null,[t?"download":"upload"]:!0};e(p)},r)},xu=(e,t)=>{const r=e!=null;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},gu=e=>(...t)=>z.asap(()=>e(...t)),Py=ut.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,ut.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(ut.origin),ut.navigator&&/(msie|trident)/i.test(ut.navigator.userAgent)):()=>!0,Ay=ut.hasStandardBrowserEnv?{write(e,t,r,n,s,i,l){if(typeof document>"u")return;const d=[`${e}=${encodeURIComponent(t)}`];z.isNumber(r)&&d.push(`expires=${new Date(r).toUTCString()}`),z.isString(n)&&d.push(`path=${n}`),z.isString(s)&&d.push(`domain=${s}`),i===!0&&d.push("secure"),z.isString(l)&&d.push(`SameSite=${l}`),document.cookie=d.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function Ty(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Ly(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function wh(e,t,r){let n=!Ty(t);return e&&(n||r==!1)?Ly(e,t):t}const yu=e=>e instanceof St?{...e}:e;function cr(e,t){t=t||{};const r={};function n(c,u,p,m){return z.isPlainObject(c)&&z.isPlainObject(u)?z.merge.call({caseless:m},c,u):z.isPlainObject(u)?z.merge({},u):z.isArray(u)?u.slice():u}function s(c,u,p,m){if(z.isUndefined(u)){if(!z.isUndefined(c))return n(void 0,c,p,m)}else return n(c,u,p,m)}function i(c,u){if(!z.isUndefined(u))return n(void 0,u)}function l(c,u){if(z.isUndefined(u)){if(!z.isUndefined(c))return n(void 0,c)}else return n(void 0,u)}function d(c,u,p){if(p in t)return n(c,u);if(p in e)return n(void 0,c)}const o={url:i,method:i,data:i,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:d,headers:(c,u,p)=>s(yu(c),yu(u),p,!0)};return z.forEach(Object.keys({...e,...t}),function(u){const p=o[u]||s,m=p(e[u],t[u],u);z.isUndefined(m)&&p!==d||(r[u]=m)}),r}const Ch=e=>{const t=cr({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:s,xsrfCookieName:i,headers:l,auth:d}=t;if(t.headers=l=St.from(l),t.url=yh(wh(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),d&&l.set("Authorization","Basic "+btoa((d.username||"")+":"+(d.password?unescape(encodeURIComponent(d.password)):""))),z.isFormData(r)){if(ut.hasStandardBrowserEnv||ut.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(z.isFunction(r.getHeaders)){const o=r.getHeaders(),c=["content-type","content-length"];Object.entries(o).forEach(([u,p])=>{c.includes(u.toLowerCase())&&l.set(u,p)})}}if(ut.hasStandardBrowserEnv&&(n&&z.isFunction(n)&&(n=n(t)),n||n!==!1&&Py(t.url))){const o=s&&i&&Ay.read(i);o&&l.set(s,o)}return t},Iy=typeof XMLHttpRequest<"u",Dy=Iy&&function(e){return new Promise(function(r,n){const s=Ch(e);let i=s.data;const l=St.from(s.headers).normalize();let{responseType:d,onUploadProgress:o,onDownloadProgress:c}=s,u,p,m,N,f;function h(){N&&N(),f&&f(),s.cancelToken&&s.cancelToken.unsubscribe(u),s.signal&&s.signal.removeEventListener("abort",u)}let j=new XMLHttpRequest;j.open(s.method.toUpperCase(),s.url,!0),j.timeout=s.timeout;function x(){if(!j)return;const b=St.from("getAllResponseHeaders"in j&&j.getAllResponseHeaders()),y={data:!d||d==="text"||d==="json"?j.responseText:j.response,status:j.status,statusText:j.statusText,headers:b,config:e,request:j};Nh(function(k){r(k),h()},function(k){n(k),h()},y),j=null}"onloadend"in j?j.onloadend=x:j.onreadystatechange=function(){!j||j.readyState!==4||j.status===0&&!(j.responseURL&&j.responseURL.indexOf("file:")===0)||setTimeout(x)},j.onabort=function(){j&&(n(new ge("Request aborted",ge.ECONNABORTED,e,j)),j=null)},j.onerror=function(E){const y=E&&E.message?E.message:"Network Error",w=new ge(y,ge.ERR_NETWORK,e,j);w.event=E||null,n(w),j=null},j.ontimeout=function(){let E=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const y=s.transitional||vh;s.timeoutErrorMessage&&(E=s.timeoutErrorMessage),n(new ge(E,y.clarifyTimeoutError?ge.ETIMEDOUT:ge.ECONNABORTED,e,j)),j=null},i===void 0&&l.setContentType(null),"setRequestHeader"in j&&z.forEach(l.toJSON(),function(E,y){j.setRequestHeader(y,E)}),z.isUndefined(s.withCredentials)||(j.withCredentials=!!s.withCredentials),d&&d!=="json"&&(j.responseType=s.responseType),c&&([m,f]=bi(c,!0),j.addEventListener("progress",m)),o&&j.upload&&([p,N]=bi(o),j.upload.addEventListener("progress",p),j.upload.addEventListener("loadend",N)),(s.cancelToken||s.signal)&&(u=b=>{j&&(n(!b||b.type?new ss(null,e,j):b),j.abort(),j=null)},s.cancelToken&&s.cancelToken.subscribe(u),s.signal&&(s.signal.aborted?u():s.signal.addEventListener("abort",u)));const g=Sy(s.url);if(g&&ut.protocols.indexOf(g)===-1){n(new ge("Unsupported protocol "+g+":",ge.ERR_BAD_REQUEST,e));return}j.send(i||null)})},Ry=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let n=new AbortController,s;const i=function(c){if(!s){s=!0,d();const u=c instanceof Error?c:this.reason;n.abort(u instanceof ge?u:new ss(u instanceof Error?u.message:u))}};let l=t&&setTimeout(()=>{l=null,i(new ge(`timeout of ${t}ms exceeded`,ge.ETIMEDOUT))},t);const d=()=>{e&&(l&&clearTimeout(l),l=null,e.forEach(c=>{c.unsubscribe?c.unsubscribe(i):c.removeEventListener("abort",i)}),e=null)};e.forEach(c=>c.addEventListener("abort",i));const{signal:o}=n;return o.unsubscribe=()=>z.asap(d),o}},My=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let n=0,s;for(;n<r;)s=n+t,yield e.slice(n,s),n=s},Oy=async function*(e,t){for await(const r of _y(e))yield*My(r,t)},_y=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)break;yield n}}finally{await t.cancel()}},vu=(e,t,r,n)=>{const s=Oy(e,t);let i=0,l,d=o=>{l||(l=!0,n&&n(o))};return new ReadableStream({async pull(o){try{const{done:c,value:u}=await s.next();if(c){d(),o.close();return}let p=u.byteLength;if(r){let m=i+=p;r(m)}o.enqueue(new Uint8Array(u))}catch(c){throw d(c),c}},cancel(o){return d(o),s.return()}},{highWaterMark:2})},bu=64*1024,{isFunction:Es}=z,$y=(({Request:e,Response:t})=>({Request:e,Response:t}))(z.global),{ReadableStream:ju,TextEncoder:Nu}=z.global,wu=(e,...t)=>{try{return!!e(...t)}catch{return!1}},Fy=e=>{e=z.merge.call({skipUndefined:!0},$y,e);const{fetch:t,Request:r,Response:n}=e,s=t?Es(t):typeof fetch=="function",i=Es(r),l=Es(n);if(!s)return!1;const d=s&&Es(ju),o=s&&(typeof Nu=="function"?(f=>h=>f.encode(h))(new Nu):async f=>new Uint8Array(await new r(f).arrayBuffer())),c=i&&d&&wu(()=>{let f=!1;const h=new r(ut.origin,{body:new ju,method:"POST",get duplex(){return f=!0,"half"}}).headers.has("Content-Type");return f&&!h}),u=l&&d&&wu(()=>z.isReadableStream(new n("").body)),p={stream:u&&(f=>f.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(f=>{!p[f]&&(p[f]=(h,j)=>{let x=h&&h[f];if(x)return x.call(h);throw new ge(`Response type '${f}' is not supported`,ge.ERR_NOT_SUPPORT,j)})});const m=async f=>{if(f==null)return 0;if(z.isBlob(f))return f.size;if(z.isSpecCompliantForm(f))return(await new r(ut.origin,{method:"POST",body:f}).arrayBuffer()).byteLength;if(z.isArrayBufferView(f)||z.isArrayBuffer(f))return f.byteLength;if(z.isURLSearchParams(f)&&(f=f+""),z.isString(f))return(await o(f)).byteLength},N=async(f,h)=>{const j=z.toFiniteNumber(f.getContentLength());return j??m(h)};return async f=>{let{url:h,method:j,data:x,signal:g,cancelToken:b,timeout:E,onDownloadProgress:y,onUploadProgress:w,responseType:k,headers:I,withCredentials:R="same-origin",fetchOptions:U}=Ch(f),M=t||fetch;k=k?(k+"").toLowerCase():"text";let L=Ry([g,b&&b.toAbortSignal()],E),D=null;const H=L&&L.unsubscribe&&(()=>{L.unsubscribe()});let re;try{if(w&&c&&j!=="get"&&j!=="head"&&(re=await N(I,x))!==0){let Z=new r(h,{method:"POST",body:x,duplex:"half"}),oe;if(z.isFormData(x)&&(oe=Z.headers.get("content-type"))&&I.setContentType(oe),Z.body){const[ve,ee]=xu(re,bi(gu(w)));x=vu(Z.body,bu,ve,ee)}}z.isString(R)||(R=R?"include":"omit");const ie=i&&"credentials"in r.prototype,he={...U,signal:L,method:j.toUpperCase(),headers:I.normalize().toJSON(),body:x,duplex:"half",credentials:ie?R:void 0};D=i&&new r(h,he);let W=await(i?M(D,U):M(h,he));const te=u&&(k==="stream"||k==="response");if(u&&(y||te&&H)){const Z={};["status","statusText","headers"].forEach(ne=>{Z[ne]=W[ne]});const oe=z.toFiniteNumber(W.headers.get("content-length")),[ve,ee]=y&&xu(oe,bi(gu(y),!0))||[];W=new n(vu(W.body,bu,ve,()=>{ee&&ee(),H&&H()}),Z)}k=k||"text";let ae=await p[z.findKey(p,k)||"text"](W,f);return!te&&H&&H(),await new Promise((Z,oe)=>{Nh(Z,oe,{data:ae,headers:St.from(W.headers),status:W.status,statusText:W.statusText,config:f,request:D})})}catch(ie){throw H&&H(),ie&&ie.name==="TypeError"&&/Load failed|fetch/i.test(ie.message)?Object.assign(new ge("Network Error",ge.ERR_NETWORK,f,D),{cause:ie.cause||ie}):ge.from(ie,ie&&ie.code,f,D)}}},zy=new Map,Sh=e=>{let t=e&&e.env||{};const{fetch:r,Request:n,Response:s}=t,i=[n,s,r];let l=i.length,d=l,o,c,u=zy;for(;d--;)o=i[d],c=u.get(o),c===void 0&&u.set(o,c=d?new Map:Fy(t)),u=c;return c};Sh();const Oc={http:ry,xhr:Dy,fetch:{get:Sh}};z.forEach(Oc,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Cu=e=>`- ${e}`,By=e=>z.isFunction(e)||e===null||e===!1;function Uy(e,t){e=z.isArray(e)?e:[e];const{length:r}=e;let n,s;const i={};for(let l=0;l<r;l++){n=e[l];let d;if(s=n,!By(n)&&(s=Oc[(d=String(n)).toLowerCase()],s===void 0))throw new ge(`Unknown adapter '${d}'`);if(s&&(z.isFunction(s)||(s=s.get(t))))break;i[d||"#"+l]=s}if(!s){const l=Object.entries(i).map(([o,c])=>`adapter ${o} `+(c===!1?"is not supported by the environment":"is not available in the build"));let d=r?l.length>1?`since :
`+l.map(Cu).join(`
`):" "+Cu(l[0]):"as no adapter specified";throw new ge("There is no suitable adapter to dispatch the request "+d,"ERR_NOT_SUPPORT")}return s}const kh={getAdapter:Uy,adapters:Oc};function Pl(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ss(null,e)}function Su(e){return Pl(e),e.headers=St.from(e.headers),e.data=El.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),kh.getAdapter(e.adapter||ns.adapter,e)(e).then(function(n){return Pl(e),n.data=El.call(e,e.transformResponse,n),n.headers=St.from(n.headers),n},function(n){return jh(n)||(Pl(e),n&&n.response&&(n.response.data=El.call(e,e.transformResponse,n.response),n.response.headers=St.from(n.response.headers))),Promise.reject(n)})}const Eh="1.13.4",Ki={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Ki[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const ku={};Ki.transitional=function(t,r,n){function s(i,l){return"[Axios v"+Eh+"] Transitional option '"+i+"'"+l+(n?". "+n:"")}return(i,l,d)=>{if(t===!1)throw new ge(s(l," has been removed"+(r?" in "+r:"")),ge.ERR_DEPRECATED);return r&&!ku[l]&&(ku[l]=!0,console.warn(s(l," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(i,l,d):!0}};Ki.spelling=function(t){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function Vy(e,t,r){if(typeof e!="object")throw new ge("options must be an object",ge.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let s=n.length;for(;s-- >0;){const i=n[s],l=t[i];if(l){const d=e[i],o=d===void 0||l(d,i,e);if(o!==!0)throw new ge("option "+i+" must be "+o,ge.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new ge("Unknown option "+i,ge.ERR_BAD_OPTION)}}const Gs={assertOptions:Vy,validators:Ki},Yt=Gs.validators;let rr=class{constructor(t){this.defaults=t||{},this.interceptors={request:new hu,response:new hu}}async request(t,r){try{return await this._request(t,r)}catch(n){if(n instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}catch{}}throw n}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=cr(this.defaults,r);const{transitional:n,paramsSerializer:s,headers:i}=r;n!==void 0&&Gs.assertOptions(n,{silentJSONParsing:Yt.transitional(Yt.boolean),forcedJSONParsing:Yt.transitional(Yt.boolean),clarifyTimeoutError:Yt.transitional(Yt.boolean)},!1),s!=null&&(z.isFunction(s)?r.paramsSerializer={serialize:s}:Gs.assertOptions(s,{encode:Yt.function,serialize:Yt.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),Gs.assertOptions(r,{baseUrl:Yt.spelling("baseURL"),withXsrfToken:Yt.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let l=i&&z.merge(i.common,i[r.method]);i&&z.forEach(["delete","get","head","post","put","patch","common"],f=>{delete i[f]}),r.headers=St.concat(l,i);const d=[];let o=!0;this.interceptors.request.forEach(function(h){typeof h.runWhen=="function"&&h.runWhen(r)===!1||(o=o&&h.synchronous,d.unshift(h.fulfilled,h.rejected))});const c=[];this.interceptors.response.forEach(function(h){c.push(h.fulfilled,h.rejected)});let u,p=0,m;if(!o){const f=[Su.bind(this),void 0];for(f.unshift(...d),f.push(...c),m=f.length,u=Promise.resolve(r);p<m;)u=u.then(f[p++],f[p++]);return u}m=d.length;let N=r;for(;p<m;){const f=d[p++],h=d[p++];try{N=f(N)}catch(j){h.call(this,j);break}}try{u=Su.call(this,N)}catch(f){return Promise.reject(f)}for(p=0,m=c.length;p<m;)u=u.then(c[p++],c[p++]);return u}getUri(t){t=cr(this.defaults,t);const r=wh(t.baseURL,t.url,t.allowAbsoluteUrls);return yh(r,t.params,t.paramsSerializer)}};z.forEach(["delete","get","head","options"],function(t){rr.prototype[t]=function(r,n){return this.request(cr(n||{},{method:t,url:r,data:(n||{}).data}))}});z.forEach(["post","put","patch"],function(t){function r(n){return function(i,l,d){return this.request(cr(d||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:l}))}}rr.prototype[t]=r(),rr.prototype[t+"Form"]=r(!0)});let Wy=class Ph{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const n=this;this.promise.then(s=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](s);n._listeners=null}),this.promise.then=s=>{let i;const l=new Promise(d=>{n.subscribe(d),i=d}).then(s);return l.cancel=function(){n.unsubscribe(i)},l},t(function(i,l,d){n.reason||(n.reason=new ss(i,l,d),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=n=>{t.abort(n)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new Ph(function(s){t=s}),cancel:t}}};function Hy(e){return function(r){return e.apply(null,r)}}function Ky(e){return z.isObject(e)&&e.isAxiosError===!0}const Mo={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Mo).forEach(([e,t])=>{Mo[t]=e});function Ah(e){const t=new rr(e),r=lh(rr.prototype.request,t);return z.extend(r,rr.prototype,t,{allOwnKeys:!0}),z.extend(r,t,null,{allOwnKeys:!0}),r.create=function(s){return Ah(cr(e,s))},r}const Qe=Ah(ns);Qe.Axios=rr;Qe.CanceledError=ss;Qe.CancelToken=Wy;Qe.isCancel=jh;Qe.VERSION=Eh;Qe.toFormData=Hi;Qe.AxiosError=ge;Qe.Cancel=Qe.CanceledError;Qe.all=function(t){return Promise.all(t)};Qe.spread=Hy;Qe.isAxiosError=Ky;Qe.mergeConfig=cr;Qe.AxiosHeaders=St;Qe.formToJSON=e=>bh(z.isHTMLForm(e)?new FormData(e):e);Qe.getAdapter=kh.getAdapter;Qe.HttpStatusCode=Mo;Qe.default=Qe;const{Axios:gb,AxiosError:yb,CanceledError:vb,isCancel:bb,CancelToken:jb,VERSION:Nb,all:wb,Cancel:Cb,isAxiosError:Sb,spread:kb,toFormData:Eb,AxiosHeaders:Pb,HttpStatusCode:Ab,formToJSON:Tb,getAdapter:Lb,mergeConfig:Ib}=Qe;new Date().toISOString();const Q=e=>new Date(Date.now()-e*864e5).toISOString(),Be=[{id:"org-001",name:"Amaznia Madeiras Sustentveis",type:"supplier",legalName:"Amaznia Madeiras Sustentveis Ltda.",registrationNumber:"12.345.678/0001-90",vatNumber:"BR12345678000190",vatCountry:"BR",domain:"amazoniamadeiras.com.br",address:{street:"Rua das Seringueiras 450",city:"Manaus",region:"Amazonas",country:"BR",postalCode:"69000-000"},contactInfo:{email:"export@amazoniamadeiras.com.br",phone:"+55 92 3232-4500",website:"https://amazoniamadeiras.com.br"},signingKeyPublic:"did:web:amazoniamadeiras.com.br#key-1",signingKeyPrivate:null,createdAt:Q(400),updatedAt:Q(10)},{id:"org-002",name:"Van den Berg Meubels",type:"manufacturer",legalName:"Van den Berg Meubels B.V.",registrationNumber:"KVK 87654321",vatNumber:"NL876543210B01",vatCountry:"NL",domain:"vandenbergmeubels.nl",address:{street:"Meubelstraat 12",city:"Eindhoven",region:"Noord-Brabant",country:"NL",postalCode:"5611 AB"},contactInfo:{email:"info@vandenbergmeubels.nl",phone:"+31 40 123 4567",website:"https://vandenbergmeubels.nl"},signingKeyPublic:"did:web:vandenbergmeubels.nl#key-1",signingKeyPrivate:null,createdAt:Q(350),updatedAt:Q(5)},{id:"org-003",name:"GreenCert Europe",type:"certifier",legalName:"GreenCert Europe GmbH",registrationNumber:"HRB 123456",vatNumber:"DE123456789",vatCountry:"DE",domain:"greencert.eu",address:{street:"Zertifizierungsweg 8",city:"Berlin",region:"Berlin",country:"DE",postalCode:"10115"},contactInfo:{email:"verify@greencert.eu",phone:"+49 30 555 1234",website:"https://greencert.eu"},signingKeyPublic:"did:web:greencert.eu#key-1",signingKeyPrivate:null,createdAt:Q(500),updatedAt:Q(30)}],aa=[{id:"mat-001",materialType:"wood",materialSubtype:"hardwood",name:"Ip (Tabebuia spp.)",description:"Premium Brazilian hardwood prized for exceptional durability and rich brown color. Sustainably harvested from certified concessions in Amazonas state under IBAMA management plan.",quantity:2400,unitOfMeasure:"kg",batchNumber:"AMS-2025-IPE-047",extractionDate:Q(120),originCountry:"BR",originRegion:"Amazonas",originAddress:{street:"Reserva Florestal Uatum",city:"Presidente Figueiredo",region:"Amazonas",country:"BR",postalCode:"69735-000"},geoLocation:{lat:-2.0333,lng:-59.3833,address:"Reserva Florestal Uatum, AM, Brazil"},sourceNodeId:"node-001",supplierOrganizationId:"org-001",custodyModel:"identity_preserved",intendedProductCategories:["furniture"],status:"verified",attributes:{species:"Tabebuia spp.",density:1050,moistureContent:12,grade:"A",fscCertified:!0,citesListed:!1},categoryAttributes:{esprCompliant:!0,deforestationFree:!0,eudrDueDiligence:"completed"},environmentalData:{carbonFootprintKg:180,energyConsumptionKwh:95,waterUsageLiters:320,wasteGeneratedKg:48,renewableEnergyPercent:70,emissionScope:"scope_1",calculationMethod:"ISO 14067",verificationStatus:"third_party_verified"},notes:"Harvested under PMFS (Plano de Manejo Florestal Sustentvel) approved by IBAMA.",verifications:[],createdAt:Q(120),updatedAt:Q(15)},{id:"mat-002",materialType:"wood",materialSubtype:"hardwood",name:"Cumaru (Dipteryx odorata)",description:'Dense Brazilian hardwood known as "Brazilian Teak". Excellent weather resistance and warm golden-brown tones. Sustainably sourced from community-managed forest in Par.',quantity:1800,unitOfMeasure:"kg",batchNumber:"AMS-2025-CUM-032",extractionDate:Q(95),originCountry:"BR",originRegion:"Par",originAddress:{street:"Floresta Nacional do Tapajs",city:"Belterra",region:"Par",country:"BR",postalCode:"68143-000"},geoLocation:{lat:-3.3167,lng:-55.0167,address:"FLONA Tapajs, PA, Brazil"},sourceNodeId:"node-002",supplierOrganizationId:"org-001",custodyModel:"identity_preserved",intendedProductCategories:["furniture"],status:"verified",attributes:{species:"Dipteryx odorata",density:1100,moistureContent:11,grade:"A",fscCertified:!0,citesListed:!1},categoryAttributes:{esprCompliant:!0,deforestationFree:!0,eudrDueDiligence:"completed"},environmentalData:{carbonFootprintKg:165,energyConsumptionKwh:88,waterUsageLiters:290,wasteGeneratedKg:40,renewableEnergyPercent:75,emissionScope:"scope_1",calculationMethod:"ISO 14067",verificationStatus:"third_party_verified"},notes:"Community-managed forest concession. Fair trade premium paid.",verifications:[],createdAt:Q(95),updatedAt:Q(12)},{id:"mat-003",materialType:"wood",materialSubtype:"hardwood",name:"Jatob (Hymenaea courbaril)",description:"Brazilian Cherry hardwood with striking reddish-brown coloring. Extremely hard and durable, ideal for structural furniture components.",quantity:1200,unitOfMeasure:"kg",batchNumber:"AMS-2025-JAT-019",extractionDate:Q(80),originCountry:"BR",originRegion:"Mato Grosso",originAddress:{street:"Reserva Extrativista Guariba-Roosevelt",city:"Colniza",region:"Mato Grosso",country:"BR",postalCode:"78335-000"},geoLocation:{lat:-9.4667,lng:-59.2333,address:"RESEX Guariba-Roosevelt, MT, Brazil"},sourceNodeId:"node-003",supplierOrganizationId:"org-001",custodyModel:"segregated",intendedProductCategories:["furniture"],status:"verified",attributes:{species:"Hymenaea courbaril",density:910,moistureContent:13,grade:"B+",fscCertified:!0,citesListed:!1},categoryAttributes:{esprCompliant:!0,deforestationFree:!0,eudrDueDiligence:"completed"},environmentalData:{carbonFootprintKg:145,energyConsumptionKwh:78,waterUsageLiters:260,wasteGeneratedKg:35,renewableEnergyPercent:65,emissionScope:"scope_1",calculationMethod:"ISO 14067",verificationStatus:"self_declared"},notes:"Extractive reserve  indigenous community partnership.",verifications:[],createdAt:Q(80),updatedAt:Q(18)}],dr=[{id:"xfr-001",materialId:"mat-001",fromOrganizationId:"org-001",toOrganizationId:"org-002",transferType:"standard",status:"received",quantity:2400,unitOfMeasure:"kg",departureDate:Q(90),arrivalDate:Q(75),transportMode:"sea",carrier:"Maersk Line",trackingNumber:"MAEU1234567",material:aa[0],fromOrganization:Be[0],toOrganization:Be[1],createdAt:Q(92),updatedAt:Q(75)},{id:"xfr-002",materialId:"mat-002",fromOrganizationId:"org-001",toOrganizationId:"org-002",transferType:"standard",status:"received",quantity:1800,unitOfMeasure:"kg",departureDate:Q(85),arrivalDate:Q(70),transportMode:"sea",carrier:"MSC",trackingNumber:"MSCU7654321",material:aa[1],fromOrganization:Be[0],toOrganization:Be[1],createdAt:Q(87),updatedAt:Q(70)}],nt=[{id:"batch-001",batchNumber:"VDB-2025-FUR-001",productionType:"manufacturing",status:"completed",organizationId:"org-002",startDate:Q(60),endDate:Q(30),inputs:[{materialId:"mat-001",quantity:800,unitOfMeasure:"kg"},{materialId:"mat-002",quantity:600,unitOfMeasure:"kg"}],outputs:[{productId:"prod-001",quantity:1},{productId:"prod-002",quantity:1},{productId:"prod-003",quantity:1}],processType:"Artisan Furniture Manufacturing",processDescription:"Kiln drying, CNC cutting, hand assembly, and natural oil finishing of Brazilian hardwood furniture.",facilityLocation:{city:"Eindhoven",country:"NL"},facilityGln:"8712345678901",carbonFootprintPerUnit:42.5,energyUsageKwh:380,renewableEnergyPercentage:85,waterUsageLiters:120,espr:{durability:{expectedLifespanYears:25,guaranteePeriodMonths:60,technicalLifespanCycles:5e4},repairability:{score:8,repairManualAvailable:!0,repairManualUrl:"https://vandenbergmeubels.nl/manuals/vdb-fur-001",sparePartsAvailable:!0,sparePartsUrl:"https://vandenbergmeubels.nl/parts",sparePartsAvailabilityYears:15,sparePartsDeliveryDays:5},recyclability:{isRecyclable:!0,recyclablePercentage:92,recyclabilityInfoAvailable:!0,recyclabilityInfoUrl:"https://vandenbergmeubels.nl/recycling",hasRecycledContent:!1,recycledContentPercentage:0,recycledContentInfoAvailable:!1,recycledContentInfoUrl:""},hazardousSubstances:{containsHazardous:!1,substances:"",reachCompliant:!0,rohsCompliant:!0},packaging:{type:"Recycled cardboard + cornstarch peanuts",weight:4.2,recyclablePercentage:100},endOfLife:{disposalInstructions:"Separate wood components from metal fasteners. Wood is compostable or recyclable.",recyclingInstructions:"Remove metal hardware. Wood can be chipped for biomass or composting.",takeBackProgram:!0,takeBackUrl:"https://vandenbergmeubels.nl/take-back"},energyEfficiency:{class:"A",annualConsumption:0,standbyPower:0}},organization:Be[1],createdAt:Q(62),updatedAt:Q(30)}],zt=[{id:"prod-001",name:"Floresta Dining Table",description:"A stunning 8-seat dining table crafted from sustainably harvested Ip hardwood. The tabletop features book-matched planks with natural edge details, supported by a sculptural Cumaru base. Each piece celebrates the natural grain patterns of Brazilian old-growth forest.",sku:"VDB-TBL-IPE-001",serialNumber:"SN-2025-001-0001",gtin:"87123456789012",brand:"Van den Berg",model:"Floresta Collection",category:"table",productType:"Dining Table",manufacturerId:"org-002",productionBatchId:"batch-001",dppId:"dpp-floresta-table-001",status:"active",weightKg:85,dimensions:{lengthCm:240,widthCm:110,heightCm:76},expectedLifespanYears:25,warrantyYears:5,repairabilityScore:8,repairInstructions:"Surface scratches: sand with 220-grit and reapply natural oil. Loose joints: tighten with Allen key (included). Replacement legs and extension leaves available.",recyclabilityInfo:"92% recyclable. Solid wood components can be repurposed, composted, or used as biomass.",disassemblyInstructions:"Remove 8 leg bolts (10mm Allen key). Separate tabletop from base frame. All fasteners are stainless steel  separate for metal recycling.",hazardousMaterials:"None. Finished with food-safe natural tung oil.",metadata:{did:"did:web:vandenbergmeubels.nl:products:prod-001",carbonFootprintKg:42.5,environmentalData:{energyUsageKwh:128,renewableEnergyPercentage:85,waterUsageLiters:45},espr:nt[0].espr,inputMaterials:[{name:"Ip (Tabebuia spp.)",quantity:55,unit:"kg",materialId:"mat-001"},{name:"Cumaru (Dipteryx odorata)",quantity:30,unit:"kg",materialId:"mat-002"}],wasteMaterial:{type:"Wood shavings & sawdust",quantity:12,unit:"kg"},recyclableMaterial:{type:"Solid wood offcuts",quantity:8,unit:"kg"},processType:"Artisan Furniture Manufacturing",processDescription:"Kiln-dried, CNC-cut, hand-assembled, and finished with natural tung oil.",facilityLocation:"Eindhoven, Netherlands",facilityGln:"8712345678901"},createdAt:Q(28),updatedAt:Q(3),productionBatch:nt[0],manufacturer:Be[1]},{id:"prod-002",name:"Canopy Lounge Chair",description:"An ergonomic lounge chair blending Cumaru warmth with modern Dutch design. Steam-bent backrest follows the natural curve of the wood, paired with a hand-woven organic cotton seat. Designed for decades of comfort.",sku:"VDB-CHR-CUM-001",serialNumber:"SN-2025-001-0002",gtin:"87123456789029",brand:"Van den Berg",model:"Canopy Collection",category:"chair",productType:"Lounge Chair",manufacturerId:"org-002",productionBatchId:"batch-001",dppId:"dpp-canopy-chair-001",status:"active",weightKg:12,dimensions:{lengthCm:75,widthCm:72,heightCm:95},expectedLifespanYears:20,warrantyYears:5,repairabilityScore:9,repairInstructions:"Seat cushion: replaceable (standard size). Frame joints: tighten with provided Allen key. Wood surface: re-oil annually with tung oil for best results.",recyclabilityInfo:"95% recyclable. Wood frame fully recyclable, cotton seat compostable.",disassemblyInstructions:"Remove 4 seat bolts. Detach backrest (2 bolts). Separate cotton seat from frame. All wood components are solid  no laminates.",hazardousMaterials:"None.",metadata:{did:"did:web:vandenbergmeubels.nl:products:prod-002",carbonFootprintKg:18.3,environmentalData:{energyUsageKwh:52,renewableEnergyPercentage:85,waterUsageLiters:18},espr:nt[0].espr,inputMaterials:[{name:"Cumaru (Dipteryx odorata)",quantity:8,unit:"kg",materialId:"mat-002"}],wasteMaterial:{type:"Wood shavings",quantity:3,unit:"kg"},recyclableMaterial:{type:"Solid wood offcuts",quantity:2,unit:"kg"},processType:"Artisan Furniture Manufacturing",processDescription:"Steam-bent frame, hand-assembled, natural oil finish.",facilityLocation:"Eindhoven, Netherlands",facilityGln:"8712345678901"},createdAt:Q(26),updatedAt:Q(2),productionBatch:nt[0],manufacturer:Be[1]},{id:"prod-003",name:"Razes Bookshelf",description:"A modular bookshelf system inspired by the layered canopy of the Amazon rainforest. Built from Jatob (Brazilian Cherry) with its distinctive reddish hue, featuring adjustable shelves and hidden cable management.",sku:"VDB-SHF-JAT-001",serialNumber:"SN-2025-001-0003",gtin:"87123456789036",brand:"Van den Berg",model:"Razes Collection",category:"other",productType:"Bookshelf",manufacturerId:"org-002",productionBatchId:"batch-001",dppId:"dpp-raizes-shelf-001",status:"active",weightKg:45,dimensions:{lengthCm:180,widthCm:35,heightCm:200},expectedLifespanYears:30,warrantyYears:5,repairabilityScore:9,repairInstructions:"Shelves are individually replaceable. Wall-mounting hardware included. Surface maintenance: light sanding and re-oiling every 2-3 years.",recyclabilityInfo:"94% recyclable. Solid Jatob wood  fully reusable or recyclable.",disassemblyInstructions:"Remove shelves by lifting out of dados. Side panels detach via 6 cam locks. All components flat-pack for transport.",hazardousMaterials:"None. Water-based natural finish.",metadata:{did:"did:web:vandenbergmeubels.nl:products:prod-003",carbonFootprintKg:35.8,environmentalData:{energyUsageKwh:96,renewableEnergyPercentage:85,waterUsageLiters:32},espr:nt[0].espr,inputMaterials:[{name:"Jatob (Hymenaea courbaril)",quantity:38,unit:"kg",materialId:"mat-003"}],wasteMaterial:{type:"Sawdust & offcuts",quantity:7,unit:"kg"},recyclableMaterial:{type:"Solid wood offcuts",quantity:5,unit:"kg"},processType:"Artisan Furniture Manufacturing",processDescription:"CNC precision-cut, dado-jointed, natural water-based finish.",facilityLocation:"Eindhoven, Netherlands",facilityGln:"8712345678901"},createdAt:Q(24),updatedAt:Q(1),productionBatch:nt[0],manufacturer:Be[1]}],is=[{id:"cat-001",name:"Furniture",description:"Indoor and outdoor furniture products",parentId:null,createdAt:Q(400),updatedAt:Q(100)},{id:"cat-002",name:"Tables",description:"Dining, coffee, and side tables",parentId:"cat-001",createdAt:Q(400),updatedAt:Q(100)},{id:"cat-003",name:"Seating",description:"Chairs, benches, and stools",parentId:"cat-001",createdAt:Q(400),updatedAt:Q(100)},{id:"cat-004",name:"Storage",description:"Shelves, cabinets, and wardrobes",parentId:"cat-001",createdAt:Q(400),updatedAt:Q(100)}],Eu={admin:{products:["read","create","update","delete"],materials:["read","create","update","delete"],transfers:["read","create","update","delete"],production:["read","create","update","delete"],organizations:["read","create","update","delete"],credentials:["read","create","update","delete"],audit:["read"],users:["read","create","update","delete"]},operator:{products:["read","update"],materials:["read"],transfers:["read"],production:["read"],organizations:["read"],credentials:["read"],audit:["read"],users:["read"]},auditor:{products:["read"],materials:["read"],transfers:["read"],production:["read"],organizations:["read"],credentials:["read"],audit:["read"],users:["read"]},viewer:{products:["read"],materials:["read"],transfers:["read"],production:["read"],organizations:["read"],credentials:["read"],audit:[],users:[]}};function Xa(e){return{id:`user-demo-${e}`,displayName:`Demo ${e.charAt(0).toUpperCase()+e.slice(1)}`,walletAddress:`0xDEMO${e.toUpperCase()}000000000000000000000000`,role:{name:e,permissions:Eu[e]||Eu.viewer}}}const Gi=[{...Xa("admin"),isActive:!0,createdAt:Q(300),updatedAt:Q(1)},{...Xa("operator"),isActive:!0,createdAt:Q(200),updatedAt:Q(5)},{...Xa("auditor"),isActive:!0,createdAt:Q(150),updatedAt:Q(10)},{...Xa("viewer"),isActive:!0,createdAt:Q(100),updatedAt:Q(20)}],Gy=[{name:"admin",description:"Full system access"},{name:"operator",description:"Product operations and repair"},{name:"auditor",description:"Read-only with audit access"},{name:"viewer",description:"Read-only basic access"}],hr=[{id:"cred-001",credentialId:"urn:uuid:dpp-floresta-table-001-vc",type:"dpp",status:"active",issuerId:"org-002",subjectId:"prod-001",subjectType:"product",credential:{"@context":["https://www.w3.org/2018/credentials/v1","https://untp.org/dpp/v1"],type:["VerifiableCredential","DigitalProductPassport"],issuer:{id:"did:web:vandenbergmeubels.nl"},credentialSubject:{id:"did:web:vandenbergmeubels.nl:products:prod-001",name:"Floresta Dining Table"}},issuedAt:Q(20),expiresAt:new Date(Date.now()+365*864e5).toISOString(),revokedAt:null,revocationReason:null},{id:"cred-002",credentialId:"urn:uuid:dpp-canopy-chair-001-vc",type:"dpp",status:"active",issuerId:"org-002",subjectId:"prod-002",subjectType:"product",credential:{"@context":["https://www.w3.org/2018/credentials/v1","https://untp.org/dpp/v1"],type:["VerifiableCredential","DigitalProductPassport"],issuer:{id:"did:web:vandenbergmeubels.nl"},credentialSubject:{id:"did:web:vandenbergmeubels.nl:products:prod-002",name:"Canopy Lounge Chair"}},issuedAt:Q(18),expiresAt:new Date(Date.now()+365*864e5).toISOString(),revokedAt:null,revocationReason:null},{id:"cred-003",credentialId:"urn:uuid:dcc-fsc-cert-vc",type:"dcc",status:"active",issuerId:"org-003",subjectId:"org-001",subjectType:"organization",credential:{"@context":["https://www.w3.org/2018/credentials/v1","https://untp.org/dcc/v1"],type:["VerifiableCredential","DigitalConformityCredential"],issuer:{id:"did:web:greencert.eu"},credentialSubject:{id:"did:web:amazoniamadeiras.com.br",certification:"FSC Chain of Custody"}},issuedAt:Q(200),expiresAt:new Date(Date.now()+180*864e5).toISOString(),revokedAt:null,revocationReason:null}],Kr=[{id:"aud-001",action:"CREATE",entityType:"material",entityId:"mat-001",userId:"user-demo-admin",details:"Created material: Ip (Tabebuia spp.)",createdAt:Q(120)},{id:"aud-002",action:"CREATE",entityType:"material",entityId:"mat-002",userId:"user-demo-admin",details:"Created material: Cumaru (Dipteryx odorata)",createdAt:Q(95)},{id:"aud-003",action:"CREATE",entityType:"transfer",entityId:"xfr-001",userId:"user-demo-admin",details:"Created transfer: Ip to Van den Berg Meubels",createdAt:Q(92)},{id:"aud-004",action:"UPDATE",entityType:"transfer",entityId:"xfr-001",userId:"user-demo-admin",details:"Transfer received",createdAt:Q(75)},{id:"aud-005",action:"CREATE",entityType:"production",entityId:"batch-001",userId:"user-demo-admin",details:"Created production batch VDB-2025-FUR-001",createdAt:Q(62)},{id:"aud-006",action:"UPDATE",entityType:"production",entityId:"batch-001",userId:"user-demo-admin",details:"Production batch completed",createdAt:Q(30)},{id:"aud-007",action:"CREATE",entityType:"product",entityId:"prod-001",userId:"user-demo-admin",details:"Created product: Floresta Dining Table",createdAt:Q(28)},{id:"aud-008",action:"CREATE",entityType:"product",entityId:"prod-002",userId:"user-demo-admin",details:"Created product: Canopy Lounge Chair",createdAt:Q(26)},{id:"aud-009",action:"CREATE",entityType:"product",entityId:"prod-003",userId:"user-demo-admin",details:"Created product: Razes Bookshelf",createdAt:Q(24)},{id:"aud-010",action:"CREATE",entityType:"credential",entityId:"cred-001",userId:"user-demo-admin",details:"Issued DPP credential for Floresta Dining Table",createdAt:Q(20)}];function qy(e){const t=e.metadata.inputMaterials[0],r=aa.find(n=>n.id===t.materialId)||aa[0];return{dppId:e.dppId,did:e.metadata.did,product:e,manufacturer:Be[1],production:{facility:{location:nt[0].facilityLocation,gln:nt[0].facilityGln},productionDate:nt[0].endDate,batchNumber:nt[0].batchNumber,sequenceNumber:zt.indexOf(e)+1,totalInBatch:zt.length},environmental:{carbonFootprint:{perUnit:e.metadata.carbonFootprintKg,unit:"kgCO2e"},energy:{usage:e.metadata.environmentalData.energyUsageKwh,unit:"kWh",renewablePercentage:e.metadata.environmentalData.renewableEnergyPercentage},water:{usage:e.metadata.environmentalData.waterUsageLiters,unit:"liters"}},espr:e.metadata.espr,materials:{inputs:e.metadata.inputMaterials,waste:e.metadata.wasteMaterial,recyclable:e.metadata.recyclableMaterial},supplyChain:{harvest:{region:r.originRegion+", "+r.originCountry,species:r.attributes.species,date:r.extractionDate},verification:{species:r.attributes.species,confidence:.98,method:"DNA barcode analysis",date:Q(100)},shipping:{origin:"Manaus, Brazil",destination:"Rotterdam, Netherlands",departed:dr[0].departureDate,arrived:dr[0].arrivalDate},manufacturing:{facility:"Van den Berg Meubels",location:"Eindhoven, Netherlands",completed:nt[0].endDate}},modules:{1:{number:1,name:"Product Identity",content:{name:e.name,sku:e.sku,gtin:e.gtin,brand:e.brand,model:e.model}},2:{number:2,name:"Origin & Traceability",content:{originCountry:r.originCountry,originRegion:r.originRegion,supplier:Be[0].name,custodyModel:r.custodyModel}},3:{number:3,name:"Sustainability & Environment",content:{carbonFootprint:e.metadata.carbonFootprintKg,renewableEnergy:e.metadata.environmentalData.renewableEnergyPercentage,deforestationFree:!0}},4:{number:4,name:"Durability & Repair",content:{lifespan:e.expectedLifespanYears,repairabilityScore:e.repairabilityScore,warranty:e.warrantyYears}},5:{number:5,name:"End of Life",content:{recyclable:e.recyclabilityInfo,disassembly:e.disassemblyInstructions}},6:{number:6,name:"Compliance",content:{espr:!0,reach:!0,rohs:!0,eudr:!0}}},score:{percentage:87,grade:"A",totalScore:261,maxPossibleScore:300,breakdown:{dataCompleteness:{filled:42,total:48,percentage:87.5},verificationCoverage:{verified:35,filled:42,percentage:83.3}}},meta:{standard:"UNTP Digital Product Passport v0.5",version:"1.0.0",updatedAt:e.updatedAt}}}const ba={};zt.forEach(e=>{ba[e.dppId]=qy(e)});const ls=[{id:"evi-001",entityType:"material",entityId:"mat-001",fieldPath:"attributes.species",evidenceType:"credential",credentialId:"cred-003",status:"active",description:"FSC Chain of Custody certification confirming species identification",createdAt:Q(100),updatedAt:Q(100)},{id:"evi-002",entityType:"material",entityId:"mat-001",fieldPath:"categoryAttributes.deforestationFree",evidenceType:"document",documentName:"IBAMA_Harvest_Permit_2025.pdf",status:"active",description:"IBAMA harvest permit confirming legal extraction from managed forest",createdAt:Q(115),updatedAt:Q(115)},{id:"evi-003",entityType:"product",entityId:"prod-001",fieldPath:"metadata.carbonFootprintKg",evidenceType:"credential",credentialId:"cred-001",status:"active",description:"Carbon footprint verified by GreenCert Europe",createdAt:Q(18),updatedAt:Q(18)}],Th=[{id:"ident-001",entityType:"product",entityId:"prod-001",scheme:"gtin",value:"87123456789012",verified:!0,createdAt:Q(28)},{id:"ident-002",entityType:"product",entityId:"prod-001",scheme:"did",value:"did:web:vandenbergmeubels.nl:products:prod-001",verified:!0,createdAt:Q(28)},{id:"ident-003",entityType:"organization",entityId:"org-001",scheme:"cnpj",value:"12.345.678/0001-90",verified:!0,createdAt:Q(400)},{id:"ident-004",entityType:"organization",entityId:"org-002",scheme:"kvk",value:"87654321",verified:!0,createdAt:Q(350)}],Qy={product:[{scheme:"gtin",name:"Global Trade Item Number",pattern:"^\\d{8,14}$"},{scheme:"did",name:"Decentralized Identifier",pattern:"^did:"},{scheme:"serial",name:"Serial Number",pattern:".*"}],organization:[{scheme:"cnpj",name:"CNPJ (Brazil)",pattern:"^\\d{2}\\.\\d{3}\\.\\d{3}/\\d{4}-\\d{2}$"},{scheme:"kvk",name:"KVK (Netherlands)",pattern:"^\\d{8}$"},{scheme:"vat",name:"VAT Number",pattern:"^[A-Z]{2}"}],material:[{scheme:"batch",name:"Batch Number",pattern:".*"}]},Wa=[{id:"cert-001",name:"FSC Chain of Custody",type:"sustainability",entityType:"organization",entityId:"org-001",issuer:"Forest Stewardship Council",issuedAt:Q(365),expiresAt:new Date(Date.now()+180*864e5).toISOString(),status:"active",certificateNumber:"FSC-C123456",createdAt:Q(365),updatedAt:Q(30)},{id:"cert-002",name:"EUDR Compliance",type:"regulatory",entityType:"organization",entityId:"org-002",issuer:"EU Deforestation Regulation Authority",issuedAt:Q(180),expiresAt:new Date(Date.now()+365*864e5).toISOString(),status:"active",certificateNumber:"EUDR-NL-2025-001",createdAt:Q(180),updatedAt:Q(60)}],qi=[{id:"loc-001",name:"Manaus Warehouse",organizationId:"org-001",type:"warehouse",address:Be[0].address,geoLocation:{lat:-3.119,lng:-60.022},createdAt:Q(400),updatedAt:Q(100)},{id:"loc-002",name:"Eindhoven Workshop",organizationId:"org-002",type:"factory",address:Be[1].address,geoLocation:{lat:51.4416,lng:5.4697},createdAt:Q(350),updatedAt:Q(50)}],Qi=[{id:"node-001",name:"Uatum Forest Concession",organizationId:"org-001",locationId:"loc-001",type:"extraction",description:"Sustainable timber extraction site",createdAt:Q(400),updatedAt:Q(100)},{id:"node-002",name:"Tapajs Community Forest",organizationId:"org-001",locationId:"loc-001",type:"extraction",description:"Community-managed extraction",createdAt:Q(400),updatedAt:Q(100)},{id:"node-003",name:"Guariba-Roosevelt Reserve",organizationId:"org-001",locationId:"loc-001",type:"extraction",description:"Indigenous partnership site",createdAt:Q(380),updatedAt:Q(100)}],os=[{id:"doc-001",name:"IBAMA Harvest Permit 2025",type:"permit",entityType:"material",entityId:"mat-001",mimeType:"application/pdf",size:245e3,createdAt:Q(120),updatedAt:Q(120)},{id:"doc-002",name:"FSC Certificate Scan",type:"certificate",entityType:"organization",entityId:"org-001",mimeType:"application/pdf",size:18e4,createdAt:Q(365),updatedAt:Q(365)},{id:"doc-003",name:"Bill of Lading - Ip Shipment",type:"shipping",entityType:"transfer",entityId:"xfr-001",mimeType:"application/pdf",size:95e3,createdAt:Q(90),updatedAt:Q(90)}],cs=[{id:"ver-001",materialId:"mat-001",type:"species_identification",method:"DNA barcode",status:"passed",verifiedBy:"org-003",confidence:.98,notes:"DNA confirms Tabebuia spp.",createdAt:Q(100),updatedAt:Q(100)},{id:"ver-002",materialId:"mat-002",type:"species_identification",method:"DNA barcode",status:"passed",verifiedBy:"org-003",confidence:.97,notes:"DNA confirms Dipteryx odorata",createdAt:Q(85),updatedAt:Q(85)}],ji=[{id:"rep-001",dppId:"dpp-floresta-table-001",operatorId:"user-demo-operator",type:"maintenance",description:"Annual tung oil re-application and surface inspection",partsUsed:[],laborHours:1.5,cost:85,currency:"EUR",status:"completed",completedAt:Q(5),createdAt:Q(6),updatedAt:Q(5)}],Yy=[{id:"sp-001",name:"Replacement Table Leg (Ip)",sku:"VDB-SP-LEG-IPE",price:120,currency:"EUR",available:!0,leadTimeDays:5},{id:"sp-002",name:"Extension Leaf (Ip, 60cm)",sku:"VDB-SP-EXT-IPE",price:280,currency:"EUR",available:!0,leadTimeDays:10},{id:"sp-003",name:"Hardware Kit (stainless steel bolts)",sku:"VDB-SP-HW-KIT",price:25,currency:"EUR",available:!0,leadTimeDays:2},{id:"sp-004",name:"Natural Tung Oil Finish (500ml)",sku:"VDB-SP-OIL-500",price:18,currency:"EUR",available:!0,leadTimeDays:2}],Jy={totalProducts:3,compliantProducts:3,complianceRate:100,averageDPPScore:87,byCategory:{table:{total:1,compliant:1},chair:{total:1,compliant:1},other:{total:1,compliant:1}},recentInspections:2,openViolations:0},B=(e,t=80)=>new Promise(r=>setTimeout(()=>r({data:e,status:200,statusText:"OK",headers:{},config:{}}),t)),Fe=e=>B(e),be=(e="Not found")=>new Promise(t=>setTimeout(()=>t({data:{error:e},status:404,statusText:"Not Found",headers:{}}),40));function gt(e,t,r="items"){const n=parseInt(t==null?void 0:t.page)||1,s=parseInt((t==null?void 0:t.limit)||(t==null?void 0:t.pageSize))||50,i=(n-1)*s,l=e.slice(i,i+s);return{[r]:de(l),pagination:{total:e.length,page:n,limit:s,pages:Math.ceil(e.length/s)},total:e.length}}function Ce(e,t){return e.find(r=>r.id===t)}function de(e){return JSON.parse(JSON.stringify(e))}const Lh=[];function O(e,t,r){Lh.push({method:e.toUpperCase(),pattern:t,handler:r})}function Zy(e,t,r){for(const n of Lh){if(n.method!==e.toUpperCase()&&n.method!=="*")continue;const s=t.match(n.pattern);if(s)return n.handler(s,r)}return null}O("POST",/^\/auth\/demo-login$/,(e,t)=>{const r=typeof t.data=="string"?JSON.parse(t.data):t.data,n=(r==null?void 0:r.role)||"viewer",s=Xa(n),i=`mock-token-${n}-${Date.now()}`;return localStorage.setItem("dpp_token",i),B({token:i,user:s})});O("GET",/^\/auth\/me$/,()=>{const e=localStorage.getItem("dpp_token");if(!e)return be("Not authenticated");const t=e.match(/mock-token-(\w+)-/),r=t?t[1]:"viewer";return B(Xa(r))});O("POST",/^\/auth\/logout$/,()=>(localStorage.removeItem("dpp_token"),B({message:"Logged out"})));O("GET",/^\/auth\/request$/,()=>B({requestId:"mock-req-001",challenge:"mock-challenge-"+Date.now()}));O("POST",/^\/auth\/verify$/,()=>{const e=Xa("admin"),t=`mock-token-admin-${Date.now()}`;return localStorage.setItem("dpp_token",t),B({token:t,user:e})});O("GET",/^\/users\/roles\/list$/,()=>B(Gy));O("GET",/^\/users\/([^/]+)$/,e=>{const t=Ce(Gi,e[1]);return t?B(de(t)):be("User not found")});O("GET",/^\/users$/,(e,t)=>B(gt(Gi,t==null?void 0:t.params,"users")));O("PATCH",/^\/users\/([^/]+)\/role$/,(e,t)=>{const r=typeof t.data=="string"?JSON.parse(t.data):t.data,n=Ce(Gi,e[1]);return n?B({...de(n),role:{name:r.role,permissions:{}}}):be()});O("PATCH",/^\/users\/([^/]+)\/(de)?activate$/,e=>{const t=Ce(Gi,e[1]);return t?B({...de(t),isActive:!e[2]}):be()});O("GET",/^\/products\/([^/]+)\/custody-chain$/,e=>{const t=Ce(zt,e[1]);return t?B({productId:t.id,chain:[{step:1,type:"harvest",actor:Be[0].name,location:"Amazonas, Brazil",date:aa[0].extractionDate},{step:2,type:"transport",actor:"Maersk Line",from:"Manaus",to:"Rotterdam",date:dr[0].departureDate},{step:3,type:"manufacturing",actor:Be[1].name,location:"Eindhoven, NL",date:nt[0].endDate}]}):be()});O("GET",/^\/products\/([^/]+)$/,e=>{const t=Ce(zt,e[1]);return t?B(de(t)):be("Product not found")});O("GET",/^\/products$/,(e,t)=>B(gt(zt,t==null?void 0:t.params,"products")));O("POST",/^\/products$/,(e,t)=>{const r=typeof t.data=="string"?JSON.parse(t.data):t.data;return Fe({id:"prod-new-"+Date.now(),...r,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})});O("PATCH",/^\/products\/([^/]+)$/,(e,t)=>{const r=Ce(zt,e[1]);if(!r)return be();const n=typeof t.data=="string"?JSON.parse(t.data):t.data;return B({...de(r),...n,updatedAt:new Date().toISOString()})});O("POST",/^\/products\/([^/]+)\/qr-code$/,e=>B({productId:e[1],qrUrl:`https://dpp.vandenbergmeubels.nl/${e[1]}`}));O("GET",/^\/dpp\/([^/]+)\/qr$/,e=>B({url:`https://dpp.vandenbergmeubels.nl/${e[1]}`,format:"url"}));O("GET",/^\/dpp\/([^/]+)\/jsonld$/,e=>{const t=ba[e[1]];return t?B({"@context":["https://www.w3.org/2018/credentials/v1","https://untp.org/dpp/v1"],type:"DigitalProductPassport",credentialSubject:t}):be()});O("GET",/^\/dpp\/([^/]+)\/verify$/,e=>ba[e[1]]?B({valid:!0,checks:{signature:"passed",expiry:"passed",revocation:"passed"}}):be());O("GET",/^\/dpp\/([^/]+)\/evidence\/(.+)$/,e=>{const t=ls.filter(r=>r.fieldPath===e[2]);return B(t.length?de(t):[])});O("GET",/^\/dpp\/([^/]+)\/evidence$/,e=>{var n,s;const t=(s=(n=Object.values(ba).find(i=>i.dppId===e[1]))==null?void 0:n.product)==null?void 0:s.id,r=ls.filter(i=>i.entityId===t||i.entityType==="product");return B({evidence:de(r),summary:{total:r.length,verified:r.filter(i=>i.status==="active").length}})});O("GET",/^\/dpp\/([^/]+)$/,e=>{const t=ba[e[1]];return t?B(de(t)):be("DPP not found")});O("GET",/^\/materials\/([^/]+)\/verifications$/,e=>{const t=cs.filter(r=>r.materialId===e[1]);return B(de(t))});O("GET",/^\/materials\/([^/]+)\/certificates$/,e=>{const t=Wa.filter(r=>r.entityType==="material"&&r.entityId===e[1]);return B(de(t))});O("GET",/^\/materials\/([^/]+)\/documents$/,e=>{const t=os.filter(r=>r.entityType==="material"&&r.entityId===e[1]);return B(de(t))});O("GET",/^\/materials\/([^/]+)\/custody-chain$/,e=>{var r;const t=Ce(aa,e[1]);return t?B({materialId:t.id,chain:[{step:1,type:"extraction",actor:Be[0].name,location:t.originRegion+", "+t.originCountry,date:t.extractionDate},{step:2,type:"verification",actor:Be[2].name,method:"DNA barcode",date:(r=cs[0])==null?void 0:r.createdAt},{step:3,type:"storage",actor:Be[0].name,location:"Manaus, BR",date:t.extractionDate}]}):be()});O("GET",/^\/materials\/([^/]+)$/,e=>{const t=Ce(aa,e[1]);return t?B(de(t)):be("Material not found")});O("GET",/^\/materials$/,(e,t)=>B(gt(aa,t==null?void 0:t.params,"materials")));O("POST",/^\/materials\/([^/]+)\/photos$/,e=>B({materialId:e[1],photos:["mock-photo-url.jpg"]}));O("POST",/^\/materials\/([^/]+)\/verifications$/,e=>Fe({id:"ver-new-"+Date.now(),materialId:e[1]}));O("POST",/^\/materials\/([^/]+)\/certificates$/,e=>Fe({id:"cert-new-"+Date.now(),entityId:e[1]}));O("POST",/^\/materials\/([^/]+)\/documents$/,e=>Fe({id:"doc-new-"+Date.now(),entityId:e[1]}));O("POST",/^\/materials$/,(e,t)=>{const r=typeof t.data=="string"?JSON.parse(t.data):t.data;return Fe({id:"mat-new-"+Date.now(),...r,createdAt:new Date().toISOString()})});O("PATCH",/^\/materials\/([^/]+)$/,(e,t)=>{const r=Ce(aa,e[1]);if(!r)return be();const n=typeof t.data=="string"?JSON.parse(t.data):t.data;return B({...de(r),...n,updatedAt:new Date().toISOString()})});O("DELETE",/^\/materials\/([^/]+)$/,()=>B({deleted:!0}));O("GET",/^\/transfers\/([^/]+)\/documents$/,e=>{const t=os.filter(r=>r.entityType==="transfer"&&r.entityId===e[1]);return B(de(t))});O("GET",/^\/transfers\/([^/]+)$/,e=>{const t=Ce(dr,e[1]);return t?B(de(t)):be("Transfer not found")});O("GET",/^\/transfers$/,(e,t)=>B(gt(dr,t==null?void 0:t.params,"transfers")));O("POST",/^\/transfers\/([^/]+)\/receive$/,e=>{const t=Ce(dr,e[1]);return t?B({...de(t),status:"received",updatedAt:new Date().toISOString()}):be()});O("POST",/^\/transfers\/([^/]+)\/documents$/,e=>Fe({id:"doc-new-"+Date.now(),entityId:e[1]}));O("POST",/^\/transfers$/,(e,t)=>{const r=typeof t.data=="string"?JSON.parse(t.data):t.data;return Fe({id:"xfr-new-"+Date.now(),...r,status:"pending",createdAt:new Date().toISOString()})});O("PATCH",/^\/transfers\/([^/]+)$/,(e,t)=>{const r=Ce(dr,e[1]);if(!r)return be();const n=typeof t.data=="string"?JSON.parse(t.data):t.data;return B({...de(r),...n,updatedAt:new Date().toISOString()})});O("GET",/^\/production\/available-materials$/,()=>B({materials:de(aa.filter(e=>e.status==="verified"))}));O("GET",/^\/production\/categories$/,()=>B(de(is)));O("GET",/^\/production\/([^/]+)\/products$/,e=>{const t=Ce(nt,e[1]);if(!t)return be();const r=zt.filter(n=>n.productionBatchId===t.id);return B(de(r))});O("GET",/^\/production\/([^/]+)$/,e=>{const t=Ce(nt,e[1]);return t?B(de(t)):be("Batch not found")});O("GET",/^\/production$/,(e,t)=>B(gt(nt,t==null?void 0:t.params,"batches")));O("POST",/^\/production\/([^/]+)\/complete$/,e=>{const t=Ce(nt,e[1]);return t?B({...de(t),status:"completed",endDate:new Date().toISOString()}):be()});O("POST",/^\/production\/([^/]+)\/quality-check$/,e=>Fe({id:"qc-"+Date.now(),batchId:e[1],result:"passed"}));O("POST",/^\/production$/,(e,t)=>{const r=typeof t.data=="string"?JSON.parse(t.data):t.data;return Fe({id:"batch-new-"+Date.now(),...r,status:"planned",createdAt:new Date().toISOString()})});O("PATCH",/^\/production\/([^/]+)$/,(e,t)=>{const r=Ce(nt,e[1]);if(!r)return be();const n=typeof t.data=="string"?JSON.parse(t.data):t.data;return B({...de(r),...n,updatedAt:new Date().toISOString()})});O("GET",/^\/organizations\/([^/]+)\/locations$/,e=>B(de(qi.filter(t=>t.organizationId===e[1]))));O("GET",/^\/organizations\/([^/]+)\/nodes$/,e=>B(de(Qi.filter(t=>t.organizationId===e[1]))));O("GET",/^\/organizations\/([^/]+)\/certificates$/,e=>B(de(Wa.filter(t=>t.entityType==="organization"&&t.entityId===e[1]))));O("POST",/^\/organizations\/([^/]+)\/certificates$/,e=>Fe({id:"cert-new-"+Date.now(),entityId:e[1]}));O("GET",/^\/organizations\/([^/]+)$/,e=>{const t=Ce(Be,e[1]);return t?B(de(t)):be("Organization not found")});O("GET",/^\/organizations$/,(e,t)=>B(gt(Be,t==null?void 0:t.params,"organizations")));O("POST",/^\/organizations$/,(e,t)=>{const r=typeof t.data=="string"?JSON.parse(t.data):t.data;return Fe({id:"org-new-"+Date.now(),...r,createdAt:new Date().toISOString()})});O("PATCH",/^\/organizations\/([^/]+)$/,(e,t)=>{const r=Ce(Be,e[1]);if(!r)return be();const n=typeof t.data=="string"?JSON.parse(t.data):t.data;return B({...de(r),...n,updatedAt:new Date().toISOString()})});O("DELETE",/^\/organizations\/([^/]+)$/,()=>B({deleted:!0}));O("GET",/^\/categories\/([^/]+)$/,e=>{const t=Ce(is,e[1]);return t?B(de(t)):be()});O("GET",/^\/categories$/,(e,t)=>B(gt(is,t==null?void 0:t.params,"categories")));O("POST",/^\/categories$/,(e,t)=>{const r=typeof t.data=="string"?JSON.parse(t.data):t.data;return Fe({id:"cat-new-"+Date.now(),...r})});O("PATCH",/^\/categories\/([^/]+)$/,(e,t)=>{const r=Ce(is,e[1]);if(!r)return be();const n=typeof t.data=="string"?JSON.parse(t.data):t.data;return B({...de(r),...n})});O("DELETE",/^\/categories\/([^/]+)$/,()=>B({deleted:!0}));O("GET",/^\/locations\/([^/]+)$/,e=>{const t=Ce(qi,e[1]);return t?B(de(t)):be()});O("GET",/^\/locations$/,(e,t)=>B(gt(qi,t==null?void 0:t.params,"locations")));O("POST",/^\/locations$/,(e,t)=>{const r=typeof t.data=="string"?JSON.parse(t.data):t.data;return Fe({id:"loc-new-"+Date.now(),...r})});O("PATCH",/^\/locations\/([^/]+)$/,(e,t)=>{const r=Ce(qi,e[1]);if(!r)return be();const n=typeof t.data=="string"?JSON.parse(t.data):t.data;return B({...de(r),...n})});O("DELETE",/^\/locations\/([^/]+)$/,()=>B({deleted:!0}));O("GET",/^\/nodes\/([^/]+)\/certificates$/,e=>B(de(Wa.filter(t=>t.entityId===e[1]))));O("POST",/^\/nodes\/([^/]+)\/certificates$/,e=>Fe({id:"cert-new-"+Date.now(),entityId:e[1]}));O("GET",/^\/nodes\/([^/]+)$/,e=>{const t=Ce(Qi,e[1]);return t?B(de(t)):be()});O("GET",/^\/nodes$/,(e,t)=>B(gt(Qi,t==null?void 0:t.params,"nodes")));O("POST",/^\/nodes$/,(e,t)=>{const r=typeof t.data=="string"?JSON.parse(t.data):t.data;return Fe({id:"node-new-"+Date.now(),...r})});O("PATCH",/^\/nodes\/([^/]+)$/,(e,t)=>{const r=Ce(Qi,e[1]);if(!r)return be();const n=typeof t.data=="string"?JSON.parse(t.data):t.data;return B({...de(r),...n})});O("DELETE",/^\/nodes\/([^/]+)$/,()=>B({deleted:!0}));O("GET",/^\/verifications\/([^/]+)$/,e=>{const t=Ce(cs,e[1]);return t?B(de(t)):be()});O("GET",/^\/verifications$/,(e,t)=>B(gt(cs,t==null?void 0:t.params,"verifications")));O("POST",/^\/verifications\/([^/]+)\/evidence$/,e=>Fe({id:"evi-new-"+Date.now(),verificationId:e[1]}));O("POST",/^\/verifications$/,(e,t)=>{const r=typeof t.data=="string"?JSON.parse(t.data):t.data;return Fe({id:"ver-new-"+Date.now(),...r})});O("PATCH",/^\/verifications\/([^/]+)$/,(e,t)=>{const r=Ce(cs,e[1]);if(!r)return be();const n=typeof t.data=="string"?JSON.parse(t.data):t.data;return B({...de(r),...n})});O("GET",/^\/documents\/entity\/([^/]+)\/([^/]+)$/,e=>{const t=os.filter(r=>r.entityType===e[1]&&r.entityId===e[2]);return B(de(t))});O("GET",/^\/documents\/([^/]+)$/,e=>{const t=Ce(os,e[1]);return t?B(de(t)):be()});O("GET",/^\/documents$/,(e,t)=>B(gt(os,t==null?void 0:t.params,"documents")));O("POST",/^\/documents$/,()=>Fe({id:"doc-new-"+Date.now()}));O("DELETE",/^\/documents\/([^/]+)$/,()=>B({deleted:!0}));O("GET",/^\/certificates\/entity\/([^/]+)\/([^/]+)$/,e=>{const t=Wa.filter(r=>r.entityType===e[1]&&r.entityId===e[2]);return B(de(t))});O("GET",/^\/certificates\/([^/]+)\/verify$/,e=>{const t=Ce(Wa,e[1]);return t?B({valid:!0,certificate:de(t)}):be()});O("GET",/^\/certificates\/([^/]+)$/,e=>{const t=Ce(Wa,e[1]);return t?B(de(t)):be()});O("GET",/^\/certificates$/,(e,t)=>B(gt(Wa,t==null?void 0:t.params,"certificates")));O("POST",/^\/certificates$/,(e,t)=>{const r=typeof t.data=="string"?JSON.parse(t.data):t.data;return Fe({id:"cert-new-"+Date.now(),...r})});O("PATCH",/^\/certificates\/([^/]+)$/,(e,t)=>{const r=Ce(Wa,e[1]);if(!r)return be();const n=typeof t.data=="string"?JSON.parse(t.data):t.data;return B({...de(r),...n})});O("DELETE",/^\/certificates\/([^/]+)$/,()=>B({deleted:!0}));O("GET",/^\/custody-chains\/([^/]+)$/,e=>B({id:e[1],chain:[]}));O("POST",/^\/credentials\/organizations\/([^/]+)\/keys$/,e=>B({organizationId:e[1],publicKey:"mock-pub-key",did:`did:web:mock:${e[1]}`}));O("GET",/^\/credentials\/organizations\/([^/]+)\/did\.json$/,e=>{const t=Ce(Be,e[1]);return B({"@context":"https://www.w3.org/ns/did/v1",id:(t==null?void 0:t.signingKeyPublic)||`did:web:mock:${e[1]}`,verificationMethod:[{id:"#key-1",type:"JsonWebKey2020",controller:`did:web:mock:${e[1]}`}]})});O("POST",/^\/credentials\/dpp\/([^/]+)$/,e=>{Ce(zt,e[1]);const t=hr.find(r=>r.subjectId===e[1]);return B(t?de(t):{id:"cred-new-"+Date.now(),type:"dpp",subjectId:e[1],status:"active"})});O("GET",/^\/credentials\/dpp\/([^/]+)$/,e=>{const t=hr.find(r=>r.type==="dpp"&&r.subjectId===e[1]);return t?B(de(t)):be()});O("POST",/^\/credentials\/dcc\/([^/]+)$/,e=>B({id:"cred-dcc-"+Date.now(),type:"dcc",subjectId:e[1],status:"active"}));O("GET",/^\/credentials\/dcc\/([^/]+)$/,e=>{const t=hr.find(r=>r.type==="dcc"&&r.subjectId===e[1]);return t?B(de(t)):be()});O("POST",/^\/credentials\/dte\/transformation\/([^/]+)$/,e=>B({id:"dte-t-"+Date.now(),eventType:"transformation",subjectId:e[1]}));O("POST",/^\/credentials\/dte\/transaction\/([^/]+)$/,e=>B({id:"dte-tx-"+Date.now(),eventType:"transaction",subjectId:e[1]}));O("POST",/^\/credentials\/dte\/object\/([^/]+)$/,e=>B({id:"dte-o-"+Date.now(),eventType:"object",subjectId:e[1]}));O("GET",/^\/credentials\/dte\/([^/]+)\/([^/]+)$/,()=>be("DTE not found"));O("POST",/^\/credentials\/verify$/,()=>B({verified:!0,checks:{signature:"passed",expiry:"passed",revocation:"passed"}}));O("POST",/^\/credentials\/issue\/dpp\/([^/]+)$/,e=>{const t=hr.find(r=>r.type==="dpp"&&r.subjectId===e[1]);return B(t?de(t):{id:"cred-new-"+Date.now(),type:"dpp",subjectId:e[1],status:"active"})});O("POST",/^\/credentials\/([^/]+)\/revoke$/,e=>{const t=Ce(hr,e[1]);return t?B({...de(t),status:"revoked",revokedAt:new Date().toISOString()}):be()});O("GET",/^\/credentials\/([^/]+)$/,e=>{const t=Ce(hr,e[1]);return t?B(de(t)):be()});O("GET",/^\/credentials$/,(e,t)=>B(gt(hr,t==null?void 0:t.params,"credentials")));O("GET",/^\/identifiers\/schemes$/,(e,t)=>{var n;const r=((n=t==null?void 0:t.params)==null?void 0:n.entityType)||"product";return B(Qy[r]||[])});O("GET",/^\/identifiers\/([^/]+)\/([^/]+)$/,e=>{const t=Th.filter(r=>r.entityType===e[1]&&r.entityId===e[2]);return B(de(t))});O("POST",/^\/identifiers\/([^/]+)\/([^/]+)$/,(e,t)=>{const r=typeof t.data=="string"?JSON.parse(t.data):t.data;return Fe({id:"ident-new-"+Date.now(),entityType:e[1],entityId:e[2],...r})});O("POST",/^\/identifiers\/([^/]+)\/verify$/,()=>B({verified:!0}));O("PATCH",/^\/identifiers\/([^/]+)$/,(e,t)=>{const r=Ce(Th,e[1]);if(!r)return be();const n=typeof t.data=="string"?JSON.parse(t.data):t.data;return B({...de(r),...n})});O("DELETE",/^\/identifiers\/([^/]+)$/,()=>B({deleted:!0}));O("GET",/^\/evidence\/([^/]+)\/([^/]+)\/(.+)$/,e=>{const t=ls.filter(r=>r.entityType===e[1]&&r.entityId===e[2]&&r.fieldPath===e[3]);return B(de(t))});O("GET",/^\/evidence\/([^/]+)\/([^/]+)$/,e=>{const t=ls.filter(r=>r.entityType===e[1]&&r.entityId===e[2]);return B(de(t))});O("POST",/^\/evidence\/bulk$/,()=>Fe({added:3}));O("POST",/^\/evidence$/,(e,t)=>{const r=typeof t.data=="string"?JSON.parse(t.data):t.data instanceof FormData?{}:t.data;return Fe({id:"evi-new-"+Date.now(),...r})});O("PATCH",/^\/evidence\/([^/]+)$/,e=>{const t=Ce(ls,e[1]);return t?B(de(t)):be()});O("DELETE",/^\/evidence\/([^/]+)$/,()=>B({deleted:!0}));O("GET",/^\/audit\/stats\/summary$/,()=>B({totalActions:Kr.length,byAction:{CREATE:8,UPDATE:2},byEntity:{material:2,transfer:2,production:2,product:3,credential:1},recentActivity:de(Kr.slice(0,5))}));O("GET",/^\/audit\/entity\/([^/]+)\/([^/]+)$/,e=>{const t=Kr.filter(r=>r.entityType===e[1]&&r.entityId===e[2]);return B(de(t))});O("GET",/^\/audit\/user\/([^/]+)$/,e=>{const t=Kr.filter(r=>r.userId===e[1]);return B(de(t))});O("GET",/^\/audit\/([^/]+)$/,e=>{const t=Ce(Kr,e[1]);return t?B(de(t)):be()});O("GET",/^\/audit$/,(e,t)=>B(gt(Kr,t==null?void 0:t.params,"logs")));O("GET",/^\/.well-known\/openid-credential-issuer$/,()=>B({credential_issuer:"https://vandenbergmeubels.nl",credential_endpoint:"/api/credentials/issue",credentials_supported:[{format:"jwt_vc_json",types:["DigitalProductPassport"]}]}));O("POST",/^\/issuer\/credential-offer$/,()=>Fe({offerId:"offer-"+Date.now(),offerUrl:"openid-credential-offer://mock"}));O("GET",/^\/issuer\/offers\/([^/]+)$/,e=>B({offerId:e[1],status:"pending"}));O("GET",/^\/issuer\/my-offers$/,()=>B({offers:[]}));O("DELETE",/^\/issuer\/offers\/([^/]+)$/,()=>B({deleted:!0}));O("POST",/^\/credentials\/presentation\/request$/,()=>B({requestId:"pres-req-"+Date.now()}));O("POST",/^\/credentials\/presentation\/verify$/,()=>B({verified:!0}));O("GET",/^\/enduser\/sustainability\/([^/]+)$/,e=>{const t=ba[e[1]];return t?B({dppId:e[1],product:{name:t.product.name,brand:t.product.brand,category:t.product.category},environmental:t.environmental,espr:t.espr,score:t.score,certifications:["FSC Chain of Custody","EUDR Compliant"],supplyChain:t.supplyChain}):be()});O("POST",/^\/enduser\/compare$/,(e,t)=>{const r=typeof t.data=="string"?JSON.parse(t.data):t.data,s=((r==null?void 0:r.dppIds)||[]).map(i=>{const l=ba[i];return l?{dppId:i,name:l.product.name,brand:l.product.brand,category:l.product.category,carbonFootprint:l.environmental.carbonFootprint.perUnit,repairabilityScore:l.product.repairabilityScore,recyclablePercentage:l.espr.recyclability.recyclablePercentage,expectedLifespan:l.product.expectedLifespanYears,score:l.score.percentage,grade:l.score.grade}:null}).filter(Boolean);return B({comparisons:s})});O("GET",/^\/enduser\/search$/,(e,t)=>{var s;const r=(((s=t==null?void 0:t.params)==null?void 0:s.q)||"").toLowerCase(),n=zt.filter(i=>i.name.toLowerCase().includes(r)||i.description.toLowerCase().includes(r)||i.brand.toLowerCase().includes(r)).map(i=>({id:i.id,dppId:i.dppId,name:i.name,brand:i.brand,category:i.category,status:i.status}));return B(n)});O("GET",/^\/authority\/inspect\/([^/]+)$/,e=>{const t=ba[e[1]];return t?B({...de(t),compliance:{espr:!0,reach:!0,rohs:!0,eudr:!0},violations:[],lastInspection:new Date().toISOString()}):be()});O("POST",/^\/authority\/surveillance$/,()=>B({results:zt.map(e=>({productId:e.id,dppId:e.dppId,name:e.name,manufacturer:Be[1].name,compliance:{espr:!0,reach:!0,rohs:!0,eudr:!0},score:87,grade:"A"})),total:zt.length}));O("POST",/^\/authority\/report$/,(e,t)=>{const r=typeof t.data=="string"?JSON.parse(t.data):t.data;return(r==null?void 0:r.type)==="pdf"?B(new Blob(["mock pdf"],{type:"application/pdf"})):B({report:"mock CSV data",generated:new Date().toISOString()})});O("GET",/^\/authority\/stats$/,()=>B(de(Jy)));O("GET",/^\/authority\/manufacturers$/,()=>B(de(Be.filter(e=>e.type==="manufacturer"))));O("GET",/^\/authority\/categories$/,()=>B(de(is)));O("GET",/^\/authority\/verify-credential\/([^/]+)$/,()=>B({verified:!0}));O("GET",/^\/authority\/violations\/([^/]+)$/,()=>B([]));O("GET",/^\/operator\/repair-info\/([^/]+)$/,e=>{var n;const t=ba[e[1]];if(!t)return be();const r=t.product;return B({dppId:e[1],product:{name:r.name,brand:r.brand,model:r.model},repairInstructions:r.repairInstructions,disassemblyInstructions:r.disassemblyInstructions,repairabilityScore:r.repairabilityScore,espr:((n=t.espr)==null?void 0:n.repairability)||{},hazardousMaterials:r.hazardousMaterials,warrantyYears:r.warrantyYears})});O("GET",/^\/operator\/spare-parts\/([^/]+)$/,()=>B({parts:de(Yy)}));O("POST",/^\/operator\/repair-records\/([^/]+)$/,(e,t)=>{const r=typeof t.data=="string"?JSON.parse(t.data):t.data;return Fe({id:"rep-new-"+Date.now(),dppId:e[1],...r,status:"completed",createdAt:new Date().toISOString()})});O("GET",/^\/operator\/repair-records\/([^/]+)$/,e=>{const t=ji.filter(r=>r.dppId===e[1]);return B({records:de(t)})});O("PATCH",/^\/operator\/product-status\/([^/]+)$/,(e,t)=>{const r=typeof t.data=="string"?JSON.parse(t.data):t.data;return B({dppId:e[1],status:(r==null?void 0:r.status)||"active"})});O("GET",/^\/operator\/stats$/,()=>B({totalRepairs:ji.length,completedRepairs:ji.filter(e=>e.status==="completed").length,averageRepairTime:1.5,productsServiced:1}));O("GET",/^\/operator\/my-repair-records$/,(e,t)=>B(gt(ji,t==null?void 0:t.params,"records")));O("*",/.*/,(e,t)=>{var r;return console.warn("[MockAPI] Unmatched route:",(r=t==null?void 0:t.method)==null?void 0:r.toUpperCase(),t==null?void 0:t.url),B(null)});function Xy(e){e.defaults.adapter=async t=>{let r=t.url||"";const n=t.baseURL||"";n&&r.startsWith(n)&&(r=r.slice(n.length)),r.startsWith("/")||(r="/"+r);const s=(t.method||"GET").toUpperCase(),i=Zy(s,r,t);if(i){const l=await i;return{data:l.data,status:l.status||200,statusText:l.statusText||"OK",headers:l.headers||{},config:t,request:{}}}return{data:null,status:200,statusText:"OK",headers:{},config:t,request:{}}},console.log("%c[DPP Demo] Mock API active  no backend required","color: #10b981; font-weight: bold;")}const $=Qe.create({baseURL:"/api",timeout:3e4,headers:{"Content-Type":"application/json"}});$.interceptors.request.use(e=>{const t=localStorage.getItem("dpp_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e));$.interceptors.response.use(e=>e,e=>{var t;if(((t=e.response)==null?void 0:t.status)===401){localStorage.removeItem("dpp_token");const r="/dpp-system/login";window.location.pathname.endsWith("/login")||(window.location.href=r)}return Promise.reject(e)});const Ps={list:e=>$.get("/users",{params:e}),get:e=>$.get(`/users/${e}`),updateRole:(e,t)=>$.patch(`/users/${e}/role`,{role:t}),deactivate:e=>$.patch(`/users/${e}/deactivate`),activate:e=>$.patch(`/users/${e}/activate`),listRoles:()=>$.get("/users/roles/list")},Or={list:e=>$.get("/products",{params:e}),get:e=>$.get(`/products/${e}`),create:e=>$.post("/products",e),update:(e,t)=>$.patch(`/products/${e}`,t),regenerateQR:e=>$.post(`/products/${e}/qr-code`)},Yi={get:e=>$.get(`/dpp/${e}`),getQR:(e,t="url")=>$.get(`/dpp/${e}/qr`,{params:{format:t}}),getJsonLd:e=>$.get(`/dpp/${e}/jsonld`),verify:e=>$.get(`/dpp/${e}/verify`)},ev={list:e=>$.get("/audit",{params:e}),get:e=>$.get(`/audit/${e}`),getByEntity:(e,t,r)=>$.get(`/audit/entity/${e}/${t}`,{params:r}),getByUser:(e,t)=>$.get(`/audit/user/${e}`,{params:t}),getStats:e=>$.get("/audit/stats/summary",{params:e})},As={list:e=>$.get("/categories",{params:e}),get:e=>$.get(`/categories/${e}`),create:e=>$.post("/categories",e),update:(e,t)=>$.patch(`/categories/${e}`,t),delete:e=>$.delete(`/categories/${e}`)},Xt={list:e=>$.get("/organizations",{params:e}),get:e=>$.get(`/organizations/${e}`),create:e=>$.post("/organizations",e),update:(e,t)=>$.patch(`/organizations/${e}`,t),delete:e=>$.delete(`/organizations/${e}`),getLocations:(e,t)=>$.get(`/organizations/${e}/locations`,{params:t}),getNodes:(e,t)=>$.get(`/organizations/${e}/nodes`,{params:t}),getCertificates:(e,t)=>$.get(`/organizations/${e}/certificates`,{params:t}),addCertificate:(e,t)=>$.post(`/organizations/${e}/certificates`,t)},tv={list:e=>$.get("/nodes",{params:e}),get:e=>$.get(`/nodes/${e}`),create:e=>$.post("/nodes",e),update:(e,t)=>$.patch(`/nodes/${e}`,t),delete:e=>$.delete(`/nodes/${e}`),getCertificates:(e,t)=>$.get(`/nodes/${e}/certificates`,{params:t}),addCertificate:(e,t)=>$.post(`/nodes/${e}/certificates`,t)},$a={list:e=>$.get("/materials",{params:e}),get:e=>$.get(`/materials/${e}`),create:e=>$.post("/materials",e),update:(e,t)=>$.patch(`/materials/${e}`,t),delete:e=>$.delete(`/materials/${e}`),uploadPhotos:(e,t)=>{const r=new FormData;return t.forEach(n=>r.append("photos",n)),$.post(`/materials/${e}/photos`,r,{headers:{"Content-Type":"multipart/form-data"}})},getVerifications:(e,t)=>$.get(`/materials/${e}/verifications`,{params:t}),addVerification:(e,t)=>$.post(`/materials/${e}/verifications`,t),getCertificates:(e,t)=>$.get(`/materials/${e}/certificates`,{params:t}),addCertificate:(e,t)=>$.post(`/materials/${e}/certificates`,t),getDocuments:(e,t)=>$.get(`/materials/${e}/documents`,{params:t}),addDocument:(e,t,r)=>{const n=new FormData;return n.append("file",t),Object.entries(r).forEach(([s,i])=>{i!=null&&n.append(s,i)}),$.post(`/materials/${e}/documents`,n,{headers:{"Content-Type":"multipart/form-data"}})},getCustodyChain:e=>$.get(`/materials/${e}/custody-chain`)},er={list:e=>$.get("/transfers",{params:e}),get:e=>$.get(`/transfers/${e}`),create:e=>$.post("/transfers",e),update:(e,t)=>$.patch(`/transfers/${e}`,t),receive:(e,t)=>$.post(`/transfers/${e}/receive`,t),uploadDocument:(e,t,r)=>{const n=new FormData;return n.append("file",t),Object.entries(r||{}).forEach(([s,i])=>{i!=null&&n.append(s,i)}),$.post(`/transfers/${e}/documents`,n,{headers:{"Content-Type":"multipart/form-data"}})},getDocuments:(e,t)=>$.get(`/transfers/${e}/documents`,{params:t})},la={list:e=>$.get("/production",{params:e}),get:e=>$.get(`/production/${e}`),create:e=>$.post("/production",e),update:(e,t)=>$.patch(`/production/${e}`,t),complete:(e,t)=>$.post(`/production/${e}/complete`,t),addQualityCheck:(e,t)=>$.post(`/production/${e}/quality-check`,t),getProducts:(e,t)=>$.get(`/production/${e}/products`,{params:t}),getAvailableMaterials:()=>$.get("/production/available-materials"),getCategories:()=>$.get("/production/categories")},av={list:e=>$.get("/certificates",{params:e}),get:e=>$.get(`/certificates/${e}`),create:e=>$.post("/certificates",e),update:(e,t)=>$.patch(`/certificates/${e}`,t),delete:e=>$.delete(`/certificates/${e}`),getByEntity:(e,t,r)=>$.get(`/certificates/entity/${e}/${t}`,{params:r}),verify:e=>$.get(`/certificates/${e}/verify`)},Ze={generateKeys:e=>$.post(`/credentials/organizations/${e}/keys`),getDidDocument:e=>$.get(`/credentials/organizations/${e}/did.json`),issueDPP:(e,t)=>$.post(`/credentials/dpp/${e}`,t),getDPP:e=>$.get(`/credentials/dpp/${e}`),issueDCC:(e,t)=>$.post(`/credentials/dcc/${e}`,t),getDCC:e=>$.get(`/credentials/dcc/${e}`),issueTransformationEvent:e=>$.post(`/credentials/dte/transformation/${e}`),issueTransactionEvent:e=>$.post(`/credentials/dte/transaction/${e}`),issueObjectEvent:e=>$.post(`/credentials/dte/object/${e}`),getDTE:(e,t)=>$.get(`/credentials/dte/${e}/${t}`),verify:e=>$.post("/credentials/verify",{credential:e}),get:e=>$.get(`/credentials/${e}`),list:e=>$.get("/credentials",{params:e}),revoke:(e,t)=>$.post(`/credentials/${e}/revoke`,{reason:t})},xr={getSchemes:e=>$.get("/identifiers/schemes",{params:{entityType:e}}),list:(e,t,r)=>$.get(`/identifiers/${e}/${t}`,{params:r}),create:(e,t,r)=>$.post(`/identifiers/${e}/${t}`,r),verify:(e,t)=>$.post(`/identifiers/${e}/verify`,t||{}),update:(e,t)=>$.patch(`/identifiers/${e}`,t),delete:e=>$.delete(`/identifiers/${e}`)},kt={getByEntity:(e,t,r)=>$.get(`/evidence/${e}/${t}`,{params:r}),getByField:(e,t,r,n)=>$.get(`/evidence/${e}/${t}/${r}`,{params:n}),addCredentialEvidence:e=>$.post("/evidence",{...e,evidenceType:"credential"}),addDocumentEvidence:(e,t)=>{const r=new FormData;return r.append("permit",e),Object.entries({...t,evidenceType:"document"}).forEach(([n,s])=>{s!=null&&r.append(n,s)}),$.post("/evidence",r,{headers:{"Content-Type":"multipart/form-data"}})},bulkAdd:(e,t,r)=>$.post("/evidence/bulk",{entityType:e,entityId:t,evidence:r}),update:(e,t)=>$.patch(`/evidence/${e}`,t),delete:e=>$.delete(`/evidence/${e}`),getByDPP:(e,t)=>$.get(`/dpp/${e}/evidence`,{params:t}),getByDPPField:(e,t)=>$.get(`/dpp/${e}/evidence/${t}`)},Ih={getSustainabilityInfo:e=>$.get(`/enduser/sustainability/${e}`),compareProducts:e=>$.post("/enduser/compare",{dppIds:e}),searchProducts:e=>$.get("/enduser/search",{params:{q:e}})},An={getMetadata:()=>$.get("/.well-known/openid-credential-issuer"),createOffer:e=>$.post("/issuer/credential-offer",e),getOffer:e=>$.get(`/issuer/offers/${e}`),listMyOffers:()=>$.get("/issuer/my-offers"),cancelOffer:e=>$.delete(`/issuer/offers/${e}`),issueDPPCredential:(e,t)=>$.post(`/credentials/issue/dpp/${e}`,t),createPresentationRequest:e=>$.post("/credentials/presentation/request",e),verifyPresentation:(e,t,r)=>$.post("/credentials/presentation/verify",{presentation:e,challenge:t,domain:r})},rv={inspectDPP:e=>$.get(`/authority/inspect/${e}`),runSurveillanceQuery:e=>$.post("/authority/surveillance",e),generateReport:(e,t)=>$.post("/authority/report",{dppIds:e,type:t},{responseType:t==="pdf"?"blob":"json"}),getComplianceStats:e=>$.get("/authority/stats",{params:e}),getManufacturers:()=>$.get("/authority/manufacturers"),getProductCategories:()=>$.get("/authority/categories"),verifyCredential:e=>$.get(`/authority/verify-credential/${e}`),getViolationHistory:e=>$.get(`/authority/violations/${e}`)},Al={getRepairInfo:e=>$.get(`/operator/repair-info/${e}`),getSpareParts:e=>$.get(`/operator/spare-parts/${e}`),submitRepairRecord:(e,t)=>$.post(`/operator/repair-records/${e}`,t),getRepairHistory:e=>$.get(`/operator/repair-records/${e}`),updateProductStatus:(e,t)=>$.patch(`/operator/product-status/${e}`,{status:t}),getDashboardStats:()=>$.get("/operator/stats"),getMyRepairRecords:e=>$.get("/operator/my-repair-records",{params:e})};Xy($);const Dh=v.createContext(null);function nv({children:e}){const[t,r]=v.useState(null),[n,s]=v.useState(!0),[i,l]=v.useState(null);v.useEffect(()=>{const h=localStorage.getItem("dpp_token");h?($.defaults.headers.common.Authorization=`Bearer ${h}`,d()):s(!1)},[]);const d=async()=>{try{const h=await $.get("/auth/me");r(h.data)}catch(h){console.error("Failed to fetch user:",h),localStorage.removeItem("dpp_token"),delete $.defaults.headers.common.Authorization}finally{s(!1)}},o=async()=>{var h,j;try{return(await $.get("/auth/request")).data}catch(x){throw l(((j=(h=x.response)==null?void 0:h.data)==null?void 0:j.error)||"Failed to generate auth request"),x}},c=async(h,j,x)=>{var g,b;try{const E=await $.post("/auth/verify",{requestId:h,vpToken:j,presentationSubmission:x}),{token:y,user:w}=E.data;return localStorage.setItem("dpp_token",y),$.defaults.headers.common.Authorization=`Bearer ${y}`,r(w),l(null),w}catch(E){throw l(((b=(g=E.response)==null?void 0:g.data)==null?void 0:b.error)||"Verification failed"),E}},u=async(h="admin")=>{var j,x;try{const g=await $.post("/auth/demo-login",{role:h}),{token:b,user:E}=g.data;return localStorage.setItem("dpp_token",b),$.defaults.headers.common.Authorization=`Bearer ${b}`,r(E),l(null),E}catch(g){throw l(((x=(j=g.response)==null?void 0:j.data)==null?void 0:x.error)||"Demo login failed"),g}},p=v.useCallback(async()=>{try{await $.post("/auth/logout")}catch(h){console.error("Logout error:",h)}finally{localStorage.removeItem("dpp_token"),delete $.defaults.headers.common.Authorization,r(null)}},[]),m=v.useCallback((h,j)=>{var g;if(!((g=t==null?void 0:t.role)!=null&&g.permissions))return!1;if(t.role.name==="admin")return!0;const x=t.role.permissions[h];return(x==null?void 0:x.includes(j))||!1},[t]),N=v.useCallback((...h)=>{var j;return((j=t==null?void 0:t.role)==null?void 0:j.name)&&h.includes(t.role.name)},[t]),f={user:t,loading:n,error:i,isAuthenticated:!!t,generateAuthRequest:o,verifyWallet:c,demoLogin:u,logout:p,hasPermission:m,hasRole:N,clearError:()=>l(null)};return a.jsx(Dh.Provider,{value:f,children:e})}function Ha(){const e=v.useContext(Dh);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e}var sv=Object.defineProperty,Ni=Object.getOwnPropertySymbols,Rh=Object.prototype.hasOwnProperty,Mh=Object.prototype.propertyIsEnumerable,Pu=(e,t,r)=>t in e?sv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,iv=(e,t)=>{for(var r in t||(t={}))Rh.call(t,r)&&Pu(e,r,t[r]);if(Ni)for(var r of Ni(t))Mh.call(t,r)&&Pu(e,r,t[r]);return e},lv=(e,t)=>{var r={};for(var n in e)Rh.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&Ni)for(var n of Ni(e))t.indexOf(n)<0&&Mh.call(e,n)&&(r[n]=e[n]);return r};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var ur;(e=>{const t=class{constructor(o,c,u,p){if(this.version=o,this.errorCorrectionLevel=c,this.modules=[],this.isFunction=[],o<t.MIN_VERSION||o>t.MAX_VERSION)throw new RangeError("Version value out of range");if(p<-1||p>7)throw new RangeError("Mask value out of range");this.size=o*4+17;let m=[];for(let f=0;f<this.size;f++)m.push(!1);for(let f=0;f<this.size;f++)this.modules.push(m.slice()),this.isFunction.push(m.slice());this.drawFunctionPatterns();const N=this.addEccAndInterleave(u);if(this.drawCodewords(N),p==-1){let f=1e9;for(let h=0;h<8;h++){this.applyMask(h),this.drawFormatBits(h);const j=this.getPenaltyScore();j<f&&(p=h,f=j),this.applyMask(h)}}i(0<=p&&p<=7),this.mask=p,this.applyMask(p),this.drawFormatBits(p),this.isFunction=[]}static encodeText(o,c){const u=e.QrSegment.makeSegments(o);return t.encodeSegments(u,c)}static encodeBinary(o,c){const u=e.QrSegment.makeBytes(o);return t.encodeSegments([u],c)}static encodeSegments(o,c,u=1,p=40,m=-1,N=!0){if(!(t.MIN_VERSION<=u&&u<=p&&p<=t.MAX_VERSION)||m<-1||m>7)throw new RangeError("Invalid value");let f,h;for(f=u;;f++){const b=t.getNumDataCodewords(f,c)*8,E=d.getTotalBits(o,f);if(E<=b){h=E;break}if(f>=p)throw new RangeError("Data too long")}for(const b of[t.Ecc.MEDIUM,t.Ecc.QUARTILE,t.Ecc.HIGH])N&&h<=t.getNumDataCodewords(f,b)*8&&(c=b);let j=[];for(const b of o){n(b.mode.modeBits,4,j),n(b.numChars,b.mode.numCharCountBits(f),j);for(const E of b.getData())j.push(E)}i(j.length==h);const x=t.getNumDataCodewords(f,c)*8;i(j.length<=x),n(0,Math.min(4,x-j.length),j),n(0,(8-j.length%8)%8,j),i(j.length%8==0);for(let b=236;j.length<x;b^=253)n(b,8,j);let g=[];for(;g.length*8<j.length;)g.push(0);return j.forEach((b,E)=>g[E>>>3]|=b<<7-(E&7)),new t(f,c,g,m)}getModule(o,c){return 0<=o&&o<this.size&&0<=c&&c<this.size&&this.modules[c][o]}getModules(){return this.modules}drawFunctionPatterns(){for(let u=0;u<this.size;u++)this.setFunctionModule(6,u,u%2==0),this.setFunctionModule(u,6,u%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const o=this.getAlignmentPatternPositions(),c=o.length;for(let u=0;u<c;u++)for(let p=0;p<c;p++)u==0&&p==0||u==0&&p==c-1||u==c-1&&p==0||this.drawAlignmentPattern(o[u],o[p]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(o){const c=this.errorCorrectionLevel.formatBits<<3|o;let u=c;for(let m=0;m<10;m++)u=u<<1^(u>>>9)*1335;const p=(c<<10|u)^21522;i(p>>>15==0);for(let m=0;m<=5;m++)this.setFunctionModule(8,m,s(p,m));this.setFunctionModule(8,7,s(p,6)),this.setFunctionModule(8,8,s(p,7)),this.setFunctionModule(7,8,s(p,8));for(let m=9;m<15;m++)this.setFunctionModule(14-m,8,s(p,m));for(let m=0;m<8;m++)this.setFunctionModule(this.size-1-m,8,s(p,m));for(let m=8;m<15;m++)this.setFunctionModule(8,this.size-15+m,s(p,m));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let o=this.version;for(let u=0;u<12;u++)o=o<<1^(o>>>11)*7973;const c=this.version<<12|o;i(c>>>18==0);for(let u=0;u<18;u++){const p=s(c,u),m=this.size-11+u%3,N=Math.floor(u/3);this.setFunctionModule(m,N,p),this.setFunctionModule(N,m,p)}}drawFinderPattern(o,c){for(let u=-4;u<=4;u++)for(let p=-4;p<=4;p++){const m=Math.max(Math.abs(p),Math.abs(u)),N=o+p,f=c+u;0<=N&&N<this.size&&0<=f&&f<this.size&&this.setFunctionModule(N,f,m!=2&&m!=4)}}drawAlignmentPattern(o,c){for(let u=-2;u<=2;u++)for(let p=-2;p<=2;p++)this.setFunctionModule(o+p,c+u,Math.max(Math.abs(p),Math.abs(u))!=1)}setFunctionModule(o,c,u){this.modules[c][o]=u,this.isFunction[c][o]=!0}addEccAndInterleave(o){const c=this.version,u=this.errorCorrectionLevel;if(o.length!=t.getNumDataCodewords(c,u))throw new RangeError("Invalid argument");const p=t.NUM_ERROR_CORRECTION_BLOCKS[u.ordinal][c],m=t.ECC_CODEWORDS_PER_BLOCK[u.ordinal][c],N=Math.floor(t.getNumRawDataModules(c)/8),f=p-N%p,h=Math.floor(N/p);let j=[];const x=t.reedSolomonComputeDivisor(m);for(let b=0,E=0;b<p;b++){let y=o.slice(E,E+h-m+(b<f?0:1));E+=y.length;const w=t.reedSolomonComputeRemainder(y,x);b<f&&y.push(0),j.push(y.concat(w))}let g=[];for(let b=0;b<j[0].length;b++)j.forEach((E,y)=>{(b!=h-m||y>=f)&&g.push(E[b])});return i(g.length==N),g}drawCodewords(o){if(o.length!=Math.floor(t.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let c=0;for(let u=this.size-1;u>=1;u-=2){u==6&&(u=5);for(let p=0;p<this.size;p++)for(let m=0;m<2;m++){const N=u-m,h=(u+1&2)==0?this.size-1-p:p;!this.isFunction[h][N]&&c<o.length*8&&(this.modules[h][N]=s(o[c>>>3],7-(c&7)),c++)}}i(c==o.length*8)}applyMask(o){if(o<0||o>7)throw new RangeError("Mask value out of range");for(let c=0;c<this.size;c++)for(let u=0;u<this.size;u++){let p;switch(o){case 0:p=(u+c)%2==0;break;case 1:p=c%2==0;break;case 2:p=u%3==0;break;case 3:p=(u+c)%3==0;break;case 4:p=(Math.floor(u/3)+Math.floor(c/2))%2==0;break;case 5:p=u*c%2+u*c%3==0;break;case 6:p=(u*c%2+u*c%3)%2==0;break;case 7:p=((u+c)%2+u*c%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[c][u]&&p&&(this.modules[c][u]=!this.modules[c][u])}}getPenaltyScore(){let o=0;for(let m=0;m<this.size;m++){let N=!1,f=0,h=[0,0,0,0,0,0,0];for(let j=0;j<this.size;j++)this.modules[m][j]==N?(f++,f==5?o+=t.PENALTY_N1:f>5&&o++):(this.finderPenaltyAddHistory(f,h),N||(o+=this.finderPenaltyCountPatterns(h)*t.PENALTY_N3),N=this.modules[m][j],f=1);o+=this.finderPenaltyTerminateAndCount(N,f,h)*t.PENALTY_N3}for(let m=0;m<this.size;m++){let N=!1,f=0,h=[0,0,0,0,0,0,0];for(let j=0;j<this.size;j++)this.modules[j][m]==N?(f++,f==5?o+=t.PENALTY_N1:f>5&&o++):(this.finderPenaltyAddHistory(f,h),N||(o+=this.finderPenaltyCountPatterns(h)*t.PENALTY_N3),N=this.modules[j][m],f=1);o+=this.finderPenaltyTerminateAndCount(N,f,h)*t.PENALTY_N3}for(let m=0;m<this.size-1;m++)for(let N=0;N<this.size-1;N++){const f=this.modules[m][N];f==this.modules[m][N+1]&&f==this.modules[m+1][N]&&f==this.modules[m+1][N+1]&&(o+=t.PENALTY_N2)}let c=0;for(const m of this.modules)c=m.reduce((N,f)=>N+(f?1:0),c);const u=this.size*this.size,p=Math.ceil(Math.abs(c*20-u*10)/u)-1;return i(0<=p&&p<=9),o+=p*t.PENALTY_N4,i(0<=o&&o<=2568888),o}getAlignmentPatternPositions(){if(this.version==1)return[];{const o=Math.floor(this.version/7)+2,c=this.version==32?26:Math.ceil((this.version*4+4)/(o*2-2))*2;let u=[6];for(let p=this.size-7;u.length<o;p-=c)u.splice(1,0,p);return u}}static getNumRawDataModules(o){if(o<t.MIN_VERSION||o>t.MAX_VERSION)throw new RangeError("Version number out of range");let c=(16*o+128)*o+64;if(o>=2){const u=Math.floor(o/7)+2;c-=(25*u-10)*u-55,o>=7&&(c-=36)}return i(208<=c&&c<=29648),c}static getNumDataCodewords(o,c){return Math.floor(t.getNumRawDataModules(o)/8)-t.ECC_CODEWORDS_PER_BLOCK[c.ordinal][o]*t.NUM_ERROR_CORRECTION_BLOCKS[c.ordinal][o]}static reedSolomonComputeDivisor(o){if(o<1||o>255)throw new RangeError("Degree out of range");let c=[];for(let p=0;p<o-1;p++)c.push(0);c.push(1);let u=1;for(let p=0;p<o;p++){for(let m=0;m<c.length;m++)c[m]=t.reedSolomonMultiply(c[m],u),m+1<c.length&&(c[m]^=c[m+1]);u=t.reedSolomonMultiply(u,2)}return c}static reedSolomonComputeRemainder(o,c){let u=c.map(p=>0);for(const p of o){const m=p^u.shift();u.push(0),c.forEach((N,f)=>u[f]^=t.reedSolomonMultiply(N,m))}return u}static reedSolomonMultiply(o,c){if(o>>>8||c>>>8)throw new RangeError("Byte out of range");let u=0;for(let p=7;p>=0;p--)u=u<<1^(u>>>7)*285,u^=(c>>>p&1)*o;return i(u>>>8==0),u}finderPenaltyCountPatterns(o){const c=o[1];i(c<=this.size*3);const u=c>0&&o[2]==c&&o[3]==c*3&&o[4]==c&&o[5]==c;return(u&&o[0]>=c*4&&o[6]>=c?1:0)+(u&&o[6]>=c*4&&o[0]>=c?1:0)}finderPenaltyTerminateAndCount(o,c,u){return o&&(this.finderPenaltyAddHistory(c,u),c=0),c+=this.size,this.finderPenaltyAddHistory(c,u),this.finderPenaltyCountPatterns(u)}finderPenaltyAddHistory(o,c){c[0]==0&&(o+=this.size),c.pop(),c.unshift(o)}};let r=t;r.MIN_VERSION=1,r.MAX_VERSION=40,r.PENALTY_N1=3,r.PENALTY_N2=3,r.PENALTY_N3=40,r.PENALTY_N4=10,r.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],r.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=r;function n(o,c,u){if(c<0||c>31||o>>>c)throw new RangeError("Value out of range");for(let p=c-1;p>=0;p--)u.push(o>>>p&1)}function s(o,c){return(o>>>c&1)!=0}function i(o){if(!o)throw new Error("Assertion error")}const l=class{constructor(o,c,u){if(this.mode=o,this.numChars=c,this.bitData=u,c<0)throw new RangeError("Invalid argument");this.bitData=u.slice()}static makeBytes(o){let c=[];for(const u of o)n(u,8,c);return new l(l.Mode.BYTE,o.length,c)}static makeNumeric(o){if(!l.isNumeric(o))throw new RangeError("String contains non-numeric characters");let c=[];for(let u=0;u<o.length;){const p=Math.min(o.length-u,3);n(parseInt(o.substr(u,p),10),p*3+1,c),u+=p}return new l(l.Mode.NUMERIC,o.length,c)}static makeAlphanumeric(o){if(!l.isAlphanumeric(o))throw new RangeError("String contains unencodable characters in alphanumeric mode");let c=[],u;for(u=0;u+2<=o.length;u+=2){let p=l.ALPHANUMERIC_CHARSET.indexOf(o.charAt(u))*45;p+=l.ALPHANUMERIC_CHARSET.indexOf(o.charAt(u+1)),n(p,11,c)}return u<o.length&&n(l.ALPHANUMERIC_CHARSET.indexOf(o.charAt(u)),6,c),new l(l.Mode.ALPHANUMERIC,o.length,c)}static makeSegments(o){return o==""?[]:l.isNumeric(o)?[l.makeNumeric(o)]:l.isAlphanumeric(o)?[l.makeAlphanumeric(o)]:[l.makeBytes(l.toUtf8ByteArray(o))]}static makeEci(o){let c=[];if(o<0)throw new RangeError("ECI assignment value out of range");if(o<128)n(o,8,c);else if(o<16384)n(2,2,c),n(o,14,c);else if(o<1e6)n(6,3,c),n(o,21,c);else throw new RangeError("ECI assignment value out of range");return new l(l.Mode.ECI,0,c)}static isNumeric(o){return l.NUMERIC_REGEX.test(o)}static isAlphanumeric(o){return l.ALPHANUMERIC_REGEX.test(o)}getData(){return this.bitData.slice()}static getTotalBits(o,c){let u=0;for(const p of o){const m=p.mode.numCharCountBits(c);if(p.numChars>=1<<m)return 1/0;u+=4+m+p.bitData.length}return u}static toUtf8ByteArray(o){o=encodeURI(o);let c=[];for(let u=0;u<o.length;u++)o.charAt(u)!="%"?c.push(o.charCodeAt(u)):(c.push(parseInt(o.substr(u+1,2),16)),u+=2);return c}};let d=l;d.NUMERIC_REGEX=/^[0-9]*$/,d.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,d.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",e.QrSegment=d})(ur||(ur={}));(e=>{(t=>{const r=class{constructor(s,i){this.ordinal=s,this.formatBits=i}};let n=r;n.LOW=new r(0,1),n.MEDIUM=new r(1,0),n.QUARTILE=new r(2,3),n.HIGH=new r(3,2),t.Ecc=n})(e.QrCode||(e.QrCode={}))})(ur||(ur={}));(e=>{(t=>{const r=class{constructor(s,i){this.modeBits=s,this.numBitsCharCount=i}numCharCountBits(s){return this.numBitsCharCount[Math.floor((s+7)/17)]}};let n=r;n.NUMERIC=new r(1,[10,12,14]),n.ALPHANUMERIC=new r(2,[9,11,13]),n.BYTE=new r(4,[8,16,16]),n.KANJI=new r(8,[8,10,12]),n.ECI=new r(7,[0,0,0]),t.Mode=n})(e.QrSegment||(e.QrSegment={}))})(ur||(ur={}));var yn=ur;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var ov={L:yn.QrCode.Ecc.LOW,M:yn.QrCode.Ecc.MEDIUM,Q:yn.QrCode.Ecc.QUARTILE,H:yn.QrCode.Ecc.HIGH},cv=128,dv="L",uv="#FFFFFF",pv="#000000",mv=!1,Oh=4,hv=.1;function fv(e,t=0){const r=[];return e.forEach(function(n,s){let i=null;n.forEach(function(l,d){if(!l&&i!==null){r.push(`M${i+t} ${s+t}h${d-i}v1H${i+t}z`),i=null;return}if(d===n.length-1){if(!l)return;i===null?r.push(`M${d+t},${s+t} h1v1H${d+t}z`):r.push(`M${i+t},${s+t} h${d+1-i}v1H${i+t}z`);return}l&&i===null&&(i=d)})}),r.join("")}function xv(e,t){return e.slice().map((r,n)=>n<t.y||n>=t.y+t.h?r:r.map((s,i)=>i<t.x||i>=t.x+t.w?s:!1))}function gv(e,t,r,n){if(n==null)return null;const s=r?Oh:0,i=e.length+s*2,l=Math.floor(t*hv),d=i/t,o=(n.width||l)*d,c=(n.height||l)*d,u=n.x==null?e.length/2-o/2:n.x*d,p=n.y==null?e.length/2-c/2:n.y*d;let m=null;if(n.excavate){let N=Math.floor(u),f=Math.floor(p),h=Math.ceil(o+u-N),j=Math.ceil(c+p-f);m={x:N,y:f,w:h,h:j}}return{x:u,y:p,h:c,w:o,excavation:m}}(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})();function _c(e){const t=e,{value:r,size:n=cv,level:s=dv,bgColor:i=uv,fgColor:l=pv,includeMargin:d=mv,imageSettings:o}=t,c=lv(t,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let u=yn.QrCode.encodeText(r,ov[s]).getModules();const p=d?Oh:0,m=u.length+p*2,N=gv(u,n,d,o);let f=null;o!=null&&N!=null&&(N.excavation!=null&&(u=xv(u,N.excavation)),f=gr.createElement("image",{xlinkHref:o.src,height:N.h,width:N.w,x:N.x+p,y:N.y+p,preserveAspectRatio:"none"}));const h=fv(u,p);return gr.createElement("svg",iv({height:n,width:n,viewBox:`0 0 ${m} ${m}`},c),gr.createElement("path",{fill:i,d:`M0,0 h${m}v${m}H0z`,shapeRendering:"crispEdges"}),gr.createElement("path",{fill:l,d:h,shapeRendering:"crispEdges"}),f)}class yv{async checkWalletAvailable(){return typeof window.eudiWallet<"u"?{available:!0,type:"eudi"}:typeof window.ethereum<"u"&&window.ethereum.isWalletConnect?{available:!0,type:"walletconnect"}:{available:!1,type:null}}generateDeepLink(t){const r="openid4vp://authorize",n=new URLSearchParams({client_id:t.client_id,request_uri:t.request_uri||`${window.location.origin}/api/auth/request/${t.request_id}`});return`${r}?${n.toString()}`}async requestPresentation(t){const r=await this.checkWalletAvailable();if(!r.available)throw new Error("No compatible wallet found");if(r.type==="eudi")return this.requestEudiPresentation(t);throw new Error("Unsupported wallet type")}async requestEudiPresentation(t){try{const r=await window.eudiWallet.presentCredential({presentationDefinition:t.presentation_definition,nonce:t.nonce,state:t.state});return{vpToken:r.vpToken,presentationSubmission:r.presentationSubmission}}catch(r){throw new Error(`EUDI Wallet error: ${r.message}`)}}generateDemoToken(t,r){const n={did:t.did||`did:key:demo-${Date.now()}`,givenName:t.givenName||"Demo",familyName:t.familyName||"User",email:t.email||"demo@example.com",nonce:r};return btoa(JSON.stringify(n)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}async pollForResult(t,r=3e5,n=2e3){const s=Date.now();for(;Date.now()-s<r;)try{const l=await(await fetch(`/api/auth/request/${t}/status`)).json();if(l.status==="completed")return l.result;if(l.status==="failed")throw new Error(l.error||"Authentication failed");await new Promise(d=>setTimeout(d,n))}catch(i){if(i.message!=="Authentication failed")console.error("Poll error:",i);else throw i}throw new Error("Authentication timeout")}}const Tl=new yv;function vv({onSuccess:e}){const{generateAuthRequest:t,verifyWallet:r,error:n,clearError:s}=Ha(),[i,l]=v.useState(null),[d,o]=v.useState(!1),[c,u]=v.useState(null),[p,m]=v.useState("init");v.useEffect(()=>{N(),f()},[]);const N=async()=>{const x=await Tl.checkWalletAvailable();u(x.available)},f=async()=>{o(!0),s();try{const x=await t();l(x),m("qr")}catch(x){console.error("Failed to initiate auth:",x)}finally{o(!1)}},h=async()=>{if(!(!i||!c)){o(!0),m("waiting");try{const x=await Tl.requestPresentation(i.authRequest),g=await r(i.requestId,x.vpToken,x.presentationSubmission);e==null||e(g)}catch(x){console.error("Wallet connection failed:",x),m("qr")}finally{o(!1)}}},j=()=>{if(!i)return;const x=Tl.generateDeepLink(i.authRequest);window.location.href=x};return d&&p==="init"?a.jsx("div",{className:"flex items-center justify-center p-8",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):a.jsxs("div",{className:"space-y-6",children:[n&&a.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:n}),p==="qr"&&i&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-gray-600 mb-4",children:"Scan this QR code with your eIDAS2-compatible wallet"}),a.jsx("div",{className:"inline-block p-4 bg-white rounded-xl shadow-lg",children:a.jsx(_c,{value:i.qrCodeData,size:200,level:"M",includeMargin:!0})})]}),a.jsxs("div",{className:"flex flex-col gap-3",children:[c&&a.jsx("button",{onClick:h,disabled:d,className:"btn-primary w-full",children:d?"Connecting...":"Connect Browser Wallet"}),a.jsx("button",{onClick:j,className:"btn-secondary w-full",children:"Open in Mobile Wallet"}),a.jsx("button",{onClick:f,className:"text-sm text-gray-500 hover:text-gray-700",children:"Refresh QR Code"})]}),a.jsxs("p",{className:"text-xs text-gray-500 text-center",children:["Request expires at: ",new Date(i.expiresAt).toLocaleTimeString()]})]}),p==="waiting"&&a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Waiting for wallet confirmation..."}),a.jsx("button",{onClick:()=>m("qr"),className:"mt-4 text-sm text-gray-500 hover:text-gray-700",children:"Cancel"})]})]})}function bv(){var f,h;const e=va(),t=ya(),{demoLogin:r,error:n,clearError:s}=Ha(),[i,l]=v.useState(!1),[d,o]=v.useState(!1),[c,u]=v.useState("admin"),p=((h=(f=t.state)==null?void 0:f.from)==null?void 0:h.pathname)||"/admin",m=()=>{e(p,{replace:!0})},N=async()=>{o(!0),s();try{await r(c),e(p,{replace:!0})}catch(j){console.error("Demo login failed:",j)}finally{o(!1)}};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 to-wood-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"max-w-md w-full",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-primary-600 rounded-full mb-4",children:a.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})}),a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"DPP System"}),a.jsx("p",{className:"text-gray-600 mt-2",children:"Digital Product Passport"})]}),a.jsxs("div",{className:"card",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6 text-center",children:"Sign in with your Wallet"}),i?a.jsxs("div",{className:"space-y-4",children:[n&&a.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:n}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Select Role"}),a.jsxs("select",{value:c,onChange:j=>u(j.target.value),className:"input",children:[a.jsx("option",{value:"admin",children:"Admin - Full access"}),a.jsx("option",{value:"operator",children:"Operator - Create & edit records"}),a.jsx("option",{value:"auditor",children:"Auditor - Read-only access"}),a.jsx("option",{value:"viewer",children:"Viewer - Products only"})]})]}),a.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 text-yellow-800 px-4 py-3 rounded-lg text-sm",children:[a.jsx("strong",{children:"Demo Mode:"})," This creates a temporary user account for testing purposes."]}),a.jsx("button",{onClick:N,disabled:d,className:"btn-primary w-full",children:d?"Signing in...":`Sign in as ${c}`}),a.jsx("button",{onClick:()=>{l(!1),s()},className:"w-full text-sm text-gray-500 hover:text-gray-700",children:"Back to Wallet Login"})]}):a.jsxs(a.Fragment,{children:[a.jsx(vv,{onSuccess:m}),a.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:a.jsx("button",{onClick:()=>l(!0),className:"w-full text-sm text-gray-500 hover:text-gray-700",children:"Use Demo Login (Development)"})})]})]}),a.jsx("p",{className:"text-center text-sm text-gray-500 mt-6",children:"JTC24 Compliant Digital Product Passport System"})]})})}function jv(){const{user:e}=Ha(),[t,r]=v.useState({materials:{total:0,verified:0,pending:0},transfers:{total:0,received:0,pending:0},production:{total:0,completed:0,inProgress:0},products:{total:0,active:0,draft:0},credentials:{total:0,dpp:0,active:0}}),[n,s]=v.useState([]),[i,l]=v.useState([]),[d,o]=v.useState(!0);v.useEffect(()=>{c()},[]);const c=async()=>{var m,N,f,h,j;try{const[x,g,b,E,y]=await Promise.all([$a.list({limit:50}).catch(()=>({data:{items:[],total:0}})),er.list({limit:50}).catch(()=>({data:{items:[],total:0}})),la.list({limit:50}).catch(()=>({data:{items:[],total:0}})),Or.list({limit:50}).catch(()=>({data:{items:[],total:0}})),Ze.list({limit:50}).catch(()=>({data:{items:[],total:0}}))]),w=((m=x.data)==null?void 0:m.materials)||[],k=((N=g.data)==null?void 0:N.transfers)||[],I=((f=b.data)==null?void 0:f.batches)||[],R=((h=E.data)==null?void 0:h.products)||[],U=((j=y.data)==null?void 0:j.credentials)||[],M=w.filter(ee=>ee.status==="verified").length,L=w.filter(ee=>ee.status==="pending").length,D=k.filter(ee=>ee.status==="received").length,H=k.filter(ee=>ee.status==="pending"||ee.status==="in_transit").length,re=I.filter(ee=>ee.status==="completed").length,ie=I.filter(ee=>ee.status==="in_progress").length,he=R.filter(ee=>ee.status==="active").length,W=R.filter(ee=>ee.status==="draft").length,te=U.filter(ee=>ee.type==="dpp").length,ae=U.filter(ee=>ee.status==="active").length;r({materials:{total:w.length,verified:M,pending:L},transfers:{total:k.length,received:D,pending:H},production:{total:I.length,completed:re,inProgress:ie},products:{total:R.length,active:he,draft:W},credentials:{total:U.length,dpp:te,active:ae}});const Z=[...R].sort((ee,ne)=>new Date(ne.createdAt)-new Date(ee.createdAt));s(Z.slice(0,5));const oe=[];W>0&&oe.push({type:"warning",title:`${W} product${W>1?"s":""} in draft`,description:"These products need to be activated and issued a DPP credential.",link:"/admin/products",linkText:"View Products"}),H>0&&oe.push({type:"info",title:`${H} transfer${H>1?"s":""} pending`,description:"Transfers awaiting receipt confirmation.",link:"/admin/transfers",linkText:"View Transfers"}),L>0&&oe.push({type:"warning",title:`${L} material${L>1?"s":""} unverified`,description:"Materials pending verification  required for EUDR compliance.",link:"/admin/materials",linkText:"View Materials"});const ve=R.filter(ee=>ee.status==="active"&&!ee.dppId);ve.length>0&&oe.push({type:"error",title:`${ve.length} active product${ve.length>1?"s":""} missing DPP`,description:"Active products require a Digital Product Passport under ESPR.",link:"/admin/credentials",linkText:"Issue Credentials"}),l(oe)}catch(x){console.error("Failed to fetch dashboard data:",x)}finally{o(!1)}},u=t.products.total>0?Math.round(t.credentials.dpp/t.products.total*100):0,p=87;return d?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),a.jsxs("p",{className:"text-gray-600",children:["Welcome back",e!=null&&e.displayName?`, ${e.displayName}`:""]})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsx(Se,{to:"/admin/products",className:"card hover:shadow-md transition-shadow",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Products"}),a.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:t.products.total}),a.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[t.products.active," active",t.products.draft>0?`, ${t.products.draft} draft`:""]})]}),a.jsx("div",{className:"p-3 rounded-xl bg-blue-100 text-blue-600",children:a.jsx("svg",{className:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})})]})}),a.jsx(Se,{to:"/admin/credentials",className:"card hover:shadow-md transition-shadow",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"DPP Coverage"}),a.jsxs("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:[u,"%"]}),a.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[t.credentials.dpp,"/",t.products.total," products with DPP"]})]}),a.jsx("div",{className:`p-3 rounded-xl ${u===100?"bg-green-100 text-green-600":"bg-yellow-100 text-yellow-600"}`,children:a.jsx("svg",{className:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})})]})}),a.jsx("div",{className:"card",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Avg. DPP Score"}),a.jsxs("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:[p,"%"]}),a.jsx("p",{className:"text-sm mt-1",children:a.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-semibold bg-green-100 text-green-700",children:"Grade A"})})]}),a.jsx("div",{className:"p-3 rounded-xl bg-emerald-100 text-emerald-600",children:a.jsx("svg",{className:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})})]})}),a.jsx(Se,{to:"/admin/credentials",className:"card hover:shadow-md transition-shadow",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Active Credentials"}),a.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:t.credentials.active}),a.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[t.credentials.total," total issued"]})]}),a.jsx("div",{className:"p-3 rounded-xl bg-purple-100 text-purple-600",children:a.jsx("svg",{className:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})})})]})})]}),i.length>0?a.jsxs("div",{className:"space-y-3",children:[a.jsx("h2",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider",children:"Attention Required"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:i.map((m,N)=>a.jsx("div",{className:`rounded-lg border p-4 ${m.type==="error"?"border-red-200 bg-red-50":m.type==="warning"?"border-amber-200 bg-amber-50":"border-blue-200 bg-blue-50"}`,children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:`mt-0.5 ${m.type==="error"?"text-red-500":m.type==="warning"?"text-amber-500":"text-blue-500"}`,children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:`font-medium text-sm ${m.type==="error"?"text-red-800":m.type==="warning"?"text-amber-800":"text-blue-800"}`,children:m.title}),a.jsx("p",{className:`text-sm mt-0.5 ${m.type==="error"?"text-red-600":m.type==="warning"?"text-amber-600":"text-blue-600"}`,children:m.description})]}),m.link&&a.jsxs(Se,{to:m.link,className:`text-sm font-medium whitespace-nowrap ${m.type==="error"?"text-red-700 hover:text-red-800":m.type==="warning"?"text-amber-700 hover:text-amber-800":"text-blue-700 hover:text-blue-800"}`,children:[m.linkText," "]})]})},N))})]}):a.jsxs("div",{className:"rounded-lg border border-green-200 bg-green-50 p-4 flex items-center gap-3",children:[a.jsx("div",{className:"text-green-500",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-green-800",children:"All clear"}),a.jsx("p",{className:"text-sm text-green-600",children:"All products are compliant and up to date."})]})]}),a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Recent Products"}),a.jsx(Se,{to:"/admin/products",className:"text-sm text-primary-600 hover:text-primary-700 font-medium",children:"View All "})]}),n.length>0?a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-gray-200",children:[a.jsx("th",{className:"text-left py-2 pr-4 font-medium text-gray-500",children:"Product"}),a.jsx("th",{className:"text-left py-2 pr-4 font-medium text-gray-500",children:"SKU"}),a.jsx("th",{className:"text-left py-2 pr-4 font-medium text-gray-500",children:"Status"}),a.jsx("th",{className:"text-left py-2 pr-4 font-medium text-gray-500",children:"DPP Score"}),a.jsx("th",{className:"text-left py-2 font-medium text-gray-500",children:"Created"})]})}),a.jsx("tbody",{children:n.map(m=>a.jsxs("tr",{className:"border-b border-gray-100 last:border-0",children:[a.jsx("td",{className:"py-3 pr-4",children:a.jsx(Se,{to:`/admin/products/${m.id}`,className:"font-medium text-gray-900 hover:text-primary-600",children:m.name})}),a.jsx("td",{className:"py-3 pr-4 text-gray-500 font-mono text-xs",children:m.sku}),a.jsx("td",{className:"py-3 pr-4",children:a.jsx("span",{className:`badge ${m.status==="active"?"badge-green":m.status==="draft"?"badge-yellow":"badge-gray"}`,children:m.status})}),a.jsx("td",{className:"py-3 pr-4",children:m.dppId?a.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-semibold bg-green-100 text-green-700",children:"87% A"}):a.jsx("span",{className:"text-gray-400 text-xs",children:"No DPP"})}),a.jsx("td",{className:"py-3 text-gray-500 text-xs",children:new Date(m.createdAt).toLocaleDateString()})]},m.id))})]})}):a.jsx("p",{className:"text-gray-500 text-center py-8",children:"No products yet. Create your first product to get started."})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs(Se,{to:"/admin/materials",className:"card hover:shadow-md transition-shadow",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[a.jsx("div",{className:"p-2 rounded-lg bg-green-100 text-green-600",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),a.jsx("h3",{className:"font-semibold text-gray-900",children:"Materials"})]}),a.jsxs("div",{className:"flex items-baseline gap-2",children:[a.jsx("span",{className:"text-2xl font-bold text-gray-900",children:t.materials.total}),a.jsx("span",{className:"text-sm text-gray-500",children:"total"})]}),a.jsxs("div",{className:"flex gap-4 mt-2 text-sm",children:[a.jsxs("span",{className:"text-green-600",children:[t.materials.verified," verified"]}),t.materials.pending>0&&a.jsxs("span",{className:"text-amber-600",children:[t.materials.pending," pending"]})]})]}),a.jsxs(Se,{to:"/admin/transfers",className:"card hover:shadow-md transition-shadow",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[a.jsx("div",{className:"p-2 rounded-lg bg-blue-100 text-blue-600",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})})}),a.jsx("h3",{className:"font-semibold text-gray-900",children:"Transfers"})]}),a.jsxs("div",{className:"flex items-baseline gap-2",children:[a.jsx("span",{className:"text-2xl font-bold text-gray-900",children:t.transfers.total}),a.jsx("span",{className:"text-sm text-gray-500",children:"total"})]}),a.jsxs("div",{className:"flex gap-4 mt-2 text-sm",children:[a.jsxs("span",{className:"text-green-600",children:[t.transfers.received," received"]}),t.transfers.pending>0&&a.jsxs("span",{className:"text-amber-600",children:[t.transfers.pending," in transit"]})]})]}),a.jsxs(Se,{to:"/admin/production",className:"card hover:shadow-md transition-shadow",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[a.jsx("div",{className:"p-2 rounded-lg bg-indigo-100 text-indigo-600",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),a.jsx("h3",{className:"font-semibold text-gray-900",children:"Production"})]}),a.jsxs("div",{className:"flex items-baseline gap-2",children:[a.jsx("span",{className:"text-2xl font-bold text-gray-900",children:t.production.total}),a.jsx("span",{className:"text-sm text-gray-500",children:"batches"})]}),a.jsxs("div",{className:"flex gap-4 mt-2 text-sm",children:[a.jsxs("span",{className:"text-green-600",children:[t.production.completed," completed"]}),t.production.inProgress>0&&a.jsxs("span",{className:"text-blue-600",children:[t.production.inProgress," in progress"]})]})]})]}),a.jsxs("div",{className:"card",children:[a.jsx("h2",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider mb-3",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-wrap gap-3",children:[a.jsx(Se,{to:"/admin/products/new",className:"btn-primary",children:"+ New Product"}),a.jsx(Se,{to:"/admin/materials/new",className:"btn-secondary",children:"+ New Material"}),a.jsx(Se,{to:"/admin/transfers/new",className:"btn-secondary",children:"+ New Transfer"}),a.jsx(Se,{to:"/admin/credentials",className:"btn-secondary",children:"Issue Credential"})]})]})]})}function Nv(){const[e,t]=v.useState([]),[r,n]=v.useState(!0),[s,i]=v.useState(null),[l,d]=v.useState(!1),[o,c]=v.useState(null),[u,p]=v.useState({name:"",displayName:"",description:"",parentCategoryId:"",attributeSchema:{requiredFields:{},optionalFields:{}}}),[m,N]=v.useState({name:"",type:"string",label:"",required:!1,enumValues:""});v.useEffect(()=>{f()},[]);const f=async()=>{var y,w;n(!0);try{const k=await As.list();t(k.data.categories||k.data||[])}catch(k){i(((w=(y=k.response)==null?void 0:y.data)==null?void 0:w.error)||"Failed to load categories")}finally{n(!1)}},h=async y=>{var w,k;y.preventDefault();try{const I={name:u.name,displayName:u.displayName,description:u.description,parentCategoryId:u.parentCategoryId||null,requiredFields:u.attributeSchema.requiredFields||{},optionalFields:u.attributeSchema.optionalFields||{}};o?await As.update(o.id,I):await As.create(I),d(!1),c(null),g(),f()}catch(I){i(((k=(w=I.response)==null?void 0:w.data)==null?void 0:k.error)||"Failed to save category")}},j=y=>{c(y),p({name:y.name||"",displayName:y.displayName||"",description:y.description||"",parentCategoryId:y.parentCategoryId||"",attributeSchema:{requiredFields:y.requiredFields||{},optionalFields:y.optionalFields||{}}}),d(!0)},x=async y=>{var w,k;if(confirm("Are you sure you want to delete this category?"))try{await As.delete(y),f()}catch(I){i(((k=(w=I.response)==null?void 0:w.data)==null?void 0:k.error)||"Failed to delete category")}},g=()=>{p({name:"",displayName:"",description:"",parentCategoryId:"",attributeSchema:{requiredFields:{},optionalFields:{}}}),N({name:"",type:"string",label:"",required:!1,enumValues:""})},b=()=>{if(!m.name||!m.label)return;const y={type:m.type,label:m.label};m.type==="enum"&&m.enumValues&&(y.enum=m.enumValues.split(",").map(k=>k.trim()));const w=m.required?"requiredFields":"optionalFields";p(k=>({...k,attributeSchema:{...k.attributeSchema,[w]:{...k.attributeSchema[w],[m.name]:y}}})),N({name:"",type:"string",label:"",required:!1,enumValues:""})},E=(y,w)=>{const k=w?"requiredFields":"optionalFields",I={...u.attributeSchema[k]};delete I[y],p(R=>({...R,attributeSchema:{...R.attributeSchema,[k]:I}}))};return r&&e.length===0?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Product Categories"}),a.jsx("button",{onClick:()=>{g(),c(null),d(!0)},className:"btn-primary",children:"+ New Category"})]}),s&&a.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6",children:[s,a.jsx("button",{onClick:()=>i(null),className:"ml-2 text-red-900",children:""})]}),l&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto m-4",children:a.jsxs("div",{className:"p-6",children:[a.jsx("h2",{className:"text-xl font-bold mb-4",children:o?"Edit Category":"New Category"}),a.jsxs("form",{onSubmit:h,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Internal Name *"}),a.jsx("input",{type:"text",value:u.name,onChange:y=>p(w=>({...w,name:y.target.value.toLowerCase().replace(/\s+/g,"_")})),className:"input",placeholder:"e.g., furniture, batteries",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Display Name *"}),a.jsx("input",{type:"text",value:u.displayName,onChange:y=>p(w=>({...w,displayName:y.target.value})),className:"input",placeholder:"e.g., Wood Furniture, EV Batteries",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Description"}),a.jsx("textarea",{value:u.description,onChange:y=>p(w=>({...w,description:y.target.value})),className:"input",rows:2})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Parent Category"}),a.jsxs("select",{value:u.parentCategoryId,onChange:y=>p(w=>({...w,parentCategoryId:y.target.value})),className:"input",children:[a.jsx("option",{value:"",children:"None (top level)"}),e.filter(y=>y.id!==(o==null?void 0:o.id)).map(y=>a.jsx("option",{value:y.id,children:y.displayName},y.id))]})]}),a.jsxs("div",{className:"border-t pt-4",children:[a.jsx("h3",{className:"font-medium mb-3",children:"Custom Fields Schema"}),a.jsxs("div",{className:"space-y-2 mb-4",children:[Object.entries(u.attributeSchema.requiredFields).map(([y,w])=>a.jsxs("div",{className:"flex items-center justify-between p-2 bg-red-50 rounded",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:y}),a.jsxs("span",{className:"text-sm text-gray-500 ml-2",children:["(",w.type,")"]}),a.jsx("span",{className:"text-xs text-red-600 ml-2",children:"Required"})]}),a.jsx("button",{type:"button",onClick:()=>E(y,!0),className:"text-red-600 hover:text-red-800",children:""})]},y)),Object.entries(u.attributeSchema.optionalFields).map(([y,w])=>a.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:y}),a.jsxs("span",{className:"text-sm text-gray-500 ml-2",children:["(",w.type,")"]}),a.jsx("span",{className:"text-xs text-gray-400 ml-2",children:"Optional"})]}),a.jsx("button",{type:"button",onClick:()=>E(y,!1),className:"text-red-600 hover:text-red-800",children:""})]},y))]}),a.jsxs("div",{className:"grid grid-cols-6 gap-2 items-end",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label text-xs",children:"Field Name"}),a.jsx("input",{type:"text",value:m.name,onChange:y=>N(w=>({...w,name:y.target.value.toLowerCase().replace(/\s+/g,"_")})),className:"input text-sm",placeholder:"field_name"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label text-xs",children:"Label"}),a.jsx("input",{type:"text",value:m.label,onChange:y=>N(w=>({...w,label:y.target.value})),className:"input text-sm",placeholder:"Display Label"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label text-xs",children:"Type"}),a.jsxs("select",{value:m.type,onChange:y=>N(w=>({...w,type:y.target.value})),className:"input text-sm",children:[a.jsx("option",{value:"string",children:"String"}),a.jsx("option",{value:"number",children:"Number"}),a.jsx("option",{value:"boolean",children:"Boolean"}),a.jsx("option",{value:"date",children:"Date"}),a.jsx("option",{value:"enum",children:"Enum"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label text-xs",children:"Enum Values"}),a.jsx("input",{type:"text",value:m.enumValues,onChange:y=>N(w=>({...w,enumValues:y.target.value})),className:"input text-sm",placeholder:"val1, val2",disabled:m.type!=="enum"})]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs("label",{className:"flex items-center text-sm",children:[a.jsx("input",{type:"checkbox",checked:m.required,onChange:y=>N(w=>({...w,required:y.target.checked})),className:"mr-1"}),"Required"]})}),a.jsx("div",{children:a.jsx("button",{type:"button",onClick:b,className:"btn-secondary text-sm w-full",children:"Add"})})]})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"submit",className:"btn-primary",children:o?"Update":"Create"}),a.jsx("button",{type:"button",onClick:()=>{d(!1),c(null)},className:"btn-secondary",children:"Cancel"})]})]})]})})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.length===0?a.jsx("div",{className:"col-span-full text-center py-8 text-gray-500",children:"No categories found. Create your first category to get started."}):e.map(y=>a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:y.displayName}),a.jsx("p",{className:"text-sm text-gray-500",children:y.name})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>j(y),className:"text-primary-600 hover:text-primary-800 text-sm",children:"Edit"}),a.jsx("button",{onClick:()=>x(y.id),className:"text-red-600 hover:text-red-800 text-sm",children:"Delete"})]})]}),y.description&&a.jsx("p",{className:"text-sm text-gray-600 mt-2",children:y.description}),a.jsxs("div",{className:"mt-3 pt-3 border-t",children:[a.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Custom Fields:"}),a.jsxs("div",{className:"flex flex-wrap gap-1",children:[Object.keys(y.requiredFields||{}).map(w=>a.jsxs("span",{className:"px-2 py-0.5 bg-red-100 text-red-700 rounded text-xs",children:[w,"*"]},w)),Object.keys(y.optionalFields||{}).map(w=>a.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-700 rounded text-xs",children:w},w)),Object.keys(y.requiredFields||{}).length===0&&Object.keys(y.optionalFields||{}).length===0&&a.jsx("span",{className:"text-xs text-gray-400",children:"No custom fields"})]})]})]},y.id))})]})}const Qn={AT:{pattern:/^ATU\d{8}$/,example:"ATU12345678",name:"Austria",region:"Europe"},BE:{pattern:/^BE[01]\d{9}$/,example:"BE0123456789",name:"Belgium",region:"Europe"},BG:{pattern:/^BG\d{9,10}$/,example:"BG123456789",name:"Bulgaria",region:"Europe"},CY:{pattern:/^CY\d{8}[A-Z]$/,example:"CY12345678X",name:"Cyprus",region:"Europe"},CZ:{pattern:/^CZ\d{8,10}$/,example:"CZ12345678",name:"Czech Republic",region:"Europe"},DE:{pattern:/^DE\d{9}$/,example:"DE123456789",name:"Germany",region:"Europe"},DK:{pattern:/^DK\d{8}$/,example:"DK12345678",name:"Denmark",region:"Europe"},EE:{pattern:/^EE\d{9}$/,example:"EE123456789",name:"Estonia",region:"Europe"},EL:{pattern:/^EL\d{9}$/,example:"EL123456789",name:"Greece",region:"Europe"},ES:{pattern:/^ES[A-Z0-9]\d{7}[A-Z0-9]$/,example:"ESX1234567X",name:"Spain",region:"Europe"},FI:{pattern:/^FI\d{8}$/,example:"FI12345678",name:"Finland",region:"Europe"},FR:{pattern:/^FR[A-Z0-9]{2}\d{9}$/,example:"FRXX123456789",name:"France",region:"Europe"},HR:{pattern:/^HR\d{11}$/,example:"HR12345678901",name:"Croatia",region:"Europe"},HU:{pattern:/^HU\d{8}$/,example:"HU12345678",name:"Hungary",region:"Europe"},IE:{pattern:/^IE\d{7}[A-Z]{1,2}$/,example:"IE1234567X",name:"Ireland",region:"Europe"},IT:{pattern:/^IT\d{11}$/,example:"IT12345678901",name:"Italy",region:"Europe"},LT:{pattern:/^LT(\d{9}|\d{12})$/,example:"LT123456789",name:"Lithuania",region:"Europe"},LU:{pattern:/^LU\d{8}$/,example:"LU12345678",name:"Luxembourg",region:"Europe"},LV:{pattern:/^LV\d{11}$/,example:"LV12345678901",name:"Latvia",region:"Europe"},MT:{pattern:/^MT\d{8}$/,example:"MT12345678",name:"Malta",region:"Europe"},NL:{pattern:/^NL\d{9}B\d{2}$/,example:"NL123456789B01",name:"Netherlands",region:"Europe"},PL:{pattern:/^PL\d{10}$/,example:"PL1234567890",name:"Poland",region:"Europe"},PT:{pattern:/^PT\d{9}$/,example:"PT123456789",name:"Portugal",region:"Europe"},RO:{pattern:/^RO\d{2,10}$/,example:"RO123456789",name:"Romania",region:"Europe"},SE:{pattern:/^SE\d{12}$/,example:"SE123456789012",name:"Sweden",region:"Europe"},SI:{pattern:/^SI\d{8}$/,example:"SI12345678",name:"Slovenia",region:"Europe"},SK:{pattern:/^SK\d{10}$/,example:"SK1234567890",name:"Slovakia",region:"Europe"},GB:{pattern:/^GB(\d{9}|\d{12}|GD\d{3}|HA\d{3})$/,example:"GB123456789",name:"United Kingdom",region:"Europe"},CH:{pattern:/^CHE\d{9}(MWST|TVA|IVA)?$/,example:"CHE123456789MWST",name:"Switzerland",region:"Europe"},NO:{pattern:/^NO\d{9}MVA$/,example:"NO123456789MVA",name:"Norway",region:"Europe"},IS:{pattern:/^IS\d{5,6}$/,example:"IS123456",name:"Iceland",region:"Europe"},LI:{pattern:/^LI\d{5}$/,example:"LI12345",name:"Liechtenstein",region:"Europe"},UA:{pattern:/^UA\d{8,12}$/,example:"UA123456789012",name:"Ukraine",region:"Europe"},RS:{pattern:/^RS\d{9}$/,example:"RS123456789",name:"Serbia",region:"Europe"},TR:{pattern:/^TR\d{10}$/,example:"TR1234567890",name:"Turkey",region:"Europe"},RU:{pattern:/^RU(\d{10}|\d{12})$/,example:"RU1234567890",name:"Russia",region:"Europe"},BY:{pattern:/^BY\d{9}$/,example:"BY123456789",name:"Belarus",region:"Europe"},US:{pattern:/^\d{2}-\d{7}$/,example:"12-3456789",name:"United States (EIN)",region:"Americas"},CA:{pattern:/^\d{9}(RT\d{4})?$/,example:"123456789RT0001",name:"Canada (BN)",region:"Americas"},MX:{pattern:/^[A-Z&]{3,4}\d{6}[A-Z0-9]{3}$/,example:"XAXX010101000",name:"Mexico (RFC)",region:"Americas"},BR:{pattern:/^\d{2}\.?\d{3}\.?\d{3}\/?\d{4}-?\d{2}$/,example:"12.345.678/0001-95",name:"Brazil (CNPJ)",region:"Americas"},AR:{pattern:/^\d{2}-\d{8}-\d{1}$/,example:"20-12345678-9",name:"Argentina (CUIT)",region:"Americas"},CL:{pattern:/^\d{2}\.\d{3}\.\d{3}-[0-9K]$/,example:"12.345.678-9",name:"Chile (RUT)",region:"Americas"},CO:{pattern:/^\d{9,10}-\d{1}$/,example:"123456789-0",name:"Colombia (NIT)",region:"Americas"},PE:{pattern:/^\d{11}$/,example:"12345678901",name:"Peru (RUC)",region:"Americas"},VE:{pattern:/^[VEJPG]\d{8,9}$/,example:"J123456789",name:"Venezuela (RIF)",region:"Americas"},EC:{pattern:/^\d{13}$/,example:"1234567890001",name:"Ecuador (RUC)",region:"Americas"},UY:{pattern:/^\d{12}$/,example:"123456789012",name:"Uruguay (RUT)",region:"Americas"},PY:{pattern:/^\d{6,8}-\d{1}$/,example:"12345678-9",name:"Paraguay (RUC)",region:"Americas"},BO:{pattern:/^\d{7,9}$/,example:"123456789",name:"Bolivia (NIT)",region:"Americas"},CN:{pattern:/^[0-9A-Z]{15,20}$/,example:"91310000MA1FL8XXXX",name:"China (USCC)",region:"Asia-Pacific"},JP:{pattern:/^T?\d{13}$/,example:"T1234567890123",name:"Japan (Corporate Number)",region:"Asia-Pacific"},KR:{pattern:/^\d{3}-\d{2}-\d{5}$/,example:"123-45-67890",name:"South Korea (BRN)",region:"Asia-Pacific"},TW:{pattern:/^\d{8}$/,example:"12345678",name:"Taiwan (UBN)",region:"Asia-Pacific"},HK:{pattern:/^\d{8}$/,example:"12345678",name:"Hong Kong (BR)",region:"Asia-Pacific"},SG:{pattern:/^[A-Z]\d{7}[A-Z]$/,example:"M12345678X",name:"Singapore (UEN)",region:"Asia-Pacific"},MY:{pattern:/^\d{12}$/,example:"123456789012",name:"Malaysia (BRN)",region:"Asia-Pacific"},TH:{pattern:/^\d{13}$/,example:"1234567890123",name:"Thailand (Tax ID)",region:"Asia-Pacific"},ID:{pattern:/^\d{2}\.\d{3}\.\d{3}\.\d{1}-\d{3}\.\d{3}$/,example:"12.345.678.9-012.345",name:"Indonesia (NPWP)",region:"Asia-Pacific"},PH:{pattern:/^\d{3}-\d{3}-\d{3}-\d{3}$/,example:"123-456-789-000",name:"Philippines (TIN)",region:"Asia-Pacific"},VN:{pattern:/^\d{10,13}$/,example:"1234567890",name:"Vietnam (Tax Code)",region:"Asia-Pacific"},IN:{pattern:/^\d{2}[A-Z]{5}\d{4}[A-Z]{1}[A-Z\d]{1}[Z]{1}[A-Z\d]{1}$/,example:"22AAAAA0000A1Z5",name:"India (GSTIN)",region:"Asia-Pacific"},PK:{pattern:/^\d{7}-\d{1}$/,example:"1234567-8",name:"Pakistan (NTN)",region:"Asia-Pacific"},BD:{pattern:/^\d{9,12}$/,example:"123456789012",name:"Bangladesh (BIN)",region:"Asia-Pacific"},LK:{pattern:/^\d{9}[A-Z]$/,example:"123456789V",name:"Sri Lanka (TIN)",region:"Asia-Pacific"},AU:{pattern:/^\d{11}$/,example:"12345678901",name:"Australia (ABN)",region:"Asia-Pacific"},NZ:{pattern:/^\d{8,9}$/,example:"123456789",name:"New Zealand (GST)",region:"Asia-Pacific"},AE:{pattern:/^\d{15}$/,example:"100000000000003",name:"UAE (TRN)",region:"Middle East & Africa"},SA:{pattern:/^\d{15}$/,example:"300000000000003",name:"Saudi Arabia (VAT)",region:"Middle East & Africa"},IL:{pattern:/^\d{9}$/,example:"123456789",name:"Israel (VAT)",region:"Middle East & Africa"},QA:{pattern:/^\d{10}$/,example:"1234567890",name:"Qatar (TIN)",region:"Middle East & Africa"},KW:{pattern:/^\d{10}$/,example:"1234567890",name:"Kuwait (TIN)",region:"Middle East & Africa"},BH:{pattern:/^\d{9,15}$/,example:"123456789012345",name:"Bahrain (VAT)",region:"Middle East & Africa"},OM:{pattern:/^\d{8}$/,example:"12345678",name:"Oman (VAT)",region:"Middle East & Africa"},ZA:{pattern:/^\d{10}$/,example:"4123456789",name:"South Africa (VAT)",region:"Middle East & Africa"},EG:{pattern:/^\d{9}$/,example:"123456789",name:"Egypt (TIN)",region:"Middle East & Africa"},NG:{pattern:/^\d{8}-\d{4}$/,example:"12345678-0001",name:"Nigeria (TIN)",region:"Middle East & Africa"},KE:{pattern:/^[A-Z]\d{9}[A-Z]$/,example:"A123456789B",name:"Kenya (PIN)",region:"Middle East & Africa"},MA:{pattern:/^\d{8}$/,example:"12345678",name:"Morocco (IF)",region:"Middle East & Africa"},TN:{pattern:/^\d{7}[A-Z]{3}\d{3}$/,example:"1234567ABC123",name:"Tunisia (MF)",region:"Middle East & Africa"},GH:{pattern:/^[A-Z]\d{9}$/,example:"C0012345678",name:"Ghana (TIN)",region:"Middle East & Africa"}},wv=Object.entries(Qn).map(([e,{name:t,region:r}])=>({code:e,name:t,region:r})).sort((e,t)=>e.name.localeCompare(t.name)),Cv=wv.reduce((e,t)=>(e[t.region]||(e[t.region]=[]),e[t.region].push(t),e),{}),Sv=["Europe","Americas","Asia-Pacific","Middle East & Africa"],kv=e=>{if(!e||e.length<2)return"";const t=e.replace(/\s/g,"").toUpperCase();if(t.length>=3&&t.substring(0,3)==="CHE")return"CH";const r=t.substring(0,2);return Qn[r]&&/^[A-Z]{2}/.test(t)?r:/^\d{2}\.?\d{3}\.?\d{3}\/?\d{4}-?\d{2}$/.test(e)?"BR":/^\d{2}-\d{8}-\d{1}$/.test(e)?"AR":/^\d{2}\.\d{3}\.\d{3}-[0-9K]$/.test(e)?"CL":/^\d{9,10}-\d{1}$/.test(e)?"CO":/^\d{2}-\d{7}$/.test(e)?"US":/^\d{3}-\d{2}-\d{5}$/.test(e)?"KR":/^\d{2}\.\d{3}\.\d{3}\.\d{1}-\d{3}\.\d{3}$/.test(e)?"ID":/^\d{3}-\d{3}-\d{3}-\d{3}$/.test(e)?"PH":""},Ll=(e,t)=>{if(!e||!t)return{valid:null,error:null};const r=Qn[t];if(!r)return{valid:null,error:"Unknown country format"};const n=e.replace(/\s/g,"").toUpperCase();return r.pattern.test(n)?{valid:!0,error:null}:{valid:!1,error:`Invalid format for ${r.name}. Expected: ${r.example}`}},Ev={unverified:"bg-gray-100 text-gray-700",pending:"bg-yellow-100 text-yellow-700",verified:"bg-green-100 text-green-700",failed:"bg-red-100 text-red-700"},Au={sku:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z",gtin:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h2M4 12h2m-6 4h.01M4 4h.01M4 8h.01M4 16h.01M4 20h.01M20 4h.01M20 8h.01",gs1_digital_link:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1",did_product:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z",did_organization:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z",gln:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z",lei:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z",vat:"M9 14l6-6m-5.5.5h.01m4.99 5h.01M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16l3.5-2 3.5 2 3.5-2 3.5 2z",registration:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z",default:"M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 114 0v1m-4 0a2 2 0 104 0m-5 8a2 2 0 100-4 2 2 0 000 4zm0 0c1.306 0 2.417.835 2.83 2M9 14a3.001 3.001 0 00-2.83 2M15 11h3m-3 4h2"},Pv=["vat","registration","lei"];function $c({entityType:e,entityId:t,entityData:r,onUpdate:n}){var me,_,G,Y;const[s,i]=v.useState([]),[l,d]=v.useState([]),[o,c]=v.useState(!0),[u,p]=v.useState(null),[m,N]=v.useState(!1),[f,h]=v.useState(null),[j,x]=v.useState(!1),[g,b]=v.useState(null),[E,y]=v.useState(""),[w,k]=v.useState(!1),[I,R]=v.useState(null),[U,M]=v.useState({scheme:"",value:"",displayLabel:"",isPrimary:!1,vatCountry:""}),[L,D]=v.useState({valid:null,error:null}),H=S=>{let C="",A="";r&&e==="organization"&&(S==="vat"&&r.vatNumber?(C=r.vatNumber,A=kv(C)):S==="registration"&&r.registrationNumber?C=r.registrationNumber:S==="did_organization"&&r.did&&(C=r.did)),M(ue=>({...ue,scheme:S,value:C||ue.value,vatCountry:S==="vat"?A:""})),D(S==="vat"&&C&&A?Ll(C,A):{valid:null,error:null})},re=S=>{M(C=>({...C,value:S})),U.vatCountry&&D(Ll(S,U.vatCountry))},ie=S=>{M(C=>({...C,vatCountry:S})),U.value?D(Ll(U.value,S)):D({valid:null,error:null})};v.useEffect(()=>{e&&t&&he()},[e,t]);const he=async()=>{var S,C;c(!0),p(null);try{const A=await xr.list(e,t);i(A.data.identifiers||[]),d(A.data.availableSchemes||[])}catch(A){p(((C=(S=A.response)==null?void 0:S.data)==null?void 0:C.error)||"Failed to load identifiers")}finally{c(!1)}},W=async S=>{var C,A;S.preventDefault(),x(!0),p(null);try{await xr.create(e,t,U),M({scheme:"",value:"",displayLabel:"",isPrimary:!1}),N(!1),he(),n&&n()}catch(ue){p(((A=(C=ue.response)==null?void 0:C.data)==null?void 0:A.error)||"Failed to add identifier")}finally{x(!1)}},te=async S=>{var C,A;h(S.id);try{await xr.verify(S.id),he(),n&&n()}catch(ue){p(((A=(C=ue.response)==null?void 0:C.data)==null?void 0:A.error)||"Verification failed")}finally{h(null)}},ae=async S=>{var C,A;try{await xr.update(S.id,{isPrimary:!0}),he(),n&&n()}catch(ue){p(((A=(C=ue.response)==null?void 0:C.data)==null?void 0:A.error)||"Failed to set primary")}},Z=async S=>{var C,A;if(confirm(`Remove this ${S.scheme} identifier?`))try{await xr.delete(S.id),he(),n&&n()}catch(ue){p(((A=(C=ue.response)==null?void 0:C.data)==null?void 0:A.error)||"Failed to remove identifier")}},oe=S=>{b(S),y(""),R(null)},ve=async()=>{var S,C,A,ue,F,q;if(!E.trim()){R({success:!1,error:"Please paste a Verifiable Credential"});return}k(!0),R(null);try{let X;try{X=JSON.parse(E)}catch{R({success:!1,error:"Invalid JSON format"}),k(!1);return}const xe=await Ze.verify(X);if(xe.data.verified){const Le=X.credentialSubject,V=g.value;let se=!1,fe=null;(Le.vatNumber===V||Le.taxId===V||Le.registrationNumber===V||Le.legalEntityIdentifier===V||(S=Le.id)!=null&&S.includes(V))&&(se=!0,fe=V);const Ae=r==null?void 0:r.did,at=Le.id||X.holder||X.issuanceDate,lt=Ae&&(Le.id===Ae||X.holder===Ae);se||lt?(await xr.verify(g.id,{method:"verifiable_credential",evidence:{credentialId:X.id,issuer:((C=X.issuer)==null?void 0:C.id)||X.issuer,issuanceDate:X.issuanceDate,credentialType:X.type,matchedValue:fe,didMatches:lt}}),R({success:!0,message:"Credential verified successfully!",issuer:((A=X.issuer)==null?void 0:A.name)||((ue=X.issuer)==null?void 0:ue.id)||X.issuer,issuedAt:X.issuanceDate}),he(),n&&n()):R({success:!1,error:`Credential does not contain matching identifier (${V}) or DID`})}else R({success:!1,error:xe.data.error||"Credential verification failed"})}catch(X){R({success:!1,error:((q=(F=X.response)==null?void 0:F.data)==null?void 0:q.error)||X.message||"Verification failed"})}finally{k(!1)}},ee=S=>Au[S]||Au.default,ne=S=>l.find(C=>C.scheme===S)||{};return o?a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary-600"})}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Identifiers"}),!m&&a.jsxs("button",{onClick:()=>N(!0),className:"text-sm text-primary-600 hover:text-primary-700 flex items-center gap-1",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Identifier"]})]}),u&&a.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-3 py-2 rounded-lg text-sm",children:[u,a.jsx("button",{onClick:()=>p(null),className:"ml-2 text-red-500 hover:text-red-700",children:""})]}),m&&a.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:a.jsxs("form",{onSubmit:W,className:"space-y-3",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label text-sm",children:"Scheme *"}),a.jsxs("select",{value:U.scheme,onChange:S=>H(S.target.value),className:"input text-sm",required:!0,children:[a.jsx("option",{value:"",children:"Select scheme..."}),l.map(S=>a.jsxs("option",{value:S.scheme,children:[S.name," (",S.section,")"]},S.scheme))]})]}),U.scheme==="vat"?a.jsxs("div",{children:[a.jsx("label",{className:"label text-sm",children:"Country *"}),a.jsxs("select",{value:U.vatCountry,onChange:S=>ie(S.target.value),className:"input text-sm",required:!0,children:[a.jsx("option",{value:"",children:"Select country..."}),Sv.map(S=>{var C;return a.jsx("optgroup",{label:S,children:(C=Cv[S])==null?void 0:C.map(({code:A,name:ue})=>a.jsxs("option",{value:A,children:[ue," (",A,")"]},A))},S)})]})]}):a.jsxs("div",{children:[a.jsx("label",{className:"label text-sm",children:"Value *"}),a.jsx("input",{type:"text",value:U.value,onChange:S=>M({...U,value:S.target.value}),className:"input text-sm",placeholder:((me=ne(U.scheme))==null?void 0:me.description)||"Enter value...",required:!0})]})]}),U.scheme==="vat"&&a.jsxs("div",{children:[a.jsx("label",{className:"label text-sm",children:"VAT Number *"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"text",value:U.value,onChange:S=>re(S.target.value),className:`input text-sm pr-10 ${L.valid===!0?"border-green-500 focus:ring-green-500":L.valid===!1?"border-red-500 focus:ring-red-500":""}`,placeholder:U.vatCountry?(_=Qn[U.vatCountry])==null?void 0:_.example:"Select country first",required:!0}),L.valid===!0&&a.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-green-500",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),L.valid===!1&&a.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-red-500",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),L.error&&a.jsx("p",{className:"text-xs text-red-600 mt-1",children:L.error}),L.valid===!0&&a.jsx("p",{className:"text-xs text-green-600 mt-1",children:"Valid format"}),!L.error&&!L.valid&&U.vatCountry&&a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Format: ",(G=Qn[U.vatCountry])==null?void 0:G.example]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label text-sm",children:"Display Label"}),a.jsx("input",{type:"text",value:U.displayLabel,onChange:S=>M({...U,displayLabel:S.target.value}),className:"input text-sm",placeholder:"Custom label (optional)"})]}),a.jsx("div",{className:"flex items-end",children:a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:U.isPrimary,onChange:S=>M({...U,isPrimary:S.target.checked}),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),a.jsx("span",{className:"text-sm text-gray-700",children:"Set as primary"})]})})]}),a.jsxs("div",{className:"flex gap-2 pt-2",children:[a.jsx("button",{type:"submit",disabled:j||U.scheme==="vat"&&L.valid===!1,className:"btn-primary text-sm py-1.5 px-3 disabled:opacity-50",children:j?"Adding...":"Add"}),a.jsx("button",{type:"button",onClick:()=>{N(!1),M({scheme:"",value:"",displayLabel:"",isPrimary:!1,vatCountry:""}),D({valid:null,error:null})},className:"btn-secondary text-sm py-1.5 px-3",children:"Cancel"})]})]})}),s.length===0?a.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No identifiers yet. Add one to get started."}):a.jsx("div",{className:"space-y-2",children:s.map(S=>{var C,A,ue;return a.jsxs("div",{className:`rounded-lg border p-3 ${S.isPrimary?"border-primary-300 bg-primary-50":"border-gray-200 bg-white"}`,children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"p-2 bg-gray-100 rounded-lg",children:a.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:ee(S.scheme)})})}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-medium text-gray-900",children:S.displayLabel||((C=ne(S.scheme))==null?void 0:C.name)||S.scheme}),S.isPrimary&&a.jsx("span",{className:"text-xs bg-primary-100 text-primary-700 px-1.5 py-0.5 rounded",children:"Primary"}),a.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${Ev[S.verificationStatus]}`,children:S.verificationStatus})]}),a.jsx("p",{className:"text-sm font-mono text-gray-600 mt-0.5",children:S.value}),S.resolverUrl&&a.jsx("a",{href:S.resolverUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-primary-600 hover:underline mt-0.5 inline-block",children:"Resolve "}),a.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Section ",((A=ne(S.scheme))==null?void 0:A.section)||"N/A"]})]})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[Pv.includes(S.scheme)&&S.verificationStatus!=="verified"&&a.jsx("button",{onClick:()=>oe(S),className:"p-1.5 text-gray-400 hover:text-indigo-600 hover:bg-indigo-50 rounded",title:"Verify with Verifiable Credential",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})}),((ue=ne(S.scheme))==null?void 0:ue.resolvable)&&S.verificationStatus!=="verified"&&a.jsx("button",{onClick:()=>te(S),disabled:f===S.id,className:"p-1.5 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded",title:"Verify via resolver",children:f===S.id?a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-green-600"}):a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"})})}),!S.isPrimary&&a.jsx("button",{onClick:()=>ae(S),className:"p-1.5 text-gray-400 hover:text-primary-600 hover:bg-primary-50 rounded",title:"Set as primary",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})}),a.jsx("button",{onClick:()=>Z(S),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded",title:"Remove",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),S.verificationStatus==="verified"&&S.verificationEvidence&&a.jsx("div",{className:"mt-2 pt-2 border-t border-gray-100",children:a.jsxs("details",{className:"text-xs",children:[a.jsx("summary",{className:"cursor-pointer text-gray-500 hover:text-gray-700",children:"Verification details"}),a.jsx("pre",{className:"mt-1 p-2 bg-gray-100 rounded text-xs overflow-x-auto",children:JSON.stringify(S.verificationEvidence,null,2)})]})})]},S.id)})}),g&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-xl w-full m-4 max-h-[90vh] overflow-y-auto",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Verify with Verifiable Credential"}),a.jsx("button",{onClick:()=>b(null),className:"text-gray-400 hover:text-gray-600",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg mb-4",children:[a.jsx("div",{className:"text-sm text-gray-500",children:"Verifying identifier:"}),a.jsx("div",{className:"font-medium text-gray-900",children:((Y=ne(g.scheme))==null?void 0:Y.name)||g.scheme}),a.jsx("div",{className:"font-mono text-sm text-gray-700",children:g.value})]}),a.jsxs("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[a.jsx("h4",{className:"font-medium text-blue-800 mb-1",children:"How to verify:"}),a.jsxs("ol",{className:"text-sm text-blue-700 list-decimal ml-4 space-y-1",children:[a.jsx("li",{children:"Obtain a Verifiable Credential from a trusted issuer (e.g., Chamber of Commerce)"}),a.jsxs("li",{children:["The credential must contain your ",g.scheme.toUpperCase()," number"]}),a.jsx("li",{children:"Paste the complete credential JSON below"})]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"label",children:"Verifiable Credential (JSON)"}),a.jsx("textarea",{value:E,onChange:S=>y(S.target.value),className:"input font-mono text-sm",rows:8,placeholder:`{
  "@context": ["https://www.w3.org/ns/credentials/v2"],
  "type": ["VerifiableCredential", "VATCredential"],
  "issuer": "did:web:chamber-of-commerce.gov",
  "credentialSubject": {
    "id": "did:web:your-org.com",
    "vatNumber": "${g.value}"
  },
  "proof": { ... }
}`})]}),I&&a.jsx("div",{className:`mb-4 p-3 rounded-lg ${I.success?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:I.success?a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 text-green-800 font-medium",children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),I.message]}),I.issuer&&a.jsxs("p",{className:"text-sm text-green-700 mt-1",children:["Issued by: ",I.issuer]}),I.issuedAt&&a.jsxs("p",{className:"text-sm text-green-600",children:["Issued: ",new Date(I.issuedAt).toLocaleDateString()]})]}):a.jsxs("div",{className:"flex items-center gap-2 text-red-800",children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),I.error]})}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:ve,disabled:w||!E.trim(),className:"btn-primary flex-1 disabled:opacity-50",children:w?a.jsxs("span",{className:"flex items-center justify-center gap-2",children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Verifying..."]}):"Verify Credential"}),a.jsx("button",{onClick:()=>b(null),className:"btn-secondary",children:"Cancel"})]}),a.jsxs("div",{className:"mt-4 pt-4 border-t",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Trusted Issuers"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Credentials should be issued by recognized authorities such as:"}),a.jsxs("ul",{className:"text-xs text-gray-500 mt-1 ml-4 list-disc",children:[a.jsx("li",{children:"National Chamber of Commerce"}),a.jsx("li",{children:"Tax Authority / Revenue Service"}),a.jsx("li",{children:"Business Registration Authority"}),a.jsx("li",{children:"GLEIF (for LEI numbers)"})]})]})]})})})]})}const vn={AT:{pattern:/^ATU\d{8}$/,example:"ATU12345678",name:"Austria",region:"Europe"},BE:{pattern:/^BE[01]\d{9}$/,example:"BE0123456789",name:"Belgium",region:"Europe"},BG:{pattern:/^BG\d{9,10}$/,example:"BG123456789",name:"Bulgaria",region:"Europe"},CY:{pattern:/^CY\d{8}[A-Z]$/,example:"CY12345678X",name:"Cyprus",region:"Europe"},CZ:{pattern:/^CZ\d{8,10}$/,example:"CZ12345678",name:"Czech Republic",region:"Europe"},DE:{pattern:/^DE\d{9}$/,example:"DE123456789",name:"Germany",region:"Europe"},DK:{pattern:/^DK\d{8}$/,example:"DK12345678",name:"Denmark",region:"Europe"},EE:{pattern:/^EE\d{9}$/,example:"EE123456789",name:"Estonia",region:"Europe"},EL:{pattern:/^EL\d{9}$/,example:"EL123456789",name:"Greece",region:"Europe"},ES:{pattern:/^ES[A-Z0-9]\d{7}[A-Z0-9]$/,example:"ESX1234567X",name:"Spain",region:"Europe"},FI:{pattern:/^FI\d{8}$/,example:"FI12345678",name:"Finland",region:"Europe"},FR:{pattern:/^FR[A-Z0-9]{2}\d{9}$/,example:"FRXX123456789",name:"France",region:"Europe"},HR:{pattern:/^HR\d{11}$/,example:"HR12345678901",name:"Croatia",region:"Europe"},HU:{pattern:/^HU\d{8}$/,example:"HU12345678",name:"Hungary",region:"Europe"},IE:{pattern:/^IE\d{7}[A-Z]{1,2}$/,example:"IE1234567X",name:"Ireland",region:"Europe"},IT:{pattern:/^IT\d{11}$/,example:"IT12345678901",name:"Italy",region:"Europe"},LT:{pattern:/^LT(\d{9}|\d{12})$/,example:"LT123456789",name:"Lithuania",region:"Europe"},LU:{pattern:/^LU\d{8}$/,example:"LU12345678",name:"Luxembourg",region:"Europe"},LV:{pattern:/^LV\d{11}$/,example:"LV12345678901",name:"Latvia",region:"Europe"},MT:{pattern:/^MT\d{8}$/,example:"MT12345678",name:"Malta",region:"Europe"},NL:{pattern:/^NL\d{9}B\d{2}$/,example:"NL123456789B01",name:"Netherlands",region:"Europe"},PL:{pattern:/^PL\d{10}$/,example:"PL1234567890",name:"Poland",region:"Europe"},PT:{pattern:/^PT\d{9}$/,example:"PT123456789",name:"Portugal",region:"Europe"},RO:{pattern:/^RO\d{2,10}$/,example:"RO123456789",name:"Romania",region:"Europe"},SE:{pattern:/^SE\d{12}$/,example:"SE123456789012",name:"Sweden",region:"Europe"},SI:{pattern:/^SI\d{8}$/,example:"SI12345678",name:"Slovenia",region:"Europe"},SK:{pattern:/^SK\d{10}$/,example:"SK1234567890",name:"Slovakia",region:"Europe"},GB:{pattern:/^GB(\d{9}|\d{12}|GD\d{3}|HA\d{3})$/,example:"GB123456789",name:"United Kingdom",region:"Europe"},CH:{pattern:/^CHE\d{9}(MWST|TVA|IVA)?$/,example:"CHE123456789MWST",name:"Switzerland",region:"Europe"},NO:{pattern:/^NO\d{9}MVA$/,example:"NO123456789MVA",name:"Norway",region:"Europe"},IS:{pattern:/^IS\d{5,6}$/,example:"IS123456",name:"Iceland",region:"Europe"},LI:{pattern:/^LI\d{5}$/,example:"LI12345",name:"Liechtenstein",region:"Europe"},UA:{pattern:/^UA\d{8,12}$/,example:"UA123456789012",name:"Ukraine",region:"Europe"},RS:{pattern:/^RS\d{9}$/,example:"RS123456789",name:"Serbia",region:"Europe"},TR:{pattern:/^TR\d{10}$/,example:"TR1234567890",name:"Turkey",region:"Europe"},RU:{pattern:/^RU(\d{10}|\d{12})$/,example:"RU1234567890",name:"Russia",region:"Europe"},BY:{pattern:/^BY\d{9}$/,example:"BY123456789",name:"Belarus",region:"Europe"},US:{pattern:/^\d{2}-\d{7}$/,example:"12-3456789",name:"United States (EIN)",region:"Americas"},CA:{pattern:/^\d{9}(RT\d{4})?$/,example:"123456789RT0001",name:"Canada (BN)",region:"Americas"},MX:{pattern:/^[A-Z&]{3,4}\d{6}[A-Z0-9]{3}$/,example:"XAXX010101000",name:"Mexico (RFC)",region:"Americas"},BR:{pattern:/^\d{2}\.?\d{3}\.?\d{3}\/?\d{4}-?\d{2}$/,example:"12.345.678/0001-95",name:"Brazil (CNPJ)",region:"Americas"},AR:{pattern:/^\d{2}-\d{8}-\d{1}$/,example:"20-12345678-9",name:"Argentina (CUIT)",region:"Americas"},CL:{pattern:/^\d{2}\.\d{3}\.\d{3}-[0-9K]$/,example:"12.345.678-9",name:"Chile (RUT)",region:"Americas"},CO:{pattern:/^\d{9,10}-\d{1}$/,example:"123456789-0",name:"Colombia (NIT)",region:"Americas"},PE:{pattern:/^\d{11}$/,example:"12345678901",name:"Peru (RUC)",region:"Americas"},VE:{pattern:/^[VEJPG]\d{8,9}$/,example:"J123456789",name:"Venezuela (RIF)",region:"Americas"},EC:{pattern:/^\d{13}$/,example:"1234567890001",name:"Ecuador (RUC)",region:"Americas"},UY:{pattern:/^\d{12}$/,example:"123456789012",name:"Uruguay (RUT)",region:"Americas"},PY:{pattern:/^\d{6,8}-\d{1}$/,example:"12345678-9",name:"Paraguay (RUC)",region:"Americas"},BO:{pattern:/^\d{7,9}$/,example:"123456789",name:"Bolivia (NIT)",region:"Americas"},CN:{pattern:/^[0-9A-Z]{15,20}$/,example:"91310000MA1FL8XXXX",name:"China (USCC)",region:"Asia-Pacific"},JP:{pattern:/^T?\d{13}$/,example:"T1234567890123",name:"Japan (Corporate Number)",region:"Asia-Pacific"},KR:{pattern:/^\d{3}-\d{2}-\d{5}$/,example:"123-45-67890",name:"South Korea (BRN)",region:"Asia-Pacific"},TW:{pattern:/^\d{8}$/,example:"12345678",name:"Taiwan (UBN)",region:"Asia-Pacific"},HK:{pattern:/^\d{8}$/,example:"12345678",name:"Hong Kong (BR)",region:"Asia-Pacific"},SG:{pattern:/^[A-Z]\d{7}[A-Z]$/,example:"M12345678X",name:"Singapore (UEN)",region:"Asia-Pacific"},MY:{pattern:/^\d{12}$/,example:"123456789012",name:"Malaysia (BRN)",region:"Asia-Pacific"},TH:{pattern:/^\d{13}$/,example:"1234567890123",name:"Thailand (Tax ID)",region:"Asia-Pacific"},ID:{pattern:/^\d{2}\.\d{3}\.\d{3}\.\d{1}-\d{3}\.\d{3}$/,example:"12.345.678.9-012.345",name:"Indonesia (NPWP)",region:"Asia-Pacific"},PH:{pattern:/^\d{3}-\d{3}-\d{3}-\d{3}$/,example:"123-456-789-000",name:"Philippines (TIN)",region:"Asia-Pacific"},VN:{pattern:/^\d{10,13}$/,example:"1234567890",name:"Vietnam (Tax Code)",region:"Asia-Pacific"},IN:{pattern:/^\d{2}[A-Z]{5}\d{4}[A-Z]{1}[A-Z\d]{1}[Z]{1}[A-Z\d]{1}$/,example:"22AAAAA0000A1Z5",name:"India (GSTIN)",region:"Asia-Pacific"},PK:{pattern:/^\d{7}-\d{1}$/,example:"1234567-8",name:"Pakistan (NTN)",region:"Asia-Pacific"},BD:{pattern:/^\d{9,12}$/,example:"123456789012",name:"Bangladesh (BIN)",region:"Asia-Pacific"},LK:{pattern:/^\d{9}[A-Z]$/,example:"123456789V",name:"Sri Lanka (TIN)",region:"Asia-Pacific"},AU:{pattern:/^\d{11}$/,example:"12345678901",name:"Australia (ABN)",region:"Asia-Pacific"},NZ:{pattern:/^\d{8,9}$/,example:"123456789",name:"New Zealand (GST)",region:"Asia-Pacific"},AE:{pattern:/^\d{15}$/,example:"100000000000003",name:"UAE (TRN)",region:"Middle East & Africa"},SA:{pattern:/^\d{15}$/,example:"300000000000003",name:"Saudi Arabia (VAT)",region:"Middle East & Africa"},IL:{pattern:/^\d{9}$/,example:"123456789",name:"Israel (VAT)",region:"Middle East & Africa"},QA:{pattern:/^\d{10}$/,example:"1234567890",name:"Qatar (TIN)",region:"Middle East & Africa"},KW:{pattern:/^\d{10}$/,example:"1234567890",name:"Kuwait (TIN)",region:"Middle East & Africa"},BH:{pattern:/^\d{9,15}$/,example:"123456789012345",name:"Bahrain (VAT)",region:"Middle East & Africa"},OM:{pattern:/^\d{8}$/,example:"12345678",name:"Oman (VAT)",region:"Middle East & Africa"},ZA:{pattern:/^\d{10}$/,example:"4123456789",name:"South Africa (VAT)",region:"Middle East & Africa"},EG:{pattern:/^\d{9}$/,example:"123456789",name:"Egypt (TIN)",region:"Middle East & Africa"},NG:{pattern:/^\d{8}-\d{4}$/,example:"12345678-0001",name:"Nigeria (TIN)",region:"Middle East & Africa"},KE:{pattern:/^[A-Z]\d{9}[A-Z]$/,example:"A123456789B",name:"Kenya (PIN)",region:"Middle East & Africa"},MA:{pattern:/^\d{8}$/,example:"12345678",name:"Morocco (IF)",region:"Middle East & Africa"},TN:{pattern:/^\d{7}[A-Z]{3}\d{3}$/,example:"1234567ABC123",name:"Tunisia (MF)",region:"Middle East & Africa"},GH:{pattern:/^[A-Z]\d{9}$/,example:"C0012345678",name:"Ghana (TIN)",region:"Middle East & Africa"}},Av=Object.entries(vn).map(([e,{name:t,region:r}])=>({code:e,name:t,region:r})).sort((e,t)=>e.name.localeCompare(t.name)),Tv=Av.reduce((e,t)=>(e[t.region]||(e[t.region]=[]),e[t.region].push(t),e),{}),Lv=["Europe","Americas","Asia-Pacific","Middle East & Africa"];function Iv(){var C,A,ue;const[e,t]=v.useState([]),[r,n]=v.useState(!0),[s,i]=v.useState(null),[l,d]=v.useState(!1),[o,c]=v.useState(null),[u,p]=v.useState({type:"",search:""}),[m,N]=v.useState(null),[f,h]=v.useState({name:"",type:"supplier",legalName:"",registrationNumber:"",vatNumber:"",vatCountry:"",domain:"",address:{street:"",city:"",region:"",country:"",postalCode:""},contactInfo:{email:"",phone:"",website:""}}),[j,x]=v.useState({valid:null,error:null}),[g,b]=v.useState(null),[E,y]=v.useState(!1),[w,k]=v.useState(""),[I,R]=v.useState([]),[U,M]=v.useState(!1),[L,D]=v.useState(null),[H,re]=v.useState({valid:null,error:null}),ie=[{value:"supplier",label:"Supplier"},{value:"manufacturer",label:"Manufacturer"},{value:"distributor",label:"Distributor"},{value:"recycler",label:"Recycler"},{value:"certifier",label:"Certifier"},{value:"logistics",label:"Logistics"},{value:"retailer",label:"Retailer"},{value:"other",label:"Other"}];v.useEffect(()=>{he()},[u]);const he=async()=>{var F,q;n(!0);try{const X=Object.fromEntries(Object.entries(u).filter(([Le,V])=>V)),xe=await Xt.list(X);t(xe.data.organizations||xe.data||[])}catch(X){i(((q=(F=X.response)==null?void 0:F.data)==null?void 0:q.error)||"Failed to load organizations")}finally{n(!1)}},W=async F=>{var q,X;F.preventDefault();try{o?await Xt.update(o.id,f):await Xt.create(f),d(!1),c(null),Y(),he()}catch(xe){i(((X=(q=xe.response)==null?void 0:q.data)==null?void 0:X.error)||"Failed to save organization")}},te=F=>{c(F);let q="";if(F.vatNumber){const Le=F.vatNumber.substring(0,2).toUpperCase();vn[Le]&&(q=Le)}const X=F.address||{street:"",city:"",region:"",country:"",postalCode:""};h({name:F.name||"",type:F.type||"supplier",legalName:F.legalName||"",registrationNumber:F.registrationNumber||"",vatNumber:F.vatNumber||"",vatCountry:q,domain:F.domain||"",address:X,contactInfo:F.contactInfo||{email:"",phone:"",website:""}}),x({valid:null,error:null});const xe=[X.street,X.city,X.region,X.country].filter(Boolean).join(", ");k(xe),re({valid:null,error:null}),d(!0)},ae=(F,q)=>{if(!F||!q)return{valid:null,error:null};const X=vn[q];if(!X)return{valid:null,error:"Unknown country format"};const xe=F.replace(/\s/g,"").toUpperCase();return X.pattern.test(xe)?{valid:!0,error:null}:{valid:!1,error:`Invalid format for ${X.name}. Expected: ${X.example}`}},Z=F=>{h(q=>({...q,vatNumber:F})),f.vatCountry&&x(ae(F,f.vatCountry))},oe=F=>{h(q=>({...q,vatCountry:F})),f.vatNumber?x(ae(f.vatNumber,F)):x({valid:null,error:null})},ve=v.useCallback(async F=>{if(!F||F.length<3){R([]);return}M(!0);try{const X=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(F)}&limit=5&addressdetails=1`,{headers:{"User-Agent":"DPP-System/1.0"}})).json();R(X.map(xe=>({display_name:xe.display_name,lat:parseFloat(xe.lat),lng:parseFloat(xe.lon),address:xe.address||{}})))}catch(q){console.error("Address search failed:",q),R([])}finally{M(!1)}},[]),ee=F=>{const q=F.address,X=[q.house_number,q.road].filter(Boolean).join(" ")||q.pedestrian||q.neighbourhood||"",xe=q.city||q.town||q.village||q.municipality||"",Le=q.state||q.province||q.region||"",V=q.country||"",se=q.postcode||"";h(fe=>({...fe,address:{street:X,city:xe,region:Le,country:V,postalCode:se}})),k(F.display_name),R([]),ne({city:xe,region:Le,country:V,postalCode:se})},ne=F=>{const q=[];if(!F.city&&!F.region&&q.push("City or region is required"),F.country||q.push("Country is required"),F.postalCode&&F.country){const xe={"United States":/^\d{5}(-\d{4})?$/,USA:/^\d{5}(-\d{4})?$/,"United Kingdom":/^[A-Z]{1,2}\d[A-Z\d]?\s*\d[A-Z]{2}$/i,UK:/^[A-Z]{1,2}\d[A-Z\d]?\s*\d[A-Z]{2}$/i,Canada:/^[A-Z]\d[A-Z]\s*\d[A-Z]\d$/i,Germany:/^\d{5}$/,Deutschland:/^\d{5}$/,France:/^\d{5}$/,Netherlands:/^\d{4}\s*[A-Z]{2}$/i,Nederland:/^\d{4}\s*[A-Z]{2}$/i,Brazil:/^\d{5}-?\d{3}$/,Brasil:/^\d{5}-?\d{3}$/,Australia:/^\d{4}$/,Japan:/^\d{3}-?\d{4}$/,:/^\d{3}-?\d{4}$/}[F.country];xe&&!xe.test(F.postalCode.trim())&&q.push(`Postal code format doesn't match ${F.country} format`)}q.length>0?re({valid:!1,error:q.join("; ")}):F.city||F.country?re({valid:!0,error:null}):re({valid:null,error:null})},me=F=>{k(F),L&&clearTimeout(L),D(setTimeout(()=>ve(F),500))},_=async F=>{var q,X;if(confirm("Generate new signing keys for this organization? This will replace any existing keys.")){y(!0);try{await Ze.generateKeys(F.id),await he(),b(null),alert("Signing keys generated successfully!")}catch(xe){i(((X=(q=xe.response)==null?void 0:q.data)==null?void 0:X.message)||"Failed to generate keys")}finally{y(!1)}}},G=async F=>{var q,X;if(confirm("Are you sure you want to delete this organization?"))try{await Xt.delete(F),he()}catch(xe){i(((X=(q=xe.response)==null?void 0:q.data)==null?void 0:X.error)||"Failed to delete organization")}},Y=()=>{h({name:"",type:"supplier",legalName:"",registrationNumber:"",vatNumber:"",vatCountry:"",domain:"",address:{street:"",city:"",region:"",country:"",postalCode:""},contactInfo:{email:"",phone:"",website:""}}),x({valid:null,error:null}),k(""),R([]),re({valid:null,error:null})},S=F=>{const q={supplier:"bg-green-100 text-green-800",manufacturer:"bg-blue-100 text-blue-800",distributor:"bg-purple-100 text-purple-800",recycler:"bg-teal-100 text-teal-800",certifier:"bg-yellow-100 text-yellow-800",logistics:"bg-orange-100 text-orange-800",retailer:"bg-pink-100 text-pink-800",other:"bg-gray-100 text-gray-800"};return a.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${q[F]||q.other}`,children:F})};return r&&e.length===0?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Organizations"}),a.jsx("button",{onClick:()=>{Y(),c(null),d(!0)},className:"btn-primary",children:"+ New Organization"})]}),s&&a.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6",children:[s,a.jsx("button",{onClick:()=>i(null),className:"ml-2 text-red-900",children:""})]}),a.jsx("div",{className:"card mb-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Search"}),a.jsx("input",{type:"text",value:u.search,onChange:F=>p(q=>({...q,search:F.target.value})),className:"input",placeholder:"Name, registration..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Type"}),a.jsxs("select",{value:u.type,onChange:F=>p(q=>({...q,type:F.target.value})),className:"input",children:[a.jsx("option",{value:"",children:"All types"}),ie.map(F=>a.jsx("option",{value:F.value,children:F.label},F.value))]})]})]})}),l&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto m-4",children:a.jsxs("div",{className:"p-6",children:[a.jsx("h2",{className:"text-xl font-bold mb-4",children:o?"Edit Organization":"New Organization"}),a.jsxs("form",{onSubmit:W,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Name *"}),a.jsx("input",{type:"text",value:f.name,onChange:F=>h(q=>({...q,name:F.target.value})),className:"input",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Type *"}),a.jsx("select",{value:f.type,onChange:F=>h(q=>({...q,type:F.target.value})),className:"input",required:!0,children:ie.map(F=>a.jsx("option",{value:F.value,children:F.label},F.value))})]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Legal Name"}),a.jsx("input",{type:"text",value:f.legalName,onChange:F=>h(q=>({...q,legalName:F.target.value})),className:"input"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Registration Number"}),a.jsx("input",{type:"text",value:f.registrationNumber,onChange:F=>h(q=>({...q,registrationNumber:F.target.value})),className:"input"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Domain (for DID)"}),a.jsx("input",{type:"text",value:f.domain,onChange:F=>h(q=>({...q,domain:F.target.value})),className:"input",placeholder:"example.com"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Used for did:web"})]})]}),a.jsxs("div",{className:"border-t pt-4",children:[a.jsx("h3",{className:"font-medium mb-2",children:"VAT Information"}),a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Country"}),a.jsxs("select",{value:f.vatCountry,onChange:F=>oe(F.target.value),className:"input",children:[a.jsx("option",{value:"",children:"Select country..."}),Lv.map(F=>{var q;return a.jsx("optgroup",{label:F,children:(q=Tv[F])==null?void 0:q.map(({code:X,name:xe})=>a.jsxs("option",{value:X,children:[xe," (",X,")"]},X))},F)})]})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsx("label",{className:"label",children:"VAT Number"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"text",value:f.vatNumber,onChange:F=>Z(F.target.value),className:`input pr-10 ${j.valid===!0?"border-green-500 focus:ring-green-500":j.valid===!1?"border-red-500 focus:ring-red-500":""}`,placeholder:f.vatCountry?(C=vn[f.vatCountry])==null?void 0:C.example:"Select country first"}),j.valid===!0&&a.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-green-500",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),j.valid===!1&&a.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-red-500",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),j.error&&a.jsx("p",{className:"text-xs text-red-600 mt-1",children:j.error}),j.valid===!0&&a.jsx("p",{className:"text-xs text-green-600 mt-1",children:"Valid format"}),!j.error&&!j.valid&&f.vatCountry&&a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Format: ",(A=vn[f.vatCountry])==null?void 0:A.example]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Verify with Verifiable Credential in IDs section after registration"})]}),a.jsxs("div",{className:"border-t pt-4",children:[a.jsx("h3",{className:"font-medium mb-2",children:"Address"}),a.jsxs("div",{className:"relative mb-4",children:[a.jsx("label",{className:"label",children:"Search Address"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"text",value:w,onChange:F=>me(F.target.value),className:`input pr-10 ${H.valid===!0?"border-green-500":H.valid===!1?"border-red-500":""}`,placeholder:"Search for address, city, or place..."}),U&&a.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:a.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-primary-500 border-t-transparent rounded-full"})}),H.valid===!0&&!U&&a.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-green-500",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})]}),I.length>0&&a.jsx("div",{className:"absolute z-10 mt-1 w-full bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:I.map((F,q)=>a.jsx("button",{type:"button",onClick:()=>ee(F),className:"w-full text-left px-4 py-2 hover:bg-gray-100 border-b border-gray-100 last:border-0 text-sm",children:F.display_name},q))}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Search for an address to auto-fill all fields below"}),H.error&&a.jsx("p",{className:"text-xs text-red-600 mt-1",children:H.error})]}),(f.address.city||f.address.country)&&a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 space-y-2",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Street:"}),a.jsx("span",{className:"ml-2 text-gray-900",children:f.address.street||"-"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"City:"}),a.jsx("span",{className:"ml-2 text-gray-900",children:f.address.city||"-"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Region:"}),a.jsx("span",{className:"ml-2 text-gray-900",children:f.address.region||"-"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Country:"}),a.jsx("span",{className:"ml-2 text-gray-900",children:f.address.country||"-"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Postal Code:"}),a.jsx("span",{className:"ml-2 text-gray-900",children:f.address.postalCode||"-"})]})]}),a.jsx("button",{type:"button",onClick:()=>{h(F=>({...F,address:{street:"",city:"",region:"",country:"",postalCode:""}})),k(""),re({valid:null,error:null})},className:"text-xs text-red-600 hover:text-red-700",children:"Clear address"})]})]}),a.jsxs("div",{className:"border-t pt-4",children:[a.jsx("h3",{className:"font-medium mb-2",children:"Contact Information"}),a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Email"}),a.jsx("input",{type:"email",value:f.contactInfo.email,onChange:F=>h(q=>({...q,contactInfo:{...q.contactInfo,email:F.target.value}})),className:"input"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Phone"}),a.jsx("input",{type:"text",value:f.contactInfo.phone,onChange:F=>h(q=>({...q,contactInfo:{...q.contactInfo,phone:F.target.value}})),className:"input"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Website"}),a.jsx("input",{type:"url",value:f.contactInfo.website,onChange:F=>h(q=>({...q,contactInfo:{...q.contactInfo,website:F.target.value}})),className:"input"})]})]})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"submit",className:"btn-primary",children:o?"Update":"Create"}),a.jsx("button",{type:"button",onClick:()=>{d(!1),c(null)},className:"btn-secondary",children:"Cancel"})]})]})]})})}),m&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full max-h-[90vh] overflow-y-auto m-4",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h2",{className:"text-xl font-bold",children:["Identifiers: ",m.name]}),a.jsx("button",{onClick:()=>N(null),className:"text-gray-400 hover:text-gray-600",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsx($c,{entityType:"organization",entityId:m.id,entityData:m})]})})}),g&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full m-4 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h2",{className:"text-xl font-bold",children:"DID & Signing Keys"}),a.jsx("button",{onClick:()=>b(null),className:"text-gray-400 hover:text-gray-600",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[a.jsx("h3",{className:"font-medium text-gray-900",children:g.name}),a.jsx("p",{className:"text-sm text-gray-500",children:g.type})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"DID (Decentralized Identifier)"}),a.jsx("div",{className:"p-3 bg-gray-100 rounded-lg font-mono text-sm",children:g.domain?`did:web:${g.domain}`:a.jsx("span",{className:"text-gray-400",children:"No domain configured - edit organization to add domain"})}),g.signingKeyPublic&&a.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[a.jsxs("a",{href:`/api/credentials/organizations/${g.id}/did.json`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-sm text-primary-600 hover:text-primary-800",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),"View DID Document (Local)"]}),g.domain&&a.jsxs("a",{href:"https://dev.uniresolver.io/",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-sm text-indigo-600 hover:text-indigo-800",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Universal DID Resolver"]})]}),g.domain&&g.signingKeyPublic&&a.jsxs("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[a.jsxs("p",{className:"text-xs text-blue-800",children:[a.jsx("strong",{children:"did:web Resolution:"})," For public verification, the DID document must be hosted at:"]}),a.jsxs("code",{className:"text-xs text-blue-700 block mt-1 bg-blue-100 p-1 rounded",children:["https://",g.domain,"/.well-known/did.json"]}),a.jsx("p",{className:"text-xs text-blue-600 mt-2",children:'Copy the DID document from the "View DID Document" link and host it at this URL on your domain.'})]}),g.domain&&!g.signingKeyPublic&&a.jsx("p",{className:"text-xs text-amber-600 mt-2",children:"Note: DID document will only be available after generating signing keys"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Signing Keys"}),g.signingKeyPublic?a.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),a.jsx("span",{className:"text-green-800 font-medium",children:"Keys Generated"})]}),a.jsxs("p",{className:"text-xs text-green-600 mt-2 font-mono truncate",children:["Public Key: ",(ue=g.signingKeyPublic)==null?void 0:ue.substring(0,50),"..."]})]}):a.jsxs("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("svg",{className:"w-5 h-5 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),a.jsx("span",{className:"text-yellow-800 font-medium",children:"No Signing Keys"})]}),a.jsx("p",{className:"text-sm text-yellow-600 mt-1",children:"Generate Ed25519 signing keys to issue Verifiable Credentials"})]})]}),a.jsxs("div",{className:"border-t pt-4",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Signing keys are used to create cryptographic proofs for Verifiable Credentials (DPP, DCC, DTE). The private key is stored securely and never exposed."}),a.jsx("button",{onClick:()=>_(g),disabled:E||!g.domain,className:"btn-primary w-full disabled:opacity-50",children:E?"Generating...":g.signingKeyPublic?"Regenerate Keys":"Generate Signing Keys"}),!g.domain&&a.jsx("p",{className:"text-xs text-red-500 mt-2 text-center",children:"Please add a domain to the organization first"})]})]})]})}),a.jsx("div",{className:"card overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Organization"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"DID / Keys"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Location"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Contact"}),a.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:6,className:"px-4 py-8 text-center text-gray-500",children:"No organizations found"})}):e.map(F=>{var q,X,xe;return a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsxs("td",{className:"px-4 py-3",children:[a.jsx("div",{className:"font-medium text-gray-900",children:F.name}),F.legalName&&a.jsx("div",{className:"text-sm text-gray-500",children:F.legalName})]}),a.jsx("td",{className:"px-4 py-3",children:S(F.type)}),a.jsx("td",{className:"px-4 py-3",children:F.signingKeyPublic?a.jsxs("div",{children:[a.jsx("span",{className:"badge badge-green text-xs",children:"Keys Active"}),a.jsx("a",{href:`/api/credentials/organizations/${F.id}/did.json`,target:"_blank",rel:"noopener noreferrer",className:"block text-xs text-primary-600 hover:text-primary-800 mt-1 font-mono truncate max-w-[150px]",title:"Click to view DID document",children:F.domain?`did:web:${F.domain}`:"View DID Doc"})]}):a.jsx("button",{onClick:()=>b(F),className:"text-xs text-primary-600 hover:text-primary-800",children:"Setup DID"})}),a.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:(q=F.address)!=null&&q.city&&((X=F.address)!=null&&X.country)?`${F.address.city}, ${F.address.country}`:"-"}),a.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:((xe=F.contactInfo)==null?void 0:xe.email)||"-"}),a.jsxs("td",{className:"px-4 py-3 text-right",children:[a.jsx("button",{onClick:()=>b(F),className:"text-indigo-600 hover:text-indigo-800 text-sm mr-3",title:"Manage DID & Keys",children:"DID"}),a.jsx("button",{onClick:()=>N(F),className:"text-gray-600 hover:text-gray-800 text-sm mr-3",title:"Manage Identifiers",children:"IDs"}),a.jsx("button",{onClick:()=>te(F),className:"text-primary-600 hover:text-primary-800 text-sm mr-3",children:"Edit"}),a.jsx("button",{onClick:()=>G(F.id),className:"text-red-600 hover:text-red-800 text-sm",children:"Delete"})]})]},F.id)})})]})})})]})}const Ts=[{code:"AF",name:"Afghanistan"},{code:"AL",name:"Albania"},{code:"DZ",name:"Algeria"},{code:"AR",name:"Argentina"},{code:"AU",name:"Australia"},{code:"AT",name:"Austria"},{code:"BE",name:"Belgium"},{code:"BR",name:"Brazil"},{code:"CA",name:"Canada"},{code:"CL",name:"Chile"},{code:"CN",name:"China"},{code:"CO",name:"Colombia"},{code:"CG",name:"Congo"},{code:"CD",name:"Congo (DRC)"},{code:"CR",name:"Costa Rica"},{code:"HR",name:"Croatia"},{code:"CZ",name:"Czech Republic"},{code:"DK",name:"Denmark"},{code:"EC",name:"Ecuador"},{code:"EG",name:"Egypt"},{code:"FI",name:"Finland"},{code:"FR",name:"France"},{code:"DE",name:"Germany"},{code:"GH",name:"Ghana"},{code:"GR",name:"Greece"},{code:"HK",name:"Hong Kong"},{code:"HU",name:"Hungary"},{code:"IN",name:"India"},{code:"ID",name:"Indonesia"},{code:"IE",name:"Ireland"},{code:"IL",name:"Israel"},{code:"IT",name:"Italy"},{code:"JP",name:"Japan"},{code:"KE",name:"Kenya"},{code:"KR",name:"South Korea"},{code:"MY",name:"Malaysia"},{code:"MX",name:"Mexico"},{code:"MA",name:"Morocco"},{code:"NL",name:"Netherlands"},{code:"NZ",name:"New Zealand"},{code:"NG",name:"Nigeria"},{code:"NO",name:"Norway"},{code:"PK",name:"Pakistan"},{code:"PA",name:"Panama"},{code:"PE",name:"Peru"},{code:"PH",name:"Philippines"},{code:"PL",name:"Poland"},{code:"PT",name:"Portugal"},{code:"RO",name:"Romania"},{code:"RU",name:"Russia"},{code:"SA",name:"Saudi Arabia"},{code:"SG",name:"Singapore"},{code:"ZA",name:"South Africa"},{code:"ES",name:"Spain"},{code:"SE",name:"Sweden"},{code:"CH",name:"Switzerland"},{code:"TW",name:"Taiwan"},{code:"TH",name:"Thailand"},{code:"TR",name:"Turkey"},{code:"UA",name:"Ukraine"},{code:"AE",name:"United Arab Emirates"},{code:"GB",name:"United Kingdom"},{code:"US",name:"United States"},{code:"VN",name:"Vietnam"},{code:"ZM",name:"Zambia"},{code:"ZW",name:"Zimbabwe"}].sort((e,t)=>e.name.localeCompare(t.name)),Il={wood:{label:"Wood / Timber",fields:{treeSpecies:{type:"string",label:"Tree Species",required:!0},forestType:{type:"select",label:"Forest Type",options:[{value:"natural",label:"Natural Forest"},{value:"plantation",label:"Plantation"},{value:"agroforestry",label:"Agroforestry"},{value:"urban_forest",label:"Urban Forest"},{value:"unknown",label:"Unknown"}],required:!1},harvestPermitNumber:{type:"string",label:"Harvest Permit Number",required:!1},forestCertification:{type:"select",label:"Forest Certification",options:[{value:"FSC",label:"FSC (Forest Stewardship Council)"},{value:"PEFC",label:"PEFC (Programme for Endorsement)"},{value:"SFI",label:"SFI (Sustainable Forestry Initiative)"},{value:"removal_permit",label:"Removal Permit"},{value:"other",label:"Other Certification"},{value:"none",label:"No Certification"}],required:!1}}},metal:{label:"Metal / Mineral",fields:{metalType:{type:"select",label:"Metal Type",options:[{value:"iron",label:"Iron"},{value:"aluminum",label:"Aluminum"},{value:"copper",label:"Copper"},{value:"lithium",label:"Lithium"},{value:"cobalt",label:"Cobalt"},{value:"nickel",label:"Nickel"},{value:"rare_earth",label:"Rare Earth Elements"},{value:"other",label:"Other"}],required:!0},alloyGrade:{type:"string",label:"Alloy/Grade",required:!1},mineSource:{type:"string",label:"Mine/Source Name",required:!1},conflictFree:{type:"boolean",label:"Conflict-Free Certified",required:!1},recycledContent:{type:"number",label:"Recycled Content (%)",required:!1}}},plastic:{label:"Plastic / Polymer",fields:{polymerType:{type:"select",label:"Polymer Type",options:[{value:"PET",label:"PET (Polyethylene Terephthalate)"},{value:"HDPE",label:"HDPE (High-Density Polyethylene)"},{value:"PVC",label:"PVC (Polyvinyl Chloride)"},{value:"LDPE",label:"LDPE (Low-Density Polyethylene)"},{value:"PP",label:"PP (Polypropylene)"},{value:"PS",label:"PS (Polystyrene)"},{value:"ABS",label:"ABS (Acrylonitrile Butadiene Styrene)"},{value:"other",label:"Other"}],required:!0},recycledContent:{type:"number",label:"Recycled Content (%)",required:!1},biobasedContent:{type:"number",label:"Bio-based Content (%)",required:!1},foodGrade:{type:"boolean",label:"Food Grade Certified",required:!1}}},textile:{label:"Textile / Fiber",fields:{fiberType:{type:"select",label:"Fiber Type",options:[{value:"cotton",label:"Cotton"},{value:"wool",label:"Wool"},{value:"silk",label:"Silk"},{value:"linen",label:"Linen"},{value:"polyester",label:"Polyester"},{value:"nylon",label:"Nylon"},{value:"viscose",label:"Viscose"},{value:"hemp",label:"Hemp"},{value:"other",label:"Other"}],required:!0},organicCertified:{type:"boolean",label:"Organic Certified",required:!1},certificationBody:{type:"string",label:"Certification Body (GOTS, OCS, etc.)",required:!1},recycledContent:{type:"number",label:"Recycled Content (%)",required:!1}}},chemical:{label:"Chemical / Compound",fields:{chemicalName:{type:"string",label:"Chemical Name",required:!0},casNumber:{type:"string",label:"CAS Number",required:!1},concentration:{type:"number",label:"Concentration (%)",required:!1},hazardClass:{type:"string",label:"Hazard Classification",required:!1},reachCompliant:{type:"boolean",label:"REACH Compliant",required:!1}}},electronic:{label:"Electronic Component",fields:{componentType:{type:"string",label:"Component Type",required:!0},manufacturer:{type:"string",label:"Manufacturer",required:!1},partNumber:{type:"string",label:"Part Number",required:!1},rohsCompliant:{type:"boolean",label:"RoHS Compliant",required:!1}}},other:{label:"Other",fields:{description:{type:"string",label:"Material Description",required:!0}}}},mn={furniture:{label:"Furniture (EUDR)",fields:{}},batteries:{label:"Batteries (EU Battery Regulation)",fields:{}},electronics:{label:"Electronics (RoHS/WEEE)",fields:{}},textiles_apparel:{label:"Textiles & Apparel (EU Textile Strategy)",fields:{}},food_contact:{label:"Food Contact Materials (FCM)",fields:{}}},Dv=[{value:"unknown",label:"Unknown / Not Yet Determined"},{value:"furniture",label:"Furniture"},{value:"construction",label:"Construction Materials"},{value:"packaging",label:"Packaging"},{value:"automotive",label:"Automotive"},{value:"electronics",label:"Electronics"},{value:"textiles_apparel",label:"Textiles & Apparel"},{value:"batteries",label:"Batteries"},{value:"toys",label:"Toys"},{value:"food_contact",label:"Food Contact Materials"},{value:"medical",label:"Medical Devices"},{value:"other",label:"Other"}],Rv=[{value:"identity_preserved",label:"Identity Preserved"},{value:"segregated",label:"Segregated"},{value:"controlled_blending",label:"Controlled Blending"},{value:"mass_balance",label:"Mass Balance"},{value:"book_and_claim",label:"Book and Claim"}];function Tu(){var ne,me;const e=va(),{id:t}=Zr(),r=!!t,[n,s]=v.useState(!1),[i,l]=v.useState(!1),[d,o]=v.useState(null),[c,u]=v.useState(null),[p,m]=v.useState([]),[N,f]=v.useState([]),[h,j]=v.useState({materialType:"",materialSubtype:"",name:"",description:"",quantity:"",unitOfMeasure:"kg",extractionDate:"",originCountry:"",originRegion:"",originAddress:{street:"",city:"",region:"",country:"",postalCode:""},geoLocation:{lat:"",lng:"",address:""},sourceNodeId:"",supplierOrganizationId:"",custodyModel:"identity_preserved",intendedProductCategories:["unknown"],attributes:{},categoryAttributes:{},environmentalData:{carbonFootprintKg:"",energyConsumptionKwh:"",waterUsageLiters:"",wasteGeneratedKg:"",renewableEnergyPercent:"",emissionScope:"scope_3",calculationMethod:"",verificationStatus:"unverified"},notes:""}),[x,g]=v.useState(""),[b,E]=v.useState([]),[y,w]=v.useState(!1),[k,I]=v.useState(null);v.useEffect(()=>{R(),r&&U()},[t]);const R=async()=>{var _,G;try{const[Y,S]=await Promise.all([Xt.list().catch(C=>({data:{organizations:[]}})),tv.list().catch(C=>({data:{nodes:[]}}))]);m(((_=Y.data)==null?void 0:_.organizations)||Y.data||[]),f(((G=S.data)==null?void 0:G.nodes)||S.data||[])}catch(Y){console.error("Failed to load options:",Y)}},U=async()=>{var _,G,Y;s(!0);try{const C=(await $a.get(t)).data;u(C),j({materialType:C.materialType||"",materialSubtype:C.materialSubtype||"",name:C.name||"",description:C.description||"",quantity:C.quantity||"",unitOfMeasure:C.unitOfMeasure||"kg",extractionDate:C.extractionDate||"",originCountry:C.originCountry||"",originRegion:C.originRegion||"",originAddress:C.originAddress||{street:"",city:"",region:"",country:"",postalCode:""},geoLocation:C.geoLocation||{lat:"",lng:"",address:""},sourceNodeId:C.sourceNodeId||"",supplierOrganizationId:C.supplierOrganizationId||"",custodyModel:C.custodyModel||"identity_preserved",intendedProductCategories:C.intendedProductCategories||["unknown"],attributes:C.attributes||{},categoryAttributes:C.categoryAttributes||{},environmentalData:C.environmentalData||{carbonFootprintKg:"",energyConsumptionKwh:"",waterUsageLiters:"",wasteGeneratedKg:"",renewableEnergyPercent:"",emissionScope:"scope_3",calculationMethod:"",verificationStatus:"unverified"},notes:C.notes||""}),(_=C.geoLocation)!=null&&_.address&&g(C.geoLocation.address)}catch(S){o(((Y=(G=S.response)==null?void 0:G.data)==null?void 0:Y.error)||"Failed to load material")}finally{s(!1)}},M=_=>{const{name:G,value:Y}=_.target;j(S=>({...S,[G]:Y}))},L=(_,G)=>{j(Y=>({...Y,environmentalData:{...Y.environmentalData,[_]:G}}))},D=_=>{const G=_.target.value;j(Y=>({...Y,materialType:G,attributes:{}}))},H=(_,G)=>{j(Y=>({...Y,attributes:{...Y.attributes,[_]:G}}))},re=_=>{j(G=>{let Y=[...G.intendedProductCategories];return _==="unknown"?Y=["unknown"]:(Y=Y.filter(S=>S!=="unknown"),Y.includes(_)?Y=Y.filter(S=>S!==_):Y.push(_),Y.length===0&&(Y=["unknown"])),{...G,intendedProductCategories:Y}})},ie=(_,G)=>{j(Y=>({...Y,categoryAttributes:{...Y.categoryAttributes,[_]:G}}))},he=v.useCallback(async _=>{if(!_||_.length<3){E([]);return}w(!0);try{const Y=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(_)}&limit=5&addressdetails=1`,{headers:{"User-Agent":"DPP-System/1.0"}})).json();E(Y.map(S=>({display_name:S.display_name,lat:parseFloat(S.lat),lng:parseFloat(S.lon),address:S.address||{}})))}catch(G){console.error("Address search failed:",G),E([])}finally{w(!1)}},[]),W=_=>{var X;const G=_.address,Y=[G.house_number,G.road].filter(Boolean).join(" "),S=G.city||G.town||G.village||G.municipality||"",C=G.state||G.province||G.county||"",A=G.country||"",ue=G.postcode||"",F=((X=G.country_code)==null?void 0:X.toUpperCase())||"",q=Ts.find(xe=>xe.code===F);j(xe=>({...xe,originCountry:q?F:xe.originCountry,originRegion:C||xe.originRegion,originAddress:{street:Y,city:S,region:C,country:A,postalCode:ue},geoLocation:{lat:_.lat,lng:_.lng,address:_.display_name}})),g(_.display_name),E([])},te=(_,G)=>{j(Y=>({...Y,originAddress:{...Y.originAddress,[_]:G}}))},ae=(_,G)=>{j(Y=>({...Y,geoLocation:{...Y.geoLocation,[_]:G}}))},Z=()=>{const _={};return h.intendedProductCategories.forEach(G=>{var Y;(Y=mn[G])!=null&&Y.fields&&Object.assign(_,mn[G].fields)}),_},oe=async _=>{var G,Y;_.preventDefault(),l(!0),o(null);try{const S={...h,originAddress:h.originAddress.street||h.originAddress.city?h.originAddress:null,geoLocation:h.geoLocation.lat&&h.geoLocation.lng?{lat:parseFloat(h.geoLocation.lat),lng:parseFloat(h.geoLocation.lng),address:h.geoLocation.address||""}:null,quantity:h.quantity?parseFloat(h.quantity):null,environmentalData:{...h.environmentalData,carbonFootprintKg:h.environmentalData.carbonFootprintKg?parseFloat(h.environmentalData.carbonFootprintKg):null,energyConsumptionKwh:h.environmentalData.energyConsumptionKwh?parseFloat(h.environmentalData.energyConsumptionKwh):null,waterUsageLiters:h.environmentalData.waterUsageLiters?parseFloat(h.environmentalData.waterUsageLiters):null,wasteGeneratedKg:h.environmentalData.wasteGeneratedKg?parseFloat(h.environmentalData.wasteGeneratedKg):null,renewableEnergyPercent:h.environmentalData.renewableEnergyPercent?parseFloat(h.environmentalData.renewableEnergyPercent):null}};r?await $a.update(t,S):await $a.create(S),e("/admin/materials")}catch(S){o(((Y=(G=S.response)==null?void 0:G.data)==null?void 0:Y.error)||"Failed to save material")}finally{l(!1)}},ve=()=>{if(!h.materialType)return null;const _=Il[h.materialType];return _?Object.entries(_.fields).map(([G,Y])=>a.jsxs("div",{children:[a.jsxs("label",{className:"label",children:[Y.label,Y.required&&" *"]}),Y.type==="select"?a.jsxs("select",{value:h.attributes[G]||"",onChange:S=>H(G,S.target.value),className:"input",required:Y.required,children:[a.jsx("option",{value:"",children:"Select..."}),Y.options.map(S=>typeof S=="object"?a.jsx("option",{value:S.value,children:S.label},S.value):a.jsx("option",{value:S,children:S},S))]}):Y.type==="boolean"?a.jsxs("div",{className:"flex items-center mt-2",children:[a.jsx("input",{type:"checkbox",checked:h.attributes[G]||!1,onChange:S=>H(G,S.target.checked),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),a.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Yes"})]}):Y.type==="number"?a.jsx("input",{type:"number",value:h.attributes[G]||"",onChange:S=>H(G,S.target.value),className:"input",step:"any",required:Y.required}):Y.type==="date"?a.jsx("input",{type:"date",value:h.attributes[G]||"",onChange:S=>H(G,S.target.value),className:"input",required:Y.required}):a.jsx("input",{type:"text",value:h.attributes[G]||"",onChange:S=>H(G,S.target.value),className:"input",required:Y.required})]},G)):null},ee=()=>{const _=Z();return Object.keys(_).length===0?null:Object.entries(_).map(([G,Y])=>a.jsxs("div",{children:[a.jsxs("label",{className:"label",children:[Y.label,Y.required&&" *"]}),Y.type==="select"?a.jsxs("select",{value:h.categoryAttributes[G]||"",onChange:S=>ie(G,S.target.value),className:"input",required:Y.required,children:[a.jsx("option",{value:"",children:"Select..."}),Y.options.map(S=>typeof S=="object"?a.jsx("option",{value:S.value,children:S.label},S.value):a.jsx("option",{value:S,children:S},S))]}):Y.type==="boolean"?a.jsxs("div",{className:"flex items-center mt-2",children:[a.jsx("input",{type:"checkbox",checked:h.categoryAttributes[G]||!1,onChange:S=>ie(G,S.target.checked),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),a.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Yes"})]}):Y.type==="number"?a.jsx("input",{type:"number",value:h.categoryAttributes[G]||"",onChange:S=>ie(G,S.target.value),className:"input",step:"any",required:Y.required}):a.jsx("input",{type:"text",value:h.categoryAttributes[G]||"",onChange:S=>ie(G,S.target.value),className:"input",required:Y.required})]},G))};return n?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):a.jsxs("div",{className:"max-w-3xl mx-auto",children:[a.jsx("div",{className:"mb-6",children:a.jsxs("button",{onClick:()=>e("/admin/materials"),className:"text-gray-600 hover:text-gray-900 flex items-center gap-1",children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Materials"]})}),a.jsxs("div",{className:"card",children:[a.jsx("h1",{className:"text-xl font-bold text-gray-900 mb-6",children:r?"Edit Material":"New Material"}),d&&a.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6",children:d}),a.jsxs("form",{onSubmit:oe,className:"space-y-6",children:[a.jsxs("div",{className:"border-b pb-4",children:[a.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Material Type"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Material Type *"}),a.jsxs("select",{name:"materialType",value:h.materialType,onChange:D,className:"input",required:!0,disabled:r,children:[a.jsx("option",{value:"",children:"Select material type..."}),Object.entries(Il).map(([_,G])=>a.jsx("option",{value:_,children:G.label},_))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Material Name *"}),a.jsx("input",{type:"text",name:"name",value:h.name,onChange:M,className:"input",placeholder:"e.g., Brazilian Mahogany Batch 2024-001",required:!0})]})]}),a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{className:"label",children:"Description"}),a.jsx("textarea",{name:"description",value:h.description,onChange:M,className:"input",rows:2})]})]}),h.materialType&&a.jsxs("div",{className:"border-b pb-4",children:[a.jsxs("h2",{className:"text-lg font-semibold mb-4",children:[(ne=Il[h.materialType])==null?void 0:ne.label," Details"]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:ve()})]}),a.jsxs("div",{className:"border-b pb-4",children:[a.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Intended Product Categories"}),a.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Select the product categories this material may be used for. This helps determine applicable regulations."}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:Dv.map(_=>a.jsxs("label",{className:`flex items-center p-3 rounded-lg border cursor-pointer transition-colors ${h.intendedProductCategories.includes(_.value)?"border-primary-500 bg-primary-50":"border-gray-200 hover:border-gray-300"}`,children:[a.jsx("input",{type:"checkbox",checked:h.intendedProductCategories.includes(_.value),onChange:()=>re(_.value),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),a.jsx("span",{className:"ml-2 text-sm",children:_.label})]},_.value))}),h.intendedProductCategories.some(_=>mn[_])&&a.jsxs("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[a.jsx("h3",{className:"font-medium text-blue-900 mb-2",children:"Regulatory Requirements"}),Object.keys(Z()).length>0?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:ee()}):a.jsxs("p",{className:"text-sm text-blue-700",children:["Additional regulatory fields for the selected categories will be available in a future update. Selected regulations: ",h.intendedProductCategories.filter(_=>mn[_]).map(_=>mn[_].label).join(", ")]})]})]}),a.jsxs("div",{className:"border-b pb-4",children:[a.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Quantity & Source"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Quantity *"}),a.jsx("input",{type:"number",name:"quantity",value:h.quantity,onChange:M,className:"input",step:"any",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Unit"}),a.jsxs("select",{name:"unitOfMeasure",value:h.unitOfMeasure,onChange:M,className:"input",children:[a.jsx("option",{value:"kg",children:"Kilograms (kg)"}),a.jsx("option",{value:"m3",children:"Cubic meters (m)"}),a.jsx("option",{value:"units",children:"Units"}),a.jsx("option",{value:"liters",children:"Liters"}),a.jsx("option",{value:"tons",children:"Tons"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Extraction/Source Date"}),a.jsx("input",{type:"date",name:"extractionDate",value:h.extractionDate,onChange:M,className:"input"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Custody Model *"}),a.jsx("select",{name:"custodyModel",value:h.custodyModel,onChange:M,className:"input",required:!0,children:Rv.map(_=>a.jsx("option",{value:_.value,children:_.label},_.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Batch Number"}),a.jsx("input",{type:"text",name:"batchNumber",value:h.batchNumber||"",onChange:M,className:"input",placeholder:"e.g., BATCH-2024-001"})]})]})]}),a.jsxs("div",{className:"border-b pb-4",children:[a.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Origin & Location"}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"label",children:"Search Location"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"text",value:x,onChange:_=>{const G=_.target.value;g(G),k&&clearTimeout(k),I(setTimeout(()=>he(G),500))},className:`input pr-10 ${h.originAddress.city?"border-green-500":""}`,placeholder:"Search for address, city, or place to auto-fill..."}),y&&a.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:a.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-primary-500 border-t-transparent rounded-full"})}),h.originAddress.city&&!y&&a.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-green-500",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})]}),b.length>0&&a.jsx("div",{className:"absolute z-10 mt-1 w-full max-w-xl bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:b.map((_,G)=>a.jsx("button",{type:"button",onClick:()=>W(_),className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-50 border-b border-gray-100 last:border-b-0",children:_.display_name},G))}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Search to auto-fill address fields and GPS coordinates"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"label",children:"Street Address"}),a.jsx("input",{type:"text",value:h.originAddress.street,onChange:_=>te("street",_.target.value),className:`input ${h.originAddress.street?"border-green-300 bg-green-50":""}`,placeholder:"Street name and number"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"City *"}),a.jsx("input",{type:"text",value:h.originAddress.city,onChange:_=>te("city",_.target.value),className:`input ${h.originAddress.city?"border-green-300 bg-green-50":""}`,placeholder:"City or town",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Region / State"}),a.jsx("input",{type:"text",value:h.originAddress.region||h.originRegion,onChange:_=>{te("region",_.target.value),j(G=>({...G,originRegion:_.target.value}))},className:`input ${h.originAddress.region?"border-green-300 bg-green-50":""}`,placeholder:"State, province, or region"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Country *"}),a.jsxs("select",{name:"originCountry",value:h.originCountry,onChange:_=>{M(_);const G=Ts.find(Y=>Y.code===_.target.value);te("country",(G==null?void 0:G.name)||"")},className:`input ${h.originCountry?"border-green-300 bg-green-50":""}`,required:!0,children:[a.jsx("option",{value:"",children:"Select country..."}),Ts.map(_=>a.jsx("option",{value:_.code,children:_.name},_.code))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Postal Code"}),a.jsx("input",{type:"text",value:h.originAddress.postalCode,onChange:_=>te("postalCode",_.target.value),className:`input ${h.originAddress.postalCode?"border-green-300 bg-green-50":""}`,placeholder:"Postal / ZIP code"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"GPS Latitude"}),a.jsx("input",{type:"number",value:h.geoLocation.lat,onChange:_=>ae("lat",_.target.value),className:`input ${h.geoLocation.lat?"border-green-300 bg-green-50":""}`,step:"any",min:"-90",max:"90",placeholder:"-3.4653"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"GPS Longitude"}),a.jsx("input",{type:"number",value:h.geoLocation.lng,onChange:_=>ae("lng",_.target.value),className:`input ${h.geoLocation.lng?"border-green-300 bg-green-50":""}`,step:"any",min:"-180",max:"180",placeholder:"-62.2159"})]})]}),h.geoLocation.lat&&h.geoLocation.lng&&a.jsxs("div",{className:"mt-3 p-3 bg-green-50 rounded-lg border border-green-200",children:[a.jsxs("div",{className:"flex items-center gap-2 text-green-800 font-medium",children:[a.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Location Confirmed"]}),a.jsxs("div",{className:"text-sm text-green-700 mt-1",children:[h.originAddress.city&&a.jsxs("span",{children:[h.originAddress.city,", ",h.originAddress.region||h.originRegion]}),h.originCountry&&a.jsxs("span",{children:[" - ",(me=Ts.find(_=>_.code===h.originCountry))==null?void 0:me.name]})]}),a.jsxs("div",{className:"text-xs text-green-600 mt-1",children:["GPS: ",h.geoLocation.lat,", ",h.geoLocation.lng]})]})]}),a.jsxs("div",{className:"border-b pb-4",children:[a.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Supply Chain"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Supplier Organization"}),a.jsxs("select",{name:"supplierOrganizationId",value:h.supplierOrganizationId,onChange:M,className:"input",children:[a.jsx("option",{value:"",children:"Select supplier..."}),p.map(_=>a.jsxs("option",{value:_.id,children:[_.name," (",_.type,")"]},_.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Source Node"}),a.jsxs("select",{name:"sourceNodeId",value:h.sourceNodeId,onChange:M,className:"input",children:[a.jsx("option",{value:"",children:"Select source node..."}),N.map(_=>a.jsx("option",{value:_.id,children:_.name},_.id))]})]})]})]}),a.jsxs("div",{className:"border-b pb-4",children:[a.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Environmental Data"}),a.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Emission footprint and environmental impact data for this material batch"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Carbon Footprint (kg COe)"}),a.jsx("input",{type:"number",value:h.environmentalData.carbonFootprintKg,onChange:_=>L("carbonFootprintKg",_.target.value),className:"input",step:"any",min:"0",placeholder:"0.00"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Energy Consumption (kWh)"}),a.jsx("input",{type:"number",value:h.environmentalData.energyConsumptionKwh,onChange:_=>L("energyConsumptionKwh",_.target.value),className:"input",step:"any",min:"0",placeholder:"0.00"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Water Usage (Liters)"}),a.jsx("input",{type:"number",value:h.environmentalData.waterUsageLiters,onChange:_=>L("waterUsageLiters",_.target.value),className:"input",step:"any",min:"0",placeholder:"0.00"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Waste Generated (kg)"}),a.jsx("input",{type:"number",value:h.environmentalData.wasteGeneratedKg,onChange:_=>L("wasteGeneratedKg",_.target.value),className:"input",step:"any",min:"0",placeholder:"0.00"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Renewable Energy (%)"}),a.jsx("input",{type:"number",value:h.environmentalData.renewableEnergyPercent,onChange:_=>L("renewableEnergyPercent",_.target.value),className:"input",step:"any",min:"0",max:"100",placeholder:"0"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Emission Scope"}),a.jsxs("select",{value:h.environmentalData.emissionScope,onChange:_=>L("emissionScope",_.target.value),className:"input",children:[a.jsx("option",{value:"scope_1",children:"Scope 1 (Direct)"}),a.jsx("option",{value:"scope_2",children:"Scope 2 (Indirect - Energy)"}),a.jsx("option",{value:"scope_3",children:"Scope 3 (Indirect - Supply Chain)"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Calculation Method"}),a.jsx("input",{type:"text",value:h.environmentalData.calculationMethod,onChange:_=>L("calculationMethod",_.target.value),className:"input",placeholder:"e.g., GHG Protocol, ISO 14064"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Verification Status"}),a.jsxs("select",{value:h.environmentalData.verificationStatus,onChange:_=>L("verificationStatus",_.target.value),className:"input",children:[a.jsx("option",{value:"unverified",children:"Unverified"}),a.jsx("option",{value:"self_declared",children:"Self-Declared"}),a.jsx("option",{value:"third_party_verified",children:"Third-Party Verified"}),a.jsx("option",{value:"certified",children:"Certified"})]})]})]}),h.environmentalData.carbonFootprintKg&&a.jsxs("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg border border-blue-200",children:[a.jsxs("div",{className:"flex items-center gap-2 text-blue-800 font-medium",children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Environmental Impact Summary"]}),a.jsxs("div",{className:"text-sm text-blue-700 mt-2 grid grid-cols-2 gap-2",children:[a.jsxs("div",{children:["Carbon: ",h.environmentalData.carbonFootprintKg," kg COe"]}),h.environmentalData.energyConsumptionKwh&&a.jsxs("div",{children:["Energy: ",h.environmentalData.energyConsumptionKwh," kWh"]}),h.environmentalData.waterUsageLiters&&a.jsxs("div",{children:["Water: ",h.environmentalData.waterUsageLiters," L"]}),h.environmentalData.renewableEnergyPercent&&a.jsxs("div",{children:["Renewable: ",h.environmentalData.renewableEnergyPercent,"%"]})]}),a.jsxs("div",{className:"text-xs text-blue-600 mt-2",children:[h.environmentalData.verificationStatus==="third_party_verified"&&" Third-party verified",h.environmentalData.verificationStatus==="certified"&&" Certified",h.environmentalData.verificationStatus==="self_declared"&&" Self-declared",h.environmentalData.verificationStatus==="unverified"&&" Unverified"]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Notes"}),a.jsx("textarea",{name:"notes",value:h.notes,onChange:M,className:"input",rows:3})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"submit",disabled:i,className:"btn-primary",children:i?"Saving...":r?"Update Material":"Create Material"}),a.jsx("button",{type:"button",onClick:()=>e("/admin/materials"),className:"btn-secondary",children:"Cancel"})]})]})]})]})}const Mv={material:[{path:"name",label:"Material Name"},{path:"materialType",label:"Material Type",supportsService:!0},{path:"materialSubtype",label:"Material Subtype",supportsService:!0},{path:"quantity",label:"Quantity"},{path:"unitOfMeasure",label:"Unit of Measure"},{path:"originCountry",label:"Origin Country",supportsService:!0},{path:"originRegion",label:"Origin Region",supportsService:!0},{path:"harvestDate",label:"Harvest/Extraction Date"},{path:"batchNumber",label:"Batch Number"},{path:"chemicalComposition",label:"Chemical Composition",supportsService:!0},{path:"recycledContent",label:"Recycled Content %",supportsService:!0},{path:"sustainabilityClaims",label:"Sustainability Claims",supportsService:!0},{path:"deforestationFreeStatus",label:"Deforestation-Free Status",supportsService:!0},{path:"carbonFootprint",label:"Carbon Footprint",supportsService:!0}],transfer:[{path:"quantity",label:"Transfer Quantity"},{path:"unitOfMeasure",label:"Unit of Measure"},{path:"departureDate",label:"Departure Date"},{path:"arrivalDate",label:"Arrival Date"},{path:"fromOrganization",label:"Origin Organization"},{path:"toOrganization",label:"Destination Organization"},{path:"transportMode",label:"Transport Mode"},{path:"carrier",label:"Carrier"},{path:"trackingNumber",label:"Tracking Number"},{path:"temperature",label:"Transport Temperature"},{path:"chainOfCustodyStatus",label:"Chain of Custody"}],production:[{path:"batchNumber",label:"Batch Number"},{path:"productionType",label:"Production Type"},{path:"startDate",label:"Start Date"},{path:"endDate",label:"End Date"},{path:"inputMaterials",label:"Input Materials"},{path:"outputQuantity",label:"Output Quantity"},{path:"energyConsumption",label:"Energy Consumption"},{path:"waterUsage",label:"Water Usage"},{path:"wasteGenerated",label:"Waste Generated"},{path:"qualityScore",label:"Quality Score"},{path:"processParameters",label:"Process Parameters"},{path:"carbonFootprintKg",label:"Carbon Footprint (kg CO2e)"}],harvest:[{path:"permitNumber",label:"Permit Number"},{path:"treeSpeciesClaimed",label:"Claimed Species"},{path:"treeSpeciesVerified",label:"Verified Species"},{path:"gpsLatitude",label:"GPS Latitude"},{path:"gpsLongitude",label:"GPS Longitude"},{path:"forestRegion",label:"Forest Region"},{path:"harvestDate",label:"Harvest Date"},{path:"volume",label:"Volume"},{path:"diameter",label:"Diameter"},{path:"length",label:"Length"},{path:"legalityDocumentation",label:"Legality Documentation"},{path:"deforestationRisk",label:"Deforestation Risk Assessment"}],shipment:[{path:"containerNumber",label:"Container Number"},{path:"billOfLading",label:"Bill of Lading"},{path:"originPort",label:"Origin Port"},{path:"destinationPort",label:"Destination Port"},{path:"departureDate",label:"Departure Date"},{path:"arrivalDate",label:"Arrival Date"},{path:"estimatedArrival",label:"Estimated Arrival"},{path:"vesselName",label:"Vessel Name"},{path:"shippingLine",label:"Shipping Line"},{path:"customsStatus",label:"Customs Status"},{path:"phytosanitaryCert",label:"Phytosanitary Certificate"}],manufacturing:[{path:"batchNumber",label:"Batch Number"},{path:"processType",label:"Process Type"},{path:"facilityName",label:"Facility Name"},{path:"startDate",label:"Start Date"},{path:"completionDate",label:"Completion Date"},{path:"inputQuantity",label:"Input Quantity"},{path:"outputQuantity",label:"Output Quantity"},{path:"yieldRate",label:"Yield Rate"},{path:"qualityCertifications",label:"Quality Certifications"},{path:"environmentalImpact",label:"Environmental Impact"}],product:[{path:"name",label:"Product Name"},{path:"sku",label:"SKU"},{path:"gtin",label:"GTIN"},{path:"category",label:"Category"},{path:"weight",label:"Weight"},{path:"dimensions",label:"Dimensions"},{path:"materialComposition",label:"Material Composition"},{path:"countryOfOrigin",label:"Country of Origin"},{path:"carbonFootprint",label:"Carbon Footprint"},{path:"recyclability",label:"Recyclability Score"},{path:"repairability",label:"Repairability Score"},{path:"durability",label:"Durability"},{path:"sustainabilityClaims",label:"Sustainability Claims"}]},Ov=[{value:"CarbonFootprintCredential",label:"Carbon Footprint Credential"},{value:"OriginCertificate",label:"Origin Certificate"},{value:"ConformityAttestation",label:"Conformity Attestation"},{value:"SustainabilityCertificate",label:"Sustainability Certificate"},{value:"QualityCertificate",label:"Quality Certificate"},{value:"DeforestationFreeCredential",label:"Deforestation-Free Credential"},{value:"ChainOfCustodyCredential",label:"Chain of Custody Credential"},{value:"DigitalTraceabilityEvent",label:"Digital Traceability Event (DTE)"},{value:"DigitalConformityCredential",label:"Digital Conformity Credential (DCC)"},{value:"SpeciesVerificationCredential",label:"Species Verification Credential"},{value:"Other",label:"Other Credential Type"}],_v={materialType:[{value:"species_identification",label:"Species Identification",services:["WoodVision","Agroisolab","Double Helix"]},{value:"material_analysis",label:"Material Analysis",services:["SGS","Bureau Veritas","Intertek"]}],materialSubtype:[{value:"species_identification",label:"Species Identification",services:["WoodVision","Agroisolab","Double Helix"]}],originCountry:[{value:"origin_verification",label:"Origin Verification",services:["Agroisolab","Oritain","SGS"]},{value:"isotope_analysis",label:"Isotope Analysis",services:["Agroisolab","Isodetect"]}],originRegion:[{value:"origin_verification",label:"Origin Verification",services:["Agroisolab","Oritain","SGS"]},{value:"isotope_analysis",label:"Isotope Analysis",services:["Agroisolab","Isodetect"]}],chemicalComposition:[{value:"chemical_analysis",label:"Chemical Analysis",services:["SGS","Intertek","Eurofins"]}],recycledContent:[{value:"recycled_content_verification",label:"Recycled Content Verification",services:["SCS Global","UL","TUV"]}],deforestationFreeStatus:[{value:"deforestation_risk_assessment",label:"Deforestation Risk Assessment",services:["Preferred by Nature","Earthworm","Global Forest Watch"]},{value:"satellite_monitoring",label:"Satellite Monitoring",services:["Planet","Starling","MapBiomas"]}],carbonFootprint:[{value:"carbon_footprint_assessment",label:"Carbon Footprint Assessment",services:["Carbon Trust","SCS Global","SGS"]},{value:"lca_analysis",label:"Life Cycle Assessment",services:["Sphera","PRe Sustainability","Ecoinvent"]}],sustainabilityClaims:[{value:"sustainability_audit",label:"Sustainability Audit",services:["FSC","PEFC","SFI","Rainforest Alliance"]}]},$v=[{value:"laboratory_analysis",label:"Laboratory Analysis"},{value:"dna_testing",label:"DNA Testing"},{value:"isotope_analysis",label:"Isotope Analysis"},{value:"spectroscopy",label:"Spectroscopy"},{value:"document_review",label:"Document Review"},{value:"on_site_audit",label:"On-Site Audit"},{value:"satellite_monitoring",label:"Satellite Monitoring"},{value:"ai_image_analysis",label:"AI Image Analysis"},{value:"third_party_certification",label:"Third-Party Certification"}];function Ji({isOpen:e,onClose:t,entityType:r,entityId:n,entityName:s,existingEvidence:i=[],onSuccess:l}){var G,Y;const[d,o]=v.useState("select"),[c,u]=v.useState(null),[p,m]=v.useState(null),[N,f]=v.useState("internal"),[h,j]=v.useState(!1),[x,g]=v.useState(null),[b,E]=v.useState(null),[y,w]=v.useState([]),[k,I]=v.useState(!1),[R,U]=v.useState({serviceType:"",verificationService:"",verificationMethod:"",verificationDate:new Date().toISOString().split("T")[0],claimedValue:"",verifiedValue:"",confidenceScore:"",referenceNumber:""}),[M,L]=v.useState("credential"),[D,H]=v.useState({credentialId:"",credentialDid:"",issuerDid:"",credentialType:"",customCredentialType:"",verificationEndpoint:"",externalCredentialUrl:"",proofHash:"",credentialIssuanceDate:"",credentialExpirationDate:"",verifierName:"",cachedClaimData:"",notes:""}),[re,ie]=v.useState({file:null,documentName:"",documentType:"",verifierName:"",verificationDate:new Date().toISOString().split("T")[0],notes:""}),he=Mv[r]||[],W=i.map(S=>S.fieldPath),te=(c==null?void 0:c.supportsService)&&r==="material",ae=te?_v[c.path]||[]:[];v.useEffect(()=>{e&&(p==="credential"||p==="service"&&M==="credential")&&N==="internal"&&Z()},[e,p,M,N]);const Z=async()=>{I(!0);try{const S=await Ze.list({status:"active",limit:100});w(S.data.credentials||S.data||[])}catch(S){console.error("Failed to fetch credentials:",S)}finally{I(!1)}},oe=S=>{u(S),o("method"),g(null),E(null)},ve=()=>{d==="result"?o(p==="service"?"service_details":"method"):d==="service_details"?o("method"):d==="method"&&(o("select"),u(null),m(null)),g(null),E(null)},ee=S=>{m(S),o(S==="service"?"service_details":"result")},ne=()=>{if(!R.serviceType||!R.verificationService){g("Please select service type and verification service");return}g(null),o("result")},me=()=>{U({serviceType:"",verificationService:"",verificationMethod:"",verificationDate:new Date().toISOString().split("T")[0],claimedValue:"",verifiedValue:"",confidenceScore:"",referenceNumber:""}),H({credentialId:"",credentialDid:"",issuerDid:"",credentialType:"",customCredentialType:"",verificationEndpoint:"",externalCredentialUrl:"",proofHash:"",credentialIssuanceDate:"",credentialExpirationDate:"",verifierName:"",cachedClaimData:"",notes:""}),ie({file:null,documentName:"",documentType:"",verifierName:"",verificationDate:new Date().toISOString().split("T")[0],notes:""}),L("credential"),f("internal")},_=async S=>{var C,A;S.preventDefault(),j(!0),g(null);try{const ue={entityType:r,entityId:n,fieldPath:c.path,fieldLabel:c.label};if(p==="service"&&(ue.verificationMethod=R.verificationMethod,ue.verificationService=R.verificationService,ue.claimedValue=R.claimedValue,r==="material"&&await $a.addVerification(n,{verificationType:R.serviceType,verificationService:R.verificationService,verificationMethod:R.verificationMethod,claimedValue:R.claimedValue,verifiedValue:R.verifiedValue,confidenceScore:R.confidenceScore?parseFloat(R.confidenceScore):null,verificationDate:R.verificationDate,referenceNumber:R.referenceNumber,fieldPath:c.path,fieldLabel:c.label})),(p==="service"?M:p)==="credential")if(N==="internal"&&D.credentialId)await kt.addCredentialEvidence({...ue,credentialId:D.credentialId,notes:D.notes,...p==="service"&&{cachedClaimData:{serviceType:R.serviceType,verifiedValue:R.verifiedValue,confidenceScore:R.confidenceScore?parseFloat(R.confidenceScore):null,referenceNumber:R.referenceNumber}}});else{const q=D.credentialType==="Other"?D.customCredentialType:D.credentialType;let X=null;if(D.cachedClaimData)try{X=JSON.parse(D.cachedClaimData)}catch{X={value:D.cachedClaimData}}p==="service"&&(X={...X||{},serviceType:R.serviceType,verifiedValue:R.verifiedValue,confidenceScore:R.confidenceScore?parseFloat(R.confidenceScore):null,referenceNumber:R.referenceNumber}),await kt.addCredentialEvidence({...ue,credentialDid:D.credentialDid||void 0,issuerDid:D.issuerDid,credentialType:q||void 0,verificationEndpoint:D.verificationEndpoint||void 0,externalCredentialUrl:D.externalCredentialUrl||void 0,proofHash:D.proofHash||void 0,credentialIssuanceDate:D.credentialIssuanceDate||void 0,credentialExpirationDate:D.credentialExpirationDate||void 0,verifierName:D.verifierName||R.verificationService||void 0,cachedClaimData:X,notes:D.notes||void 0})}else{if(!re.file){g("Please select a document to upload"),j(!1);return}await kt.addDocumentEvidence(re.file,{...ue,documentName:re.documentName||re.file.name,documentType:re.documentType||"verification_document",verifierName:re.verifierName||R.verificationService,verificationDate:re.verificationDate||R.verificationDate,notes:re.notes,...p==="service"&&{metadata:JSON.stringify({serviceType:R.serviceType,verifiedValue:R.verifiedValue,confidenceScore:R.confidenceScore,referenceNumber:R.referenceNumber})}})}E(`Verification added for "${c.label}"`),setTimeout(()=>{me(),o("select"),u(null),m(null),l==null||l()},1500)}catch(ue){g(((A=(C=ue.response)==null?void 0:C.data)==null?void 0:A.error)||"Failed to add verification")}finally{j(!1)}};return e?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto m-4",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold",children:"Verify Data Point"}),a.jsx("p",{className:"text-sm text-gray-500",children:s})]}),a.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),x&&a.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-4",children:x}),b&&a.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg mb-4",children:b}),d==="select"&&a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-600 mb-4",children:"Select a data point to verify:"}),a.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-96 overflow-y-auto",children:he.map(S=>{const C=W.includes(S.path);return a.jsxs("button",{onClick:()=>oe(S),className:`text-left p-3 rounded-lg border transition-colors ${C?"bg-green-50 border-green-200 hover:bg-green-100":"bg-gray-50 border-gray-200 hover:bg-gray-100"}`,children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"font-medium text-gray-900",children:S.label}),C&&a.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})})]}),a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[a.jsx("span",{className:"text-xs text-gray-500",children:S.path}),S.supportsService&&r==="material"&&a.jsx("span",{className:"text-xs bg-purple-100 text-purple-700 px-1.5 py-0.5 rounded",children:"Service available"})]})]},S.path)})})]}),d==="method"&&c&&a.jsxs("div",{children:[a.jsxs("button",{onClick:ve,className:"flex items-center text-gray-600 hover:text-gray-900 mb-4",children:[a.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:a.jsxs("div",{className:"font-medium text-blue-900",children:["Verifying: ",c.label]})}),a.jsx("p",{className:"text-gray-600 mb-4",children:"How would you like to verify this data point?"}),a.jsxs("div",{className:"space-y-3",children:[te&&a.jsx("button",{onClick:()=>ee("service"),className:"w-full text-left p-4 rounded-lg border-2 border-purple-200 bg-purple-50 hover:bg-purple-100 transition-colors",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-200 flex items-center justify-center",children:a.jsx("svg",{className:"w-5 h-5 text-purple-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-purple-900",children:"Service Verification"}),a.jsx("div",{className:"text-sm text-purple-700",children:"Request verification from an external service (SGS, WoodVision, etc.)"})]})]})}),a.jsx("button",{onClick:()=>ee("credential"),className:"w-full text-left p-4 rounded-lg border-2 border-blue-200 bg-blue-50 hover:bg-blue-100 transition-colors",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-200 flex items-center justify-center",children:a.jsx("svg",{className:"w-5 h-5 text-blue-700",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm-2 16l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z"})})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-blue-900",children:"Link Verifiable Credential"}),a.jsx("div",{className:"text-sm text-blue-700",children:"Link to an existing credential (internal or external DID reference)"})]})]})}),a.jsx("button",{onClick:()=>ee("document"),className:"w-full text-left p-4 rounded-lg border-2 border-green-200 bg-green-50 hover:bg-green-100 transition-colors",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-green-200 flex items-center justify-center",children:a.jsx("svg",{className:"w-5 h-5 text-green-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-green-900",children:"Upload Document"}),a.jsx("div",{className:"text-sm text-green-700",children:"Upload a verification document (certificate, audit report, etc.)"})]})]})})]})]}),d==="service_details"&&a.jsxs("div",{children:[a.jsxs("button",{onClick:ve,className:"flex items-center text-gray-600 hover:text-gray-900 mb-4",children:[a.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]}),a.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4 mb-4",children:[a.jsxs("div",{className:"font-medium text-purple-900",children:["Service Verification: ",c.label]}),a.jsx("div",{className:"text-sm text-purple-700",children:"Enter the verification service details"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Service Type *"}),a.jsxs("select",{value:R.serviceType,onChange:S=>U(C=>({...C,serviceType:S.target.value,verificationService:""})),className:"input",required:!0,children:[a.jsx("option",{value:"",children:"Select type..."}),ae.map(S=>a.jsx("option",{value:S.value,children:S.label},S.value))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Verification Service *"}),a.jsxs("select",{value:R.verificationService,onChange:S=>U(C=>({...C,verificationService:S.target.value})),className:"input",required:!0,children:[a.jsx("option",{value:"",children:"Select service..."}),(((G=ae.find(S=>S.value===R.serviceType))==null?void 0:G.services)||[]).map(S=>a.jsx("option",{value:S,children:S},S)),a.jsx("option",{value:"other",children:"Other..."})]}),R.verificationService==="other"&&a.jsx("input",{type:"text",className:"input mt-2",placeholder:"Enter service name",onChange:S=>U(C=>({...C,verificationService:S.target.value}))})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Verification Method"}),a.jsxs("select",{value:R.verificationMethod,onChange:S=>U(C=>({...C,verificationMethod:S.target.value})),className:"input",children:[a.jsx("option",{value:"",children:"Select method..."}),$v.map(S=>a.jsx("option",{value:S.value,children:S.label},S.value))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Verification Date"}),a.jsx("input",{type:"date",value:R.verificationDate,onChange:S=>U(C=>({...C,verificationDate:S.target.value})),className:"input"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Claimed Value"}),a.jsx("input",{type:"text",value:R.claimedValue,onChange:S=>U(C=>({...C,claimedValue:S.target.value})),className:"input",placeholder:"e.g., Oak (Quercus robur)"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Verified Value"}),a.jsx("input",{type:"text",value:R.verifiedValue,onChange:S=>U(C=>({...C,verifiedValue:S.target.value})),className:"input",placeholder:"Result from service"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Confidence Score (0-1)"}),a.jsx("input",{type:"number",value:R.confidenceScore,onChange:S=>U(C=>({...C,confidenceScore:S.target.value})),className:"input",step:"0.01",min:"0",max:"1",placeholder:"e.g., 0.95"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Reference Number"}),a.jsx("input",{type:"text",value:R.referenceNumber,onChange:S=>U(C=>({...C,referenceNumber:S.target.value})),className:"input",placeholder:"Report or certificate number"})]})]}),a.jsxs("div",{className:"pt-4 border-t",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"What did the service provide as verification result?"}),a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",name:"resultType",value:"credential",checked:M==="credential",onChange:()=>L("credential"),className:"mr-2"}),a.jsx("span",{className:"text-sm",children:"Issued a Verifiable Credential"})]}),a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",name:"resultType",value:"document",checked:M==="document",onChange:()=>L("document"),className:"mr-2"}),a.jsx("span",{className:"text-sm",children:"Provided a Document (PDF, certificate)"})]})]})]}),a.jsxs("div",{className:"flex gap-3 pt-2",children:[a.jsxs("button",{onClick:ne,className:"btn-primary",children:["Continue to ",M==="credential"?"Credential":"Document"]}),a.jsx("button",{type:"button",onClick:t,className:"btn-secondary",children:"Cancel"})]})]})]}),d==="result"&&a.jsxs("form",{onSubmit:_,children:[a.jsxs("button",{type:"button",onClick:ve,className:"flex items-center text-gray-600 hover:text-gray-900 mb-4",children:[a.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]}),p==="service"&&a.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4 mb-4",children:[a.jsx("div",{className:"font-medium text-purple-900 mb-2",children:"Service Verification Summary"}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm text-purple-800",children:[a.jsxs("div",{children:["Service: ",R.verificationService]}),a.jsxs("div",{children:["Type: ",(Y=ae.find(S=>S.value===R.serviceType))==null?void 0:Y.label]}),R.verifiedValue&&a.jsxs("div",{children:["Result: ",R.verifiedValue]}),R.confidenceScore&&a.jsxs("div",{children:["Confidence: ",(parseFloat(R.confidenceScore)*100).toFixed(0),"%"]})]})]}),(p==="credential"||p==="service"&&M==="credential")&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:[a.jsx("div",{className:"font-medium text-blue-900",children:p==="service"?"Link Service-Issued Credential":"Link Verifiable Credential"}),a.jsxs("div",{className:"text-sm text-blue-700",children:["Field: ",c.label]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"label",children:"Credential Source"}),a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",name:"credentialSource",value:"internal",checked:N==="internal",onChange:()=>f("internal"),className:"mr-2"}),a.jsx("span",{className:"text-sm",children:"Select from stored credentials"})]}),a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",name:"credentialSource",value:"external",checked:N==="external",onChange:()=>f("external"),className:"mr-2"}),a.jsx("span",{className:"text-sm",children:"Reference external credential (DID/URI)"})]})]})]}),N==="internal"?a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Select Credential *"}),k?a.jsx("div",{className:"text-gray-500 text-sm",children:"Loading credentials..."}):a.jsxs("select",{value:D.credentialId,onChange:S=>H(C=>({...C,credentialId:S.target.value})),className:"input",required:!0,children:[a.jsx("option",{value:"",children:"Choose a credential..."}),y.map(S=>{var C,A;return a.jsxs("option",{value:S.id,children:[S.type," - ",((C=S.issuerOrganization)==null?void 0:C.name)||((A=S.issuerDid)==null?void 0:A.substring(0,30)),"..."]},S.id)})]})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Credential DID/URI"}),a.jsx("input",{type:"text",value:D.credentialDid,onChange:S=>H(C=>({...C,credentialDid:S.target.value})),className:"input font-mono text-sm",placeholder:"did:example:abc123"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Issuer DID *"}),a.jsx("input",{type:"text",value:D.issuerDid,onChange:S=>H(C=>({...C,issuerDid:S.target.value})),className:"input font-mono text-sm",placeholder:"did:web:service.example.com",required:N==="external"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Credential Type"}),a.jsxs("select",{value:D.credentialType,onChange:S=>H(C=>({...C,credentialType:S.target.value})),className:"input",children:[a.jsx("option",{value:"",children:"Select type..."}),Ov.map(S=>a.jsx("option",{value:S.value,children:S.label},S.value))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Verification Endpoint"}),a.jsx("input",{type:"url",value:D.verificationEndpoint,onChange:S=>H(C=>({...C,verificationEndpoint:S.target.value})),className:"input text-sm",placeholder:"https://service.example.com/verify"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Issuance Date"}),a.jsx("input",{type:"date",value:D.credentialIssuanceDate,onChange:S=>H(C=>({...C,credentialIssuanceDate:S.target.value})),className:"input"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Expiration Date"}),a.jsx("input",{type:"date",value:D.credentialExpirationDate,onChange:S=>H(C=>({...C,credentialExpirationDate:S.target.value})),className:"input"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Notes"}),a.jsx("textarea",{value:D.notes,onChange:S=>H(C=>({...C,notes:S.target.value})),className:"input",rows:2,placeholder:"Additional notes..."})]})]}),(p==="document"||p==="service"&&M==="document")&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-4",children:[a.jsx("div",{className:"font-medium text-green-900",children:p==="service"?"Upload Service-Issued Document":"Upload Verification Document"}),a.jsxs("div",{className:"text-sm text-green-700",children:["Field: ",c.label]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Upload Document *"}),a.jsx("input",{type:"file",accept:".pdf,.doc,.docx,.png,.jpg,.jpeg",onChange:S=>ie(C=>{var A;return{...C,file:((A=S.target.files)==null?void 0:A[0])||null}}),className:"input",required:!0})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Document Name"}),a.jsx("input",{type:"text",value:re.documentName,onChange:S=>ie(C=>({...C,documentName:S.target.value})),className:"input",placeholder:"e.g., Species Verification Report"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Document Type"}),a.jsxs("select",{value:re.documentType,onChange:S=>ie(C=>({...C,documentType:S.target.value})),className:"input",children:[a.jsx("option",{value:"",children:"Select type..."}),a.jsx("option",{value:"certificate",children:"Certificate"}),a.jsx("option",{value:"audit_report",children:"Audit Report"}),a.jsx("option",{value:"test_result",children:"Test Result"}),a.jsx("option",{value:"verification_report",children:"Verification Report"}),a.jsx("option",{value:"declaration",children:"Declaration"}),a.jsx("option",{value:"other",children:"Other"})]})]})]}),p!=="service"&&a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Issuer / Verifier Name"}),a.jsx("input",{type:"text",value:re.verifierName,onChange:S=>ie(C=>({...C,verifierName:S.target.value})),className:"input",placeholder:"e.g., SGS, Bureau Veritas"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Document Date"}),a.jsx("input",{type:"date",value:re.verificationDate,onChange:S=>ie(C=>({...C,verificationDate:S.target.value})),className:"input"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Notes"}),a.jsx("textarea",{value:re.notes,onChange:S=>ie(C=>({...C,notes:S.target.value})),className:"input",rows:2,placeholder:"Additional notes..."})]})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"submit",disabled:h,className:"btn-primary",children:h?"Saving...":"Save Verification"}),a.jsx("button",{type:"button",onClick:t,className:"btn-secondary",children:"Cancel"})]})]})]})})}):null}function Zi({onClick:e,hasEvidence:t=!1}){return a.jsx("button",{onClick:e,className:`text-sm flex items-center gap-1 ${t?"text-green-600 hover:text-green-800":"text-blue-600 hover:text-blue-800"}`,title:t?"View/Add verifications":"Add verification",children:t?a.jsxs(a.Fragment,{children:[a.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm-2 16l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z"})}),"Verified"]}):a.jsxs(a.Fragment,{children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),"Verify"]})})}const Lu={wood:"Wood / Timber",metal:"Metal / Mineral",plastic:"Plastic / Polymer",textile:"Textile / Fiber",chemical:"Chemical / Compound",electronic:"Electronic Component",other:"Other"},Fv={unknown:"Unknown",furniture:"Furniture",construction:"Construction",packaging:"Packaging",automotive:"Automotive",electronics:"Electronics",textiles_apparel:"Textiles & Apparel",batteries:"Batteries",toys:"Toys",food_contact:"Food Contact",medical:"Medical",other:"Other"};function zv(){const[e,t]=v.useState([]),[r,n]=v.useState(!0),[s,i]=v.useState(null),[l,d]=v.useState({page:1,limit:20,total:0}),[o,c]=v.useState({status:"",materialType:"",custodyModel:"",search:""}),[u,p]=v.useState(!1),[m,N]=v.useState(null),[f,h]=v.useState({});v.useEffect(()=>{j()},[l.page,o]);const j=async()=>{var w,k;n(!0);try{const I={page:l.page,limit:l.limit,...Object.fromEntries(Object.entries(o).filter(([U,M])=>M))},R=await $a.list(I);t(R.data.materials||R.data||[]),d(U=>({...U,total:R.data.total||R.data.length}))}catch(I){i(((k=(w=I.response)==null?void 0:w.data)==null?void 0:k.error)||"Failed to load materials")}finally{n(!1)}},x=async w=>{var k,I;if(confirm("Are you sure you want to delete this material?"))try{await $a.delete(w),j()}catch(R){i(((I=(k=R.response)==null?void 0:k.data)==null?void 0:I.error)||"Failed to delete material")}},g=async w=>{N(w);try{const k=await kt.getByEntity("material",w.id);h(I=>({...I,[w.id]:k.data.evidence||k.data||[]}))}catch(k){console.error("Failed to fetch evidence:",k),h(I=>({...I,[w.id]:[]}))}p(!0)},b=()=>{m&&kt.getByEntity("material",m.id).then(w=>{h(k=>({...k,[m.id]:w.data.evidence||w.data||[]}))}).catch(console.error),j()},E=w=>{const k={pending:"bg-yellow-100 text-yellow-800",verified:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800",in_transit:"bg-blue-100 text-blue-800",consumed:"bg-gray-100 text-gray-800",archived:"bg-gray-100 text-gray-500"};return a.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${k[w]||"bg-gray-100 text-gray-800"}`,children:w==null?void 0:w.replace("_"," ")})},y=w=>{var D,H,re,ie;const k=((D=w.verifications)==null?void 0:D.length)||0,I=((H=f[w.id])==null?void 0:H.length)||0,R=k+I;if(R===0)return null;const U=((re=w.verifications)==null?void 0:re.filter(he=>he.status==="passed").length)||0,M=((ie=f[w.id])==null?void 0:ie.filter(he=>he.status==="active").length)||0,L=U+M;return a.jsxs("span",{className:`ml-2 px-1.5 py-0.5 rounded text-xs ${L===R?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:[L,"/",R]})};return r&&e.length===0?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Materials"}),a.jsx(Se,{to:"/admin/materials/new",className:"btn-primary",children:"+ New Material"})]}),s&&a.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6",children:[s,a.jsx("button",{onClick:()=>i(null),className:"ml-2 text-red-900",children:""})]}),a.jsx("div",{className:"card mb-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Search"}),a.jsx("input",{type:"text",value:o.search,onChange:w=>c(k=>({...k,search:w.target.value})),className:"input",placeholder:"Name, description..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Status"}),a.jsxs("select",{value:o.status,onChange:w=>c(k=>({...k,status:w.target.value})),className:"input",children:[a.jsx("option",{value:"",children:"All"}),a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"verified",children:"Verified"}),a.jsx("option",{value:"rejected",children:"Rejected"}),a.jsx("option",{value:"in_transit",children:"In Transit"}),a.jsx("option",{value:"consumed",children:"Consumed"}),a.jsx("option",{value:"archived",children:"Archived"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Material Type"}),a.jsxs("select",{value:o.materialType,onChange:w=>c(k=>({...k,materialType:w.target.value})),className:"input",children:[a.jsx("option",{value:"",children:"All"}),Object.entries(Lu).map(([w,k])=>a.jsx("option",{value:w,children:k},w))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Custody Model"}),a.jsxs("select",{value:o.custodyModel,onChange:w=>c(k=>({...k,custodyModel:w.target.value})),className:"input",children:[a.jsx("option",{value:"",children:"All"}),a.jsx("option",{value:"identity_preserved",children:"Identity Preserved"}),a.jsx("option",{value:"segregated",children:"Segregated"}),a.jsx("option",{value:"controlled_blending",children:"Controlled Blending"}),a.jsx("option",{value:"mass_balance",children:"Mass Balance"}),a.jsx("option",{value:"book_and_claim",children:"Book & Claim"})]})]})]})}),a.jsxs("div",{className:"card overflow-hidden",children:[a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Material"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Intended Use"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Quantity"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Origin"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),a.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"px-4 py-8 text-center text-gray-500",children:"No materials found"})}):e.map(w=>{var k,I;return a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsxs("td",{className:"px-4 py-3",children:[a.jsx("div",{className:"font-medium text-gray-900",children:w.name}),a.jsx("div",{className:"text-sm text-gray-500",children:w.batchNumber&&a.jsxs("span",{children:["Batch: ",w.batchNumber]})})]}),a.jsxs("td",{className:"px-4 py-3",children:[a.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-indigo-100 text-indigo-800",children:Lu[w.materialType]||w.materialType}),w.materialSubtype&&a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:w.materialSubtype})]}),a.jsx("td",{className:"px-4 py-3",children:a.jsx("div",{className:"flex flex-wrap gap-1 max-w-[200px]",children:(w.intendedProductCategories||["unknown"]).map(R=>a.jsx("span",{className:"px-1.5 py-0.5 rounded text-xs bg-gray-100 text-gray-600",children:Fv[R]||R},R))})}),a.jsxs("td",{className:"px-4 py-3 text-sm text-gray-600",children:[w.quantity," ",w.unitOfMeasure]}),a.jsxs("td",{className:"px-4 py-3 text-sm text-gray-600",children:[a.jsx("div",{children:w.originCountry}),a.jsx("div",{className:"text-xs text-gray-400",children:w.originRegion})]}),a.jsxs("td",{className:"px-4 py-3",children:[E(w.status),y(w)]}),a.jsxs("td",{className:"px-4 py-3 text-right space-x-2",children:[a.jsx(Zi,{onClick:()=>g(w),hasEvidence:(((k=f[w.id])==null?void 0:k.length)||0)>0||(((I=w.verifications)==null?void 0:I.length)||0)>0}),a.jsx(Se,{to:`/admin/materials/${w.id}`,className:"text-primary-600 hover:text-primary-800 text-sm",children:"Edit"}),a.jsx("button",{onClick:()=>x(w.id),className:"text-red-600 hover:text-red-800 text-sm",children:"Delete"})]})]},w.id)})})]})}),l.total>l.limit&&a.jsxs("div",{className:"px-4 py-3 border-t flex items-center justify-between",children:[a.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",(l.page-1)*l.limit+1," to ",Math.min(l.page*l.limit,l.total)," of ",l.total]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>d(w=>({...w,page:w.page-1})),disabled:l.page===1,className:"btn-secondary text-sm",children:"Previous"}),a.jsx("button",{onClick:()=>d(w=>({...w,page:w.page+1})),disabled:l.page*l.limit>=l.total,className:"btn-secondary text-sm",children:"Next"})]})]})]}),a.jsx(Ji,{isOpen:u,onClose:()=>{p(!1),N(null)},entityType:"material",entityId:m==null?void 0:m.id,entityName:(m==null?void 0:m.name)||"Material",existingEvidence:f[m==null?void 0:m.id]||[],onSuccess:b})]})}function Iu(){const e=va(),{id:t}=Zr(),r=!!t,[n,s]=v.useState(!1),[i,l]=v.useState(!1),[d,o]=v.useState(null),[c,u]=v.useState(null),[p,m]=v.useState([]),[N,f]=v.useState([]),[h,j]=v.useState(!0),[x,g]=v.useState({materialId:"",transferType:"material",organizationId:"",quantity:"",unitOfMeasure:"kg",transferDate:new Date().toISOString().split("T")[0],custodyModel:"identity_preserved",transportMode:"truck",carrier:"",trackingNumber:"",expectedArrivalDate:"",carbonFootprintKg:"",distanceKm:"",notes:""}),[b,E]=v.useState({name:"",street:"",houseNumber:"",additionalInfo:"",city:"",region:"",country:"",countryCode:"",postalCode:"",lat:null,lng:null}),[y,w]=v.useState({name:"",street:"",houseNumber:"",additionalInfo:"",city:"",region:"",country:"",countryCode:"",postalCode:"",lat:null,lng:null}),[k,I]=v.useState(""),[R,U]=v.useState([]),[M,L]=v.useState(!1),[D,H]=v.useState(""),[re,ie]=v.useState([]),[he,W]=v.useState(!1),[te,ae]=v.useState(null),[Z,oe]=v.useState({actualArrivalDate:"",receivedQuantity:"",qualityNotes:""}),[ve,ee]=v.useState(null),[ne,me]=v.useState(!1),_=[{value:"material",label:"Material Transfer"},{value:"product",label:"Product Transfer"}],G=[{value:"identity_preserved",label:"Identity Preserved"},{value:"segregated",label:"Segregated"},{value:"mass_balance",label:"Mass Balance"},{value:"book_and_claim",label:"Book and Claim"}],Y=[{value:"truck",label:"Truck"},{value:"ship",label:"Ship"},{value:"rail",label:"Rail"},{value:"air",label:"Air"},{value:"multimodal",label:"Multimodal"}];v.useEffect(()=>{A(),r&&(ue(),S())},[t]);const S=async()=>{try{const K=await Ze.getDTE("transaction",t);K.data&&ee(K.data)}catch{ee(null)}},C=async()=>{var K,le;me(!0);try{const ye=await Ze.issueTransactionEvent(t);ee(ye.data),alert("Transaction Event credential issued successfully!")}catch(ye){alert(((le=(K=ye.response)==null?void 0:K.data)==null?void 0:le.message)||"Failed to issue DTE credential")}finally{me(!1)}},A=async()=>{var K,le;j(!0);try{const[ye,Me]=await Promise.all([$a.list(),Xt.list()]),P=(ye.data.materials||ye.data||[]).filter(T=>!["consumed","archived"].includes(T.status));m(P),f(Me.data.organizations||Me.data||[])}catch(ye){console.error("Failed to load options:",ye),o(`Failed to load options: ${((le=(K=ye.response)==null?void 0:K.data)==null?void 0:le.error)||ye.message}`)}finally{j(!1)}},ue=async()=>{var K,le,ye,Me,Ge,P,T,pe,Ie,yt,je,ra,en,tn;s(!0);try{const Ee=(await er.get(t)).data;u(Ee),g({materialId:Ee.materialId||"",transferType:Ee.transferType||"material",organizationId:Ee.organizationId||"",quantity:Ee.quantity||"",unitOfMeasure:Ee.unitOfMeasure||"kg",transferDate:((K=Ee.transferDate)==null?void 0:K.split("T")[0])||"",custodyModel:Ee.custodyModel||"identity_preserved",transportMode:Ee.transportMode||"truck",carrier:((le=Ee.shipmentDetails)==null?void 0:le.carrier)||"",trackingNumber:((ye=Ee.shipmentDetails)==null?void 0:ye.trackingNumber)||"",expectedArrivalDate:((Ge=(Me=Ee.shipmentDetails)==null?void 0:Me.expectedArrivalDate)==null?void 0:Ge.split("T")[0])||"",carbonFootprintKg:Ee.carbonFootprintKg||"",distanceKm:Ee.distanceKm||"",notes:((P=Ee.shipmentDetails)==null?void 0:P.notes)||""}),Ee.sendingLocation?E(Ee.sendingLocation):(T=Ee.fromNode)!=null&&T.address&&E({name:Ee.fromNode.name||"",...Ee.fromNode.address,lat:((pe=Ee.fromNode.gpsCoordinates)==null?void 0:pe.latitude)||null,lng:((Ie=Ee.fromNode.gpsCoordinates)==null?void 0:Ie.longitude)||null}),Ee.receivingLocation?w(Ee.receivingLocation):(yt=Ee.toNode)!=null&&yt.address&&w({name:Ee.toNode.name||"",...Ee.toNode.address,lat:((je=Ee.toNode.gpsCoordinates)==null?void 0:je.latitude)||null,lng:((ra=Ee.toNode.gpsCoordinates)==null?void 0:ra.longitude)||null})}catch(an){o(((tn=(en=an.response)==null?void 0:en.data)==null?void 0:tn.error)||"Failed to load transfer")}finally{s(!1)}},F=v.useCallback(async(K,le)=>{if(!K||K.length<3){le==="sending"?U([]):ie([]);return}le==="sending"?L(!0):W(!0);try{const Ge=(await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(K)}&limit=5&addressdetails=1`,{headers:{"User-Agent":"DPP-System/1.0"}})).json()).map(P=>({display_name:P.display_name,lat:parseFloat(P.lat),lng:parseFloat(P.lon),address:P.address||{}}));le==="sending"?U(Ge):ie(Ge)}catch(ye){console.error("Address search failed:",ye),le==="sending"?U([]):ie([])}finally{le==="sending"?L(!1):W(!1)}},[]),q=K=>{var ye;const le=K.address;E({name:K.display_name.split(",")[0],street:le.road||"",houseNumber:le.house_number||"",additionalInfo:"",city:le.city||le.town||le.village||"",region:le.state||le.province||"",country:le.country||"",countryCode:((ye=le.country_code)==null?void 0:ye.toUpperCase())||"",postalCode:le.postcode||"",lat:K.lat,lng:K.lng}),I(""),U([])},X=K=>{var ye;const le=K.address;w({name:K.display_name.split(",")[0],street:le.road||"",houseNumber:le.house_number||"",additionalInfo:"",city:le.city||le.town||le.village||"",region:le.state||le.province||"",country:le.country||"",countryCode:((ye=le.country_code)==null?void 0:ye.toUpperCase())||"",postalCode:le.postcode||"",lat:K.lat,lng:K.lng}),H(""),ie([])},xe=(K,le)=>{E(ye=>({...ye,[K]:le}))},Le=(K,le)=>{w(ye=>({...ye,[K]:le}))},V=async(K,le)=>{const ye=K.replace(/\D/g,"");if(ye.length===8)try{const Ge=await(await fetch(`https://viacep.com.br/ws/${ye}/json/`)).json();if(!Ge.erro){const P=le==="sending"?xe:Le;Ge.logradouro&&P("street",Ge.logradouro),Ge.localidade&&P("city",Ge.localidade),Ge.uf&&P("region",Ge.uf),P("country","Brazil"),P("countryCode","BR")}}catch(Me){console.error("CEP lookup failed:",Me)}},se=K=>{const{name:le,value:ye}=K.target;g(Me=>({...Me,[le]:ye}))},fe=async K=>{var le,ye;if(K.preventDefault(),l(!0),o(null),!b.city){o("Please enter at least a city for the sending location"),l(!1);return}if(!y.city){o("Please enter at least a city for the receiving location"),l(!1);return}try{const Me={transferType:x.transferType,organizationId:x.organizationId||null,materialId:x.materialId||null,quantity:x.quantity?parseFloat(x.quantity):null,unitOfMeasure:x.unitOfMeasure,transferDate:x.transferDate,custodyModel:x.custodyModel,transportMode:x.transportMode,carbonFootprintKg:x.carbonFootprintKg?parseFloat(x.carbonFootprintKg):null,distanceKm:x.distanceKm?parseFloat(x.distanceKm):null,shipmentDetails:{carrier:x.carrier,trackingNumber:x.trackingNumber,expectedArrivalDate:x.expectedArrivalDate,notes:x.notes},sendingLocation:b,receivingLocation:y};r?await er.update(t,Me):await er.create(Me),e("/admin/transfers")}catch(Me){o(((ye=(le=Me.response)==null?void 0:le.data)==null?void 0:ye.error)||"Failed to save transfer")}finally{l(!1)}},Ae=async K=>{var le,ye;K.preventDefault(),l(!0),o(null);try{await er.receive(t,{...Z,receivedQuantity:Z.receivedQuantity?parseFloat(Z.receivedQuantity):null}),await ue()}catch(Me){o(((ye=(le=Me.response)==null?void 0:le.data)==null?void 0:ye.error)||"Failed to receive transfer")}finally{l(!1)}},at=K=>{const le={pending:"bg-yellow-100 text-yellow-800",in_transit:"bg-blue-100 text-blue-800",delivered:"bg-green-100 text-green-800",received:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"};return a.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${le[K]||"bg-gray-100"}`,children:K==null?void 0:K.replace("_"," ")})},lt=(K,le,ye,Me,Ge,P,T)=>a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"relative",children:[a.jsx("label",{className:"label",children:"Search Address (optional)"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"text",value:Me,onChange:pe=>{Ge(pe.target.value),te&&clearTimeout(te),ae(setTimeout(()=>F(pe.target.value,ye),500))},className:"input pr-10",placeholder:"Type to search and auto-fill..."}),T&&a.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:a.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-primary-500 border-t-transparent rounded-full"})})]}),P.length>0&&a.jsx("div",{className:"absolute z-10 mt-1 w-full bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:P.map((pe,Ie)=>a.jsx("button",{type:"button",onClick:()=>ye==="sending"?q(pe):X(pe),className:"w-full text-left px-4 py-2 hover:bg-gray-100 border-b border-gray-100 last:border-0 text-sm",children:pe.display_name},Ie))})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[a.jsxs("div",{className:"col-span-2",children:[a.jsx("label",{className:"label",children:"Street"}),a.jsx("input",{type:"text",value:K.street,onChange:pe=>le("street",pe.target.value),className:"input",placeholder:"Street name"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"House No."}),a.jsx("input",{type:"text",value:K.houseNumber,onChange:pe=>le("houseNumber",pe.target.value),className:"input",placeholder:"123"})]}),a.jsxs("div",{className:"col-span-3",children:[a.jsx("label",{className:"label",children:"Additional Info"}),a.jsx("input",{type:"text",value:K.additionalInfo,onChange:pe=>le("additionalInfo",pe.target.value),className:"input",placeholder:"Apt 4B, Floor 2, Building C, etc."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"City *"}),a.jsx("input",{type:"text",value:K.city,onChange:pe=>le("city",pe.target.value),className:"input",placeholder:"City",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Region/State"}),a.jsx("input",{type:"text",value:K.region,onChange:pe=>le("region",pe.target.value),className:"input",placeholder:"State/Province"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Country"}),a.jsx("input",{type:"text",value:K.country,onChange:pe=>le("country",pe.target.value),className:"input",placeholder:"Country"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"label",children:["Postal Code",K.countryCode==="BR"&&a.jsx("button",{type:"button",onClick:()=>V(K.postalCode,ye),className:"ml-2 text-blue-600 hover:underline text-xs",children:"(verify CEP)"})]}),a.jsx("input",{type:"text",value:K.postalCode,onChange:pe=>le("postalCode",pe.target.value),className:"input",placeholder:K.countryCode==="BR"?"00000-000":"Postal code"})]})]}),K.lat&&K.lng&&a.jsxs("p",{className:"text-xs text-gray-500",children:["GPS: ",K.lat.toFixed(4),", ",K.lng.toFixed(4)]})]});return n?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):a.jsxs("div",{className:"max-w-3xl mx-auto",children:[a.jsx("div",{className:"mb-6",children:a.jsxs("button",{onClick:()=>e("/admin/transfers"),className:"text-gray-600 hover:text-gray-900 flex items-center gap-1",children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Transfers"]})}),a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h1",{className:"text-xl font-bold text-gray-900",children:r?"Edit Custody Transfer":"New Custody Transfer"}),r&&c&&at(c.status)]}),d&&a.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6",children:d}),a.jsxs("form",{onSubmit:fe,className:"space-y-6",children:[a.jsxs("div",{className:"border-b pb-4",children:[a.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Transfer Details"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Organization"}),a.jsx("select",{name:"organizationId",value:x.organizationId,onChange:se,className:"input",children:h?a.jsx("option",{value:"",children:"Loading..."}):a.jsxs(a.Fragment,{children:[a.jsx("option",{value:"",children:"Select organization..."}),N.map(K=>a.jsxs("option",{value:K.id,children:[K.name," ",K.type?`(${K.type})`:""]},K.id))]})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Transfer Type *"}),a.jsx("select",{name:"transferType",value:x.transferType,onChange:se,className:"input",required:!0,children:_.map(K=>a.jsx("option",{value:K.value,children:K.label},K.value))})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Custody Model"}),a.jsx("select",{name:"custodyModel",value:x.custodyModel,onChange:se,className:"input",children:G.map(K=>a.jsx("option",{value:K.value,children:K.label},K.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Material"}),a.jsx("select",{name:"materialId",value:x.materialId,onChange:se,className:"input",disabled:r||h,children:h?a.jsx("option",{value:"",children:"Loading materials..."}):p.length===0?a.jsx("option",{value:"",children:"No materials available"}):a.jsxs(a.Fragment,{children:[a.jsx("option",{value:"",children:"Select material..."}),p.map(K=>a.jsxs("option",{value:K.id,children:[K.name," (",K.quantity," ",K.unitOfMeasure,") - ",K.status]},K.id))]})})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Transfer Date *"}),a.jsx("input",{type:"date",name:"transferDate",value:x.transferDate,onChange:se,className:"input",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Quantity *"}),a.jsx("input",{type:"number",name:"quantity",value:x.quantity,onChange:se,className:"input",step:"any",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Unit *"}),a.jsxs("select",{name:"unitOfMeasure",value:x.unitOfMeasure,onChange:se,className:"input",required:!0,children:[a.jsx("option",{value:"kg",children:"Kilograms (kg)"}),a.jsx("option",{value:"m3",children:"Cubic meters (m)"}),a.jsx("option",{value:"units",children:"Units"}),a.jsx("option",{value:"liters",children:"Liters"}),a.jsx("option",{value:"tons",children:"Tons"})]})]})]})]}),a.jsxs("div",{className:"border-b pb-4",children:[a.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Sending Location"}),lt(b,xe,"sending",k,I,R,M)]}),a.jsxs("div",{className:"border-b pb-4",children:[a.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Receiving Location"}),lt(y,Le,"receiving",D,H,re,he)]}),a.jsxs("div",{className:"border-b pb-4",children:[a.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Transport Details"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Transport Mode"}),a.jsx("select",{name:"transportMode",value:x.transportMode,onChange:se,className:"input",children:Y.map(K=>a.jsx("option",{value:K.value,children:K.label},K.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Carrier"}),a.jsx("input",{type:"text",name:"carrier",value:x.carrier,onChange:se,className:"input",placeholder:"Carrier name"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Tracking Number"}),a.jsx("input",{type:"text",name:"trackingNumber",value:x.trackingNumber,onChange:se,className:"input"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Expected Arrival"}),a.jsx("input",{type:"date",name:"expectedArrivalDate",value:x.expectedArrivalDate,onChange:se,className:"input"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Distance (km)"}),a.jsx("input",{type:"number",name:"distanceKm",value:x.distanceKm,onChange:se,className:"input",step:"any",placeholder:"0"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Emission Footprint (kg CO)"}),a.jsx("input",{type:"number",name:"carbonFootprintKg",value:x.carbonFootprintKg,onChange:se,className:"input",step:"any",placeholder:"0"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Notes"}),a.jsx("textarea",{name:"notes",value:x.notes,onChange:se,className:"input",rows:3})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"submit",disabled:i||r&&(c==null?void 0:c.status)==="received",className:"btn-primary",children:i?"Saving...":r?"Update Transfer":"Create Transfer"}),a.jsx("button",{type:"button",onClick:()=>e("/admin/transfers"),className:"btn-secondary",children:"Cancel"})]})]})]}),r&&c&&c.status==="in_transit"&&a.jsxs("div",{className:"card mt-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Receive Transfer"}),a.jsxs("form",{onSubmit:Ae,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Actual Arrival Date *"}),a.jsx("input",{type:"date",value:Z.actualArrivalDate,onChange:K=>oe(le=>({...le,actualArrivalDate:K.target.value})),className:"input",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Received Quantity"}),a.jsx("input",{type:"number",value:Z.receivedQuantity,onChange:K=>oe(le=>({...le,receivedQuantity:K.target.value})),className:"input",step:"any",placeholder:`Expected: ${c.quantity} ${c.unitOfMeasure}`})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Quality Notes"}),a.jsx("textarea",{value:Z.qualityNotes,onChange:K=>oe(le=>({...le,qualityNotes:K.target.value})),className:"input",rows:2})]}),a.jsx("button",{type:"submit",disabled:i,className:"btn-primary",children:i?"Processing...":"Confirm Receipt"})]})]}),r&&c&&c.status==="received"&&a.jsxs("div",{className:"card mt-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Receipt Information"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Received Date:"}),a.jsx("span",{className:"ml-2 font-medium",children:c.actualArrivalDate})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Received Quantity:"}),a.jsxs("span",{className:"ml-2 font-medium",children:[c.receivedQuantity||c.quantity," ",c.unitOfMeasure]})]})]})]}),r&&c&&c.status==="received"&&a.jsxs("div",{className:"card mt-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"UNTP Transaction Event"}),ve?a.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),a.jsx("span",{className:"font-medium text-green-800",children:"DTE VC Issued"})]}),a.jsx("p",{className:"text-xs text-green-600 mt-1 font-mono truncate",children:ve.credentialId})]}):a.jsxs("div",{className:"space-y-3",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Issue a Digital Traceability Event credential for this transfer."}),a.jsx("button",{onClick:C,disabled:ne,className:"btn-primary",children:ne?"Issuing...":"Issue Transaction Event Credential"})]})]})]})}function Bv(){var E;const[e,t]=v.useState([]),[r,n]=v.useState(!0),[s,i]=v.useState(null),[l,d]=v.useState({page:1,limit:20,total:0}),[o,c]=v.useState({status:"",transferType:""}),[u,p]=v.useState(!1),[m,N]=v.useState(null),[f,h]=v.useState({});v.useEffect(()=>{j()},[l.page,o]);const j=async()=>{var y,w;n(!0);try{const k={page:l.page,limit:l.limit,...Object.fromEntries(Object.entries(o).filter(([R,U])=>U))},I=await er.list(k);t(I.data.transfers||I.data||[]),d(R=>({...R,total:I.data.total||I.data.length}))}catch(k){i(((w=(y=k.response)==null?void 0:y.data)==null?void 0:w.error)||"Failed to load transfers")}finally{n(!1)}},x=async y=>{N(y);try{const w=await kt.getByEntity("transfer",y.id);h(k=>({...k,[y.id]:w.data.evidence||w.data||[]}))}catch(w){console.error("Failed to fetch evidence:",w),h(k=>({...k,[y.id]:[]}))}p(!0)},g=()=>{m&&kt.getByEntity("transfer",m.id).then(y=>{h(w=>({...w,[m.id]:y.data.evidence||y.data||[]}))}).catch(console.error)},b=y=>{const w={pending:"bg-yellow-100 text-yellow-800",in_transit:"bg-blue-100 text-blue-800",delivered:"bg-green-100 text-green-800",received:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"};return a.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${w[y]||"bg-gray-100 text-gray-800"}`,children:y==null?void 0:y.replace("_"," ")})};return r&&e.length===0?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Custody Transfers"}),a.jsx(Se,{to:"/admin/transfers/new",className:"btn-primary",children:"+ New Transfer"})]}),s&&a.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6",children:[s,a.jsx("button",{onClick:()=>i(null),className:"ml-2 text-red-900",children:""})]}),a.jsx("div",{className:"card mb-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Status"}),a.jsxs("select",{value:o.status,onChange:y=>c(w=>({...w,status:y.target.value})),className:"input",children:[a.jsx("option",{value:"",children:"All"}),a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"in_transit",children:"In Transit"}),a.jsx("option",{value:"delivered",children:"Delivered"}),a.jsx("option",{value:"received",children:"Received"}),a.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Transfer Type"}),a.jsxs("select",{value:o.transferType,onChange:y=>c(w=>({...w,transferType:y.target.value})),className:"input",children:[a.jsx("option",{value:"",children:"All"}),a.jsx("option",{value:"standard",children:"Standard"}),a.jsx("option",{value:"return",children:"Return"}),a.jsx("option",{value:"internal",children:"Internal"}),a.jsx("option",{value:"consignment",children:"Consignment"})]})]})]})}),a.jsxs("div",{className:"card overflow-hidden",children:[a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Material"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"From  To"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Quantity"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Departure"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Transport"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),a.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"px-4 py-8 text-center text-gray-500",children:"No transfers found"})}):e.map(y=>{var w,k,I,R,U;return a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsxs("td",{className:"px-4 py-3",children:[a.jsx("div",{className:"font-medium text-gray-900",children:((w=y.material)==null?void 0:w.name)||((k=y.materialId)==null?void 0:k.substring(0,8))}),a.jsx("div",{className:"text-xs text-gray-500",children:y.transferType})]}),a.jsxs("td",{className:"px-4 py-3 text-sm text-gray-600",children:[a.jsx("div",{children:((I=y.fromOrganization)==null?void 0:I.name)||"Unknown"}),a.jsx("div",{className:"text-gray-400",children:""}),a.jsx("div",{children:((R=y.toOrganization)==null?void 0:R.name)||"Unknown"})]}),a.jsxs("td",{className:"px-4 py-3 text-sm text-gray-600",children:[y.quantity," ",y.unitOfMeasure]}),a.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:y.departureDate}),a.jsxs("td",{className:"px-4 py-3 text-sm text-gray-600",children:[a.jsx("div",{children:y.transportMode}),y.carrier&&a.jsx("div",{className:"text-xs text-gray-400",children:y.carrier})]}),a.jsx("td",{className:"px-4 py-3",children:b(y.status)}),a.jsxs("td",{className:"px-4 py-3 text-right space-x-2",children:[a.jsx(Zi,{onClick:()=>x(y),hasEvidence:(((U=f[y.id])==null?void 0:U.length)||0)>0}),a.jsx(Se,{to:`/admin/transfers/${y.id}`,className:"text-primary-600 hover:text-primary-800 text-sm",children:y.status==="in_transit"?"Receive":"View"})]})]},y.id)})})]})}),l.total>l.limit&&a.jsxs("div",{className:"px-4 py-3 border-t flex items-center justify-between",children:[a.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",(l.page-1)*l.limit+1," to ",Math.min(l.page*l.limit,l.total)," of ",l.total]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>d(y=>({...y,page:y.page-1})),disabled:l.page===1,className:"btn-secondary text-sm",children:"Previous"}),a.jsx("button",{onClick:()=>d(y=>({...y,page:y.page+1})),disabled:l.page*l.limit>=l.total,className:"btn-secondary text-sm",children:"Next"})]})]})]}),a.jsx(Ji,{isOpen:u,onClose:()=>{p(!1),N(null)},entityType:"transfer",entityId:m==null?void 0:m.id,entityName:`Transfer: ${((E=m==null?void 0:m.material)==null?void 0:E.name)||"Material"}`,existingEvidence:f[m==null?void 0:m.id]||[],onSuccess:g})]})}function Du(){const e=va(),{id:t}=Zr(),r=!!t,[n,s]=v.useState(!1),[i,l]=v.useState(!1),[d,o]=v.useState(null),[c,u]=v.useState(null),[p,m]=v.useState("basic"),[N,f]=v.useState([]),[h,j]=v.useState([]),[x,g]=v.useState(!0),[b,E]=v.useState({batchNumber:"",name:"",description:"",organizationId:"",productGroup:"",productType:"",quantityProduced:"",startDate:new Date().toISOString().split("T")[0],endDate:"",processType:"manufacturing",processDescription:"",status:"in_progress"}),[y,w]=v.useState({name:"",street:"",houseNumber:"",additionalInfo:"",city:"",region:"",country:"",countryCode:"",postalCode:"",lat:null,lng:null}),[k,I]=v.useState(""),[R,U]=v.useState(""),[M,L]=v.useState([]),[D,H]=v.useState(!1),[re,ie]=v.useState(null),[he,W]=v.useState([]),[te,ae]=v.useState({quantity:"",unit:"kg",type:"",disposalMethod:""}),[Z,oe]=v.useState({quantity:"",unit:"kg",type:"",recyclingPath:""}),[ve,ee]=v.useState({energyUsageKwh:"",renewableEnergyPercentage:"",waterUsageLiters:"",carbonFootprintKg:""}),[ne,me]=v.useState({durability:{expectedLifespanYears:"",guaranteePeriodMonths:"",technicalLifespanCycles:""},repairability:{repairManualAvailable:!1,repairManualUrl:"",sparePartsAvailable:!1,sparePartsUrl:"",score:"",sparePartsAvailabilityYears:"",sparePartsDeliveryDays:""},recyclability:{isRecyclable:!1,recyclabilityInfoAvailable:!1,recyclabilityInfoUrl:"",recyclablePercentage:"",hasRecycledContent:!1,recycledContentInfoAvailable:!1,recycledContentInfoUrl:"",recycledContentPercentage:""},hazardousSubstances:{containsHazardous:!1,substances:[],reachCompliant:!0,rohsCompliant:!0},packaging:{type:"",weight:"",recyclablePercentage:""},endOfLife:{disposalInstructions:"",recyclingInstructions:"",takeBackProgram:!1,takeBackUrl:""},energyEfficiency:{class:"",annualConsumption:"",standbyPower:""}}),[_,G]=v.useState(null),[Y,S]=v.useState(!1),C=[{value:"furniture",label:"Furniture"},{value:"textiles",label:"Textiles"},{value:"electronics",label:"Electronics"},{value:"batteries",label:"Batteries"},{value:"construction",label:"Construction Materials"},{value:"packaging",label:"Packaging"},{value:"automotive",label:"Automotive Parts"},{value:"other",label:"Other"}],A={furniture:["chair","table","couch","bed","cabinet","desk","shelf","other"],textiles:["shirt","pants","dress","jacket","fabric","other"],electronics:["smartphone","laptop","tablet","appliance","component","other"],batteries:["lithium-ion","lead-acid","nickel","other"],construction:["cement","steel","wood","insulation","other"],packaging:["cardboard","plastic","glass","metal","other"],automotive:["engine","body","interior","electrical","other"],other:["general"]},ue=[{value:"manufacturing",label:"Manufacturing"},{value:"assembly",label:"Assembly"},{value:"processing",label:"Processing"},{value:"packaging",label:"Packaging"},{value:"recycling",label:"Recycling"}],F=["A+++","A++","A+","A","B","C","D","E","F","G"];v.useEffect(()=>{q(),r&&(xe(),X())},[t]);const q=async()=>{g(!0);try{const[P,T]=await Promise.all([Xt.list(),la.getAvailableMaterials().catch(()=>({data:{materials:[]}}))]);f(P.data.organizations||P.data||[]),j(T.data.materials||[])}catch(P){console.error("Failed to load options:",P)}finally{g(!1)}},X=async()=>{try{const P=await Ze.getDTE("transformation",t);P.data&&G(P.data)}catch{G(null)}},xe=async()=>{var P,T,pe,Ie;s(!0);try{const je=(await la.get(t)).data;u(je),E({batchNumber:je.batchNumber||"",name:je.name||"",description:je.description||"",organizationId:je.organizationId||"",productGroup:je.productGroup||"",productType:je.productType||"",quantityProduced:je.quantityProduced||"",startDate:((P=je.startDate)==null?void 0:P.split("T")[0])||"",endDate:((T=je.endDate)==null?void 0:T.split("T")[0])||"",processType:je.processType||"manufacturing",processDescription:je.processDescription||"",status:je.status||"in_progress"}),je.facilityLocation&&w(je.facilityLocation),je.facilityGln&&I(je.facilityGln),je.inputMaterials&&W(je.inputMaterials),je.wasteMaterial&&ae(je.wasteMaterial),je.recyclableMaterial&&oe(je.recyclableMaterial),(je.energyUsageKwh||je.carbonFootprintKg)&&ee({energyUsageKwh:je.energyUsageKwh||"",renewableEnergyPercentage:je.renewableEnergyPercentage||"",waterUsageLiters:je.waterUsageLiters||"",carbonFootprintKg:je.carbonFootprintKg||""}),je.espr&&Object.keys(je.espr).length>0&&me(ra=>({...ra,...je.espr}))}catch(yt){o(((Ie=(pe=yt.response)==null?void 0:pe.data)==null?void 0:Ie.error)||"Failed to load production batch")}finally{s(!1)}},Le=v.useCallback(async P=>{if(!P||P.length<3){L([]);return}H(!0);try{const pe=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(P)}&limit=5&addressdetails=1`,{headers:{"User-Agent":"DPP-System/1.0"}})).json();L(pe.map(Ie=>({display_name:Ie.display_name,lat:parseFloat(Ie.lat),lng:parseFloat(Ie.lon),address:Ie.address||{}})))}catch(T){console.error("Address search failed:",T),L([])}finally{H(!1)}},[]),V=P=>{var pe;const T=P.address;w({name:P.display_name.split(",")[0],street:T.road||"",houseNumber:T.house_number||"",additionalInfo:"",city:T.city||T.town||T.village||"",region:T.state||T.province||"",country:T.country||"",countryCode:((pe=T.country_code)==null?void 0:pe.toUpperCase())||"",postalCode:T.postcode||"",lat:P.lat,lng:P.lng}),U(""),L([])},se=(P,T)=>{w(pe=>({...pe,[P]:T}))},fe=P=>{const{name:T,value:pe}=P.target;E(Ie=>({...Ie,[T]:pe}))},Ae=P=>{const T=h.find(pe=>pe.id===P);T&&!he.find(pe=>pe.materialId===P)&&W(pe=>[...pe,{materialId:T.id,name:T.name,quantity:"",unit:T.unitOfMeasure||"kg"}])},at=(P,T,pe)=>{W(Ie=>Ie.map((yt,je)=>je===P?{...yt,[T]:pe}:yt))},lt=P=>{W(T=>T.filter((pe,Ie)=>Ie!==P))},K=async P=>{var T,pe;if(P.preventDefault(),l(!0),o(null),!y.city){o("Please enter at least a city for the facility location"),l(!1);return}try{const Ie={...b,quantityProduced:b.quantityProduced?parseInt(b.quantityProduced):null,facilityLocation:y,facilityGln:k||null,inputMaterials:he,wasteMaterial:te.quantity?te:null,recyclableMaterial:Z.quantity?Z:null,energyUsageKwh:ve.energyUsageKwh||null,renewableEnergyPercentage:ve.renewableEnergyPercentage||null,waterUsageLiters:ve.waterUsageLiters||null,carbonFootprintKg:ve.carbonFootprintKg||null,espr:ne};if(r)await la.update(t,Ie),e("/admin/production");else{const yt=await la.create(Ie),je=yt.data.productsCreated||0;if(je>0){const ra=confirm(`Batch created successfully!

${je} products have been created automatically.

Would you like to view the products now?`);e(ra?`/admin/products?batchId=${yt.data.batch.id}`:"/admin/production")}else e("/admin/production")}}catch(Ie){o(((pe=(T=Ie.response)==null?void 0:T.data)==null?void 0:pe.error)||"Failed to save production batch")}finally{l(!1)}},le=async()=>{var P,T;if(confirm("Complete this batch and create individual products?")){l(!0);try{const pe=await la.complete(t,{endDate:b.endDate||new Date().toISOString().split("T")[0],createProducts:!0});alert(`Batch completed! ${pe.data.productsCreated} products created.`),xe()}catch(pe){o(((T=(P=pe.response)==null?void 0:P.data)==null?void 0:T.error)||"Failed to complete batch")}finally{l(!1)}}},ye=async()=>{var P,T;S(!0);try{const pe=await Ze.issueTransformationEvent(t);G(pe.data),alert("Transformation Event credential issued successfully!")}catch(pe){alert(((T=(P=pe.response)==null?void 0:P.data)==null?void 0:T.message)||"Failed to issue DTE credential")}finally{S(!1)}},Me=P=>{const T={planned:"bg-gray-100 text-gray-800",in_progress:"bg-blue-100 text-blue-800",quality_check:"bg-yellow-100 text-yellow-800",completed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"};return a.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${T[P]||"bg-gray-100"}`,children:P==null?void 0:P.replace("_"," ")})},Ge=[{id:"basic",label:"Basic Info"},{id:"facility",label:"Facility"},{id:"materials",label:"Materials"},{id:"environmental",label:"Environmental"},{id:"espr",label:"ESPR/DPP Data"}];return n?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):a.jsxs("div",{className:"max-w-5xl mx-auto",children:[a.jsx("div",{className:"mb-6",children:a.jsxs("button",{onClick:()=>e("/admin/production"),className:"text-gray-600 hover:text-gray-900 flex items-center gap-1",children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Production"]})}),a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h1",{className:"text-xl font-bold text-gray-900",children:r?"Edit Production Batch":"New Production Batch"}),r&&c&&Me(c.status)]}),d&&a.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6",children:d}),a.jsx("div",{className:"border-b mb-6",children:a.jsx("div",{className:"flex gap-4 -mb-px",children:Ge.map(P=>a.jsx("button",{onClick:()=>m(P.id),className:`px-4 py-2 border-b-2 font-medium text-sm transition-colors ${p===P.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:P.label},P.id))})}),a.jsxs("form",{onSubmit:K,className:"space-y-6",children:[p==="basic"&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Batch Number *"}),a.jsx("input",{type:"text",name:"batchNumber",value:b.batchNumber,onChange:fe,className:"input",required:!0,disabled:r})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Organization *"}),a.jsxs("select",{name:"organizationId",value:b.organizationId,onChange:fe,className:"input",required:!0,children:[a.jsx("option",{value:"",children:"Select organization..."}),N.map(P=>a.jsx("option",{value:P.id,children:P.name},P.id))]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Batch Name"}),a.jsx("input",{type:"text",name:"name",value:b.name,onChange:fe,className:"input",placeholder:"Optional descriptive name"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Product Group *"}),a.jsxs("select",{name:"productGroup",value:b.productGroup,onChange:fe,className:"input",required:!0,children:[a.jsx("option",{value:"",children:"Select product group..."}),C.map(P=>a.jsx("option",{value:P.value,children:P.label},P.value))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Product Type *"}),a.jsxs("select",{name:"productType",value:b.productType,onChange:fe,className:"input",required:!0,disabled:!b.productGroup,children:[a.jsx("option",{value:"",children:"Select product type..."}),(A[b.productGroup]||[]).map(P=>a.jsx("option",{value:P,children:P.charAt(0).toUpperCase()+P.slice(1)},P))]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Quantity Produced *"}),a.jsx("input",{type:"number",name:"quantityProduced",value:b.quantityProduced,onChange:fe,className:"input",min:"1",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Start Date *"}),a.jsx("input",{type:"date",name:"startDate",value:b.startDate,onChange:fe,className:"input",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"End Date"}),a.jsx("input",{type:"date",name:"endDate",value:b.endDate,onChange:fe,className:"input"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Process Type"}),a.jsx("select",{name:"processType",value:b.processType,onChange:fe,className:"input",children:ue.map(P=>a.jsx("option",{value:P.value,children:P.label},P.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Status"}),a.jsxs("select",{name:"status",value:b.status,onChange:fe,className:"input",disabled:(c==null?void 0:c.status)==="completed",children:[a.jsx("option",{value:"planned",children:"Planned"}),a.jsx("option",{value:"in_progress",children:"In Progress"}),a.jsx("option",{value:"quality_check",children:"Quality Check"}),a.jsx("option",{value:"completed",children:"Completed"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Description"}),a.jsx("textarea",{name:"description",value:b.description,onChange:fe,className:"input",rows:3})]})]}),p==="facility"&&a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-md font-semibold",children:"Production Facility Location"}),a.jsxs("div",{className:"relative",children:[a.jsx("label",{className:"label",children:"Search Address (optional)"}),a.jsx("input",{type:"text",value:R,onChange:P=>{U(P.target.value),re&&clearTimeout(re),ie(setTimeout(()=>Le(P.target.value),500))},className:"input",placeholder:"Type to search and auto-fill..."}),D&&a.jsx("div",{className:"absolute right-3 top-9",children:a.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-primary-500 border-t-transparent rounded-full"})}),M.length>0&&a.jsx("div",{className:"absolute z-10 mt-1 w-full bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:M.map((P,T)=>a.jsx("button",{type:"button",onClick:()=>V(P),className:"w-full text-left px-4 py-2 hover:bg-gray-100 border-b border-gray-100 last:border-0 text-sm",children:P.display_name},T))})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[a.jsxs("div",{className:"col-span-2",children:[a.jsx("label",{className:"label",children:"Street"}),a.jsx("input",{type:"text",value:y.street,onChange:P=>se("street",P.target.value),className:"input"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"House No."}),a.jsx("input",{type:"text",value:y.houseNumber,onChange:P=>se("houseNumber",P.target.value),className:"input"})]}),a.jsxs("div",{className:"col-span-3",children:[a.jsx("label",{className:"label",children:"Additional Info"}),a.jsx("input",{type:"text",value:y.additionalInfo,onChange:P=>se("additionalInfo",P.target.value),className:"input",placeholder:"Building, floor, unit..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"City *"}),a.jsx("input",{type:"text",value:y.city,onChange:P=>se("city",P.target.value),className:"input",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Region/State"}),a.jsx("input",{type:"text",value:y.region,onChange:P=>se("region",P.target.value),className:"input"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Country"}),a.jsx("input",{type:"text",value:y.country,onChange:P=>se("country",P.target.value),className:"input"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Postal Code"}),a.jsx("input",{type:"text",value:y.postalCode,onChange:P=>se("postalCode",P.target.value),className:"input"})]})]}),y.lat&&a.jsxs("p",{className:"text-xs text-gray-500",children:["GPS: ",y.lat.toFixed(4),", ",y.lng.toFixed(4)]}),a.jsxs("div",{className:"border-t pt-4 mt-4",children:[a.jsx("h3",{className:"text-md font-semibold mb-3",children:"GS1 Global Location Number (GLN)"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"GLN (13 digits)"}),a.jsx("input",{type:"text",value:k,onChange:P=>I(P.target.value.replace(/\D/g,"").slice(0,13)),className:"input font-mono",placeholder:"0000000000000",maxLength:13}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Optional: Enter the facility's GS1 GLN for verified identification"})]}),k&&k.length===13&&a.jsx("div",{className:"flex items-end",children:a.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>alert("GLN verification coming soon"),children:"Verify GLN Credential"})})]})]})]}),p==="materials"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-md font-semibold mb-3",children:"Input Materials"}),a.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"Select materials that were used in this production batch"}),a.jsx("div",{className:"flex gap-2 mb-4",children:a.jsxs("select",{className:"input flex-1",onChange:P=>{P.target.value&&(Ae(P.target.value),P.target.value="")},children:[a.jsx("option",{value:"",children:"Add material..."}),h.filter(P=>!he.find(T=>T.materialId===P.id)).map(P=>a.jsxs("option",{value:P.id,children:[P.name," (",P.quantity," ",P.unitOfMeasure,") ",P.originCountry?`- ${P.originCountry}`:""," [",P.status,"]"]},P.id))]})}),he.length>0?a.jsx("div",{className:"space-y-2",children:he.map((P,T)=>a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[a.jsx("div",{className:"flex-1",children:a.jsx("span",{className:"font-medium",children:P.name})}),a.jsx("div",{className:"w-24",children:a.jsx("input",{type:"number",value:P.quantity,onChange:pe=>at(T,"quantity",pe.target.value),className:"input",placeholder:"Qty",step:"any"})}),a.jsx("div",{className:"w-20",children:a.jsxs("select",{value:P.unit,onChange:pe=>at(T,"unit",pe.target.value),className:"input",children:[a.jsx("option",{value:"kg",children:"kg"}),a.jsx("option",{value:"units",children:"units"}),a.jsx("option",{value:"m3",children:"m"}),a.jsx("option",{value:"liters",children:"liters"})]})}),a.jsx("button",{type:"button",onClick:()=>lt(T),className:"text-red-500 hover:text-red-700",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},T))}):a.jsx("p",{className:"text-sm text-gray-400 italic",children:"No input materials selected"})]}),a.jsxs("div",{className:"border-t pt-4",children:[a.jsx("h3",{className:"text-md font-semibold mb-3",children:"Waste Material"}),a.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Quantity"}),a.jsx("input",{type:"number",value:te.quantity,onChange:P=>ae(T=>({...T,quantity:P.target.value})),className:"input",step:"any"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Unit"}),a.jsxs("select",{value:te.unit,onChange:P=>ae(T=>({...T,unit:P.target.value})),className:"input",children:[a.jsx("option",{value:"kg",children:"kg"}),a.jsx("option",{value:"units",children:"units"}),a.jsx("option",{value:"liters",children:"liters"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Type"}),a.jsx("input",{type:"text",value:te.type,onChange:P=>ae(T=>({...T,type:P.target.value})),className:"input",placeholder:"e.g., sawdust, scrap"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Disposal Method"}),a.jsx("input",{type:"text",value:te.disposalMethod,onChange:P=>ae(T=>({...T,disposalMethod:P.target.value})),className:"input",placeholder:"e.g., landfill, incineration"})]})]})]}),a.jsxs("div",{className:"border-t pt-4",children:[a.jsx("h3",{className:"text-md font-semibold mb-3",children:"Recyclable Material"}),a.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Quantity"}),a.jsx("input",{type:"number",value:Z.quantity,onChange:P=>oe(T=>({...T,quantity:P.target.value})),className:"input",step:"any"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Unit"}),a.jsxs("select",{value:Z.unit,onChange:P=>oe(T=>({...T,unit:P.target.value})),className:"input",children:[a.jsx("option",{value:"kg",children:"kg"}),a.jsx("option",{value:"units",children:"units"}),a.jsx("option",{value:"liters",children:"liters"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Type"}),a.jsx("input",{type:"text",value:Z.type,onChange:P=>oe(T=>({...T,type:P.target.value})),className:"input",placeholder:"e.g., metal, plastic"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Recycling Path"}),a.jsx("input",{type:"text",value:Z.recyclingPath,onChange:P=>oe(T=>({...T,recyclingPath:P.target.value})),className:"input",placeholder:"e.g., metal recycler, reuse"})]})]})]})]}),p==="environmental"&&a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-md font-semibold",children:"Environmental Impact"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Energy Usage (kWh)"}),a.jsx("input",{type:"number",value:ve.energyUsageKwh,onChange:P=>ee(T=>({...T,energyUsageKwh:P.target.value})),className:"input",step:"any"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Renewable Energy (%)"}),a.jsx("input",{type:"number",value:ve.renewableEnergyPercentage,onChange:P=>ee(T=>({...T,renewableEnergyPercentage:P.target.value})),className:"input",min:"0",max:"100",step:"0.1"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Water Usage (Liters)"}),a.jsx("input",{type:"number",value:ve.waterUsageLiters,onChange:P=>ee(T=>({...T,waterUsageLiters:P.target.value})),className:"input",step:"any"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Carbon Footprint (kg COe) - Total Batch"}),a.jsx("input",{type:"number",value:ve.carbonFootprintKg,onChange:P=>ee(T=>({...T,carbonFootprintKg:P.target.value})),className:"input",step:"any"}),b.quantityProduced&&ve.carbonFootprintKg&&a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Per unit: ",(parseFloat(ve.carbonFootprintKg)/parseInt(b.quantityProduced)).toFixed(4)," kg COe"]})]})]})]}),p==="espr"&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("p",{className:"text-sm text-gray-500",children:"ESPR (Ecodesign for Sustainable Products Regulation) data fields for Digital Product Passport compliance."}),a.jsxs("div",{className:"border rounded-lg p-4",children:[a.jsx("h3",{className:"text-md font-semibold mb-3",children:"Durability & Reliability"}),a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Expected Lifespan (years)"}),a.jsx("input",{type:"number",value:ne.durability.expectedLifespanYears,onChange:P=>me(T=>({...T,durability:{...T.durability,expectedLifespanYears:P.target.value}})),className:"input",min:"0"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Guarantee Period (months)"}),a.jsx("input",{type:"number",value:ne.durability.guaranteePeriodMonths,onChange:P=>me(T=>({...T,durability:{...T.durability,guaranteePeriodMonths:P.target.value}})),className:"input",min:"0"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Technical Lifespan (cycles)"}),a.jsx("input",{type:"number",value:ne.durability.technicalLifespanCycles,onChange:P=>me(T=>({...T,durability:{...T.durability,technicalLifespanCycles:P.target.value}})),className:"input",min:"0"})]})]})]}),a.jsxs("div",{className:"border rounded-lg p-4",children:[a.jsx("h3",{className:"text-md font-semibold mb-3",children:"Repairability"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:ne.repairability.repairManualAvailable,onChange:P=>me(T=>({...T,repairability:{...T.repairability,repairManualAvailable:P.target.checked,repairManualUrl:P.target.checked?T.repairability.repairManualUrl:""}})),className:"rounded"}),"Repair Manual Available"]}),ne.repairability.repairManualAvailable&&a.jsxs("div",{className:"ml-6",children:[a.jsx("label",{className:"label",children:"Repair Manual URL"}),a.jsx("input",{type:"url",value:ne.repairability.repairManualUrl,onChange:P=>me(T=>({...T,repairability:{...T.repairability,repairManualUrl:P.target.value}})),className:"input",placeholder:"https://..."})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:ne.repairability.sparePartsAvailable,onChange:P=>me(T=>({...T,repairability:{...T.repairability,sparePartsAvailable:P.target.checked,sparePartsUrl:P.target.checked?T.repairability.sparePartsUrl:""}})),className:"rounded"}),"Spare Parts Available"]}),ne.repairability.sparePartsAvailable&&a.jsxs("div",{className:"ml-6 space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Spare Parts URL"}),a.jsx("input",{type:"url",value:ne.repairability.sparePartsUrl,onChange:P=>me(T=>({...T,repairability:{...T.repairability,sparePartsUrl:P.target.value}})),className:"input",placeholder:"https://..."})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Availability Period (years)"}),a.jsx("input",{type:"number",value:ne.repairability.sparePartsAvailabilityYears,onChange:P=>me(T=>({...T,repairability:{...T.repairability,sparePartsAvailabilityYears:P.target.value}})),className:"input",min:"0"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Delivery Time (days)"}),a.jsx("input",{type:"number",value:ne.repairability.sparePartsDeliveryDays,onChange:P=>me(T=>({...T,repairability:{...T.repairability,sparePartsDeliveryDays:P.target.value}})),className:"input",min:"0"})]})]})]})]}),a.jsx("div",{className:"border-t pt-4",children:a.jsxs("div",{className:"w-1/2",children:[a.jsx("label",{className:"label",children:"Repairability Score (1-10)"}),a.jsx("input",{type:"number",value:ne.repairability.score,onChange:P=>me(T=>({...T,repairability:{...T.repairability,score:P.target.value}})),className:"input",min:"1",max:"10"})]})})]})]}),a.jsxs("div",{className:"border rounded-lg p-4",children:[a.jsx("h3",{className:"text-md font-semibold mb-3",children:"Recyclability"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:ne.recyclability.isRecyclable,onChange:P=>me(T=>({...T,recyclability:{...T.recyclability,isRecyclable:P.target.checked,recyclabilityInfoAvailable:P.target.checked?T.recyclability.recyclabilityInfoAvailable:!1,recyclabilityInfoUrl:P.target.checked?T.recyclability.recyclabilityInfoUrl:""}})),className:"rounded"}),"Product is Recyclable"]}),ne.recyclability.isRecyclable&&a.jsxs("div",{className:"ml-6 space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:ne.recyclability.recyclabilityInfoAvailable,onChange:P=>me(T=>({...T,recyclability:{...T.recyclability,recyclabilityInfoAvailable:P.target.checked,recyclabilityInfoUrl:P.target.checked?T.recyclability.recyclabilityInfoUrl:""}})),className:"rounded"}),"Recyclability Information Available"]}),ne.recyclability.recyclabilityInfoAvailable&&a.jsxs("div",{className:"ml-6",children:[a.jsx("label",{className:"label",children:"Recyclability Information URL"}),a.jsx("input",{type:"url",value:ne.recyclability.recyclabilityInfoUrl,onChange:P=>me(T=>({...T,recyclability:{...T.recyclability,recyclabilityInfoUrl:P.target.value}})),className:"input",placeholder:"https://..."})]}),a.jsxs("div",{className:"ml-6",children:[a.jsx("label",{className:"label",children:"Recyclable Percentage (%)"}),a.jsx("input",{type:"number",value:ne.recyclability.recyclablePercentage,onChange:P=>me(T=>({...T,recyclability:{...T.recyclability,recyclablePercentage:P.target.value}})),className:"input w-32",min:"0",max:"100",step:"0.1"})]})]})]}),a.jsxs("div",{className:"space-y-2 border-t pt-4",children:[a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:ne.recyclability.hasRecycledContent,onChange:P=>me(T=>({...T,recyclability:{...T.recyclability,hasRecycledContent:P.target.checked,recycledContentInfoAvailable:P.target.checked?T.recyclability.recycledContentInfoAvailable:!1,recycledContentInfoUrl:P.target.checked?T.recyclability.recycledContentInfoUrl:""}})),className:"rounded"}),"Contains Recycled Content"]}),ne.recyclability.hasRecycledContent&&a.jsxs("div",{className:"ml-6 space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:ne.recyclability.recycledContentInfoAvailable,onChange:P=>me(T=>({...T,recyclability:{...T.recyclability,recycledContentInfoAvailable:P.target.checked,recycledContentInfoUrl:P.target.checked?T.recyclability.recycledContentInfoUrl:""}})),className:"rounded"}),"Recycled Content Information Available"]}),ne.recyclability.recycledContentInfoAvailable&&a.jsxs("div",{className:"ml-6",children:[a.jsx("label",{className:"label",children:"Recycled Content Information URL"}),a.jsx("input",{type:"url",value:ne.recyclability.recycledContentInfoUrl,onChange:P=>me(T=>({...T,recyclability:{...T.recyclability,recycledContentInfoUrl:P.target.value}})),className:"input",placeholder:"https://..."})]}),a.jsxs("div",{className:"ml-6",children:[a.jsx("label",{className:"label",children:"Recycled Content Percentage (%)"}),a.jsx("input",{type:"number",value:ne.recyclability.recycledContentPercentage,onChange:P=>me(T=>({...T,recyclability:{...T.recyclability,recycledContentPercentage:P.target.value}})),className:"input w-32",min:"0",max:"100",step:"0.1"})]})]})]})]})]}),a.jsxs("div",{className:"border rounded-lg p-4",children:[a.jsx("h3",{className:"text-md font-semibold mb-3",children:"Hazardous Substances"}),a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:ne.hazardousSubstances.containsHazardous,onChange:P=>me(T=>({...T,hazardousSubstances:{...T.hazardousSubstances,containsHazardous:P.target.checked}})),className:"rounded"}),"Contains Hazardous Substances"]}),a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:ne.hazardousSubstances.reachCompliant,onChange:P=>me(T=>({...T,hazardousSubstances:{...T.hazardousSubstances,reachCompliant:P.target.checked}})),className:"rounded"}),"REACH Compliant"]}),a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:ne.hazardousSubstances.rohsCompliant,onChange:P=>me(T=>({...T,hazardousSubstances:{...T.hazardousSubstances,rohsCompliant:P.target.checked}})),className:"rounded"}),"RoHS Compliant"]})]})]}),a.jsxs("div",{className:"border rounded-lg p-4",children:[a.jsx("h3",{className:"text-md font-semibold mb-3",children:"Packaging"}),a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Packaging Type"}),a.jsx("input",{type:"text",value:ne.packaging.type,onChange:P=>me(T=>({...T,packaging:{...T.packaging,type:P.target.value}})),className:"input",placeholder:"e.g., cardboard box"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Packaging Weight (g)"}),a.jsx("input",{type:"number",value:ne.packaging.weight,onChange:P=>me(T=>({...T,packaging:{...T.packaging,weight:P.target.value}})),className:"input",min:"0"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Recyclable (%)"}),a.jsx("input",{type:"number",value:ne.packaging.recyclablePercentage,onChange:P=>me(T=>({...T,packaging:{...T.packaging,recyclablePercentage:P.target.value}})),className:"input",min:"0",max:"100"})]})]})]}),a.jsxs("div",{className:"border rounded-lg p-4",children:[a.jsx("h3",{className:"text-md font-semibold mb-3",children:"End of Life"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Disposal Instructions"}),a.jsx("textarea",{value:ne.endOfLife.disposalInstructions,onChange:P=>me(T=>({...T,endOfLife:{...T.endOfLife,disposalInstructions:P.target.value}})),className:"input",rows:2})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Recycling Instructions"}),a.jsx("textarea",{value:ne.endOfLife.recyclingInstructions,onChange:P=>me(T=>({...T,endOfLife:{...T.endOfLife,recyclingInstructions:P.target.value}})),className:"input",rows:2})]}),a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:ne.endOfLife.takeBackProgram,onChange:P=>me(T=>({...T,endOfLife:{...T.endOfLife,takeBackProgram:P.target.checked}})),className:"rounded"}),"Take-Back Program Available"]}),ne.endOfLife.takeBackProgram&&a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Take-Back Program URL"}),a.jsx("input",{type:"url",value:ne.endOfLife.takeBackUrl,onChange:P=>me(T=>({...T,endOfLife:{...T.endOfLife,takeBackUrl:P.target.value}})),className:"input",placeholder:"https://..."})]})]})]}),a.jsxs("div",{className:"border rounded-lg p-4",children:[a.jsx("h3",{className:"text-md font-semibold mb-3",children:"Energy Efficiency (if applicable)"}),a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Energy Class"}),a.jsxs("select",{value:ne.energyEfficiency.class,onChange:P=>me(T=>({...T,energyEfficiency:{...T.energyEfficiency,class:P.target.value}})),className:"input",children:[a.jsx("option",{value:"",children:"N/A"}),F.map(P=>a.jsx("option",{value:P,children:P},P))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Annual Consumption (kWh)"}),a.jsx("input",{type:"number",value:ne.energyEfficiency.annualConsumption,onChange:P=>me(T=>({...T,energyEfficiency:{...T.energyEfficiency,annualConsumption:P.target.value}})),className:"input",min:"0",step:"any"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Standby Power (W)"}),a.jsx("input",{type:"number",value:ne.energyEfficiency.standbyPower,onChange:P=>me(T=>({...T,energyEfficiency:{...T.energyEfficiency,standbyPower:P.target.value}})),className:"input",min:"0",step:"any"})]})]})]})]}),a.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[a.jsx("button",{type:"submit",disabled:i||(c==null?void 0:c.status)==="completed",className:"btn-primary",children:i?"Saving...":r?"Update Batch":"Create Batch"}),r&&(c==null?void 0:c.status)==="in_progress"&&a.jsx("button",{type:"button",onClick:le,disabled:i,className:"btn-secondary bg-green-100 text-green-700 hover:bg-green-200",children:"Complete & Create Products"}),a.jsx("button",{type:"button",onClick:()=>e("/admin/production"),className:"btn-secondary",children:"Cancel"})]})]})]}),r&&c&&c.status==="completed"&&a.jsxs("div",{className:"card mt-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"UNTP Transformation Event"}),_?a.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),a.jsx("span",{className:"font-medium text-green-800",children:"DTE VC Issued"})]}),a.jsx("p",{className:"text-xs text-green-600 mt-1 font-mono truncate",children:_.credentialId})]}):a.jsxs("div",{className:"space-y-3",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Issue a Digital Traceability Event credential for this batch."}),a.jsx("button",{onClick:ye,disabled:Y,className:"btn-primary",children:Y?"Issuing...":"Issue Transformation Event Credential"})]})]}),r&&c&&c.productsCreated&&a.jsxs("div",{className:"card mt-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Products Created"}),a.jsxs("p",{className:"text-sm text-gray-600",children:[c.quantityProduced," products were created from this batch with DPP data."]}),a.jsx("button",{onClick:()=>e(`/admin/products?batchId=${t}`),className:"btn-secondary mt-3",children:"View Products"})]})]})}function Uv(){const[e,t]=v.useState([]),[r,n]=v.useState(!0),[s,i]=v.useState(null),[l,d]=v.useState({page:1,limit:20,total:0}),[o,c]=v.useState({status:"",productionType:""}),[u,p]=v.useState(!1),[m,N]=v.useState(null),[f,h]=v.useState({});v.useEffect(()=>{j()},[l.page,o]);const j=async()=>{var y,w;n(!0);try{const k={page:l.page,limit:l.limit,...Object.fromEntries(Object.entries(o).filter(([R,U])=>U))},I=await la.list(k);t(I.data.batches||I.data||[]),d(R=>({...R,total:I.data.total||I.data.length}))}catch(k){i(((w=(y=k.response)==null?void 0:y.data)==null?void 0:w.error)||"Failed to load production batches")}finally{n(!1)}},x=async y=>{N(y);try{const w=await kt.getByEntity("production",y.id);h(k=>({...k,[y.id]:w.data.evidence||w.data||[]}))}catch(w){console.error("Failed to fetch evidence:",w),h(k=>({...k,[y.id]:[]}))}p(!0)},g=()=>{m&&kt.getByEntity("production",m.id).then(y=>{h(w=>({...w,[m.id]:y.data.evidence||y.data||[]}))}).catch(console.error)},b=y=>{const w={planned:"bg-gray-100 text-gray-800",in_progress:"bg-blue-100 text-blue-800",completed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"};return a.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${w[y]||"bg-gray-100 text-gray-800"}`,children:y==null?void 0:y.replace("_"," ")})},E=y=>a.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-purple-100 text-purple-800",children:y});return r&&e.length===0?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Production Batches"}),a.jsx(Se,{to:"/admin/production/new",className:"btn-primary",children:"+ New Batch"})]}),s&&a.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6",children:[s,a.jsx("button",{onClick:()=>i(null),className:"ml-2 text-red-900",children:""})]}),a.jsx("div",{className:"card mb-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Status"}),a.jsxs("select",{value:o.status,onChange:y=>c(w=>({...w,status:y.target.value})),className:"input",children:[a.jsx("option",{value:"",children:"All"}),a.jsx("option",{value:"planned",children:"Planned"}),a.jsx("option",{value:"in_progress",children:"In Progress"}),a.jsx("option",{value:"completed",children:"Completed"}),a.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Production Type"}),a.jsxs("select",{value:o.productionType,onChange:y=>c(w=>({...w,productionType:y.target.value})),className:"input",children:[a.jsx("option",{value:"",children:"All"}),a.jsx("option",{value:"manufacturing",children:"Manufacturing"}),a.jsx("option",{value:"processing",children:"Processing"}),a.jsx("option",{value:"assembly",children:"Assembly"}),a.jsx("option",{value:"packaging",children:"Packaging"}),a.jsx("option",{value:"recycling",children:"Recycling"})]})]})]})}),a.jsxs("div",{className:"card overflow-hidden",children:[a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Batch"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Organization"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Start Date"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Inputs"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Outputs"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),a.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:8,className:"px-4 py-8 text-center text-gray-500",children:"No production batches found"})}):e.map(y=>{var w,k,I,R;return a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-4 py-3",children:a.jsx("div",{className:"font-medium text-gray-900",children:y.batchNumber})}),a.jsx("td",{className:"px-4 py-3",children:E(y.productionType)}),a.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:((w=y.organization)==null?void 0:w.name)||"-"}),a.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:y.startDate}),a.jsxs("td",{className:"px-4 py-3 text-sm text-gray-600",children:[((k=y.inputs)==null?void 0:k.length)||0," items"]}),a.jsxs("td",{className:"px-4 py-3 text-sm text-gray-600",children:[((I=y.outputs)==null?void 0:I.length)||0," items"]}),a.jsx("td",{className:"px-4 py-3",children:b(y.status)}),a.jsxs("td",{className:"px-4 py-3 text-right space-x-2",children:[a.jsx(Zi,{onClick:()=>x(y),hasEvidence:(((R=f[y.id])==null?void 0:R.length)||0)>0}),a.jsx(Se,{to:`/admin/production/${y.id}`,className:"text-primary-600 hover:text-primary-800 text-sm",children:y.status==="completed"?"View":"Edit"})]})]},y.id)})})]})}),l.total>l.limit&&a.jsxs("div",{className:"px-4 py-3 border-t flex items-center justify-between",children:[a.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",(l.page-1)*l.limit+1," to ",Math.min(l.page*l.limit,l.total)," of ",l.total]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>d(y=>({...y,page:y.page-1})),disabled:l.page===1,className:"btn-secondary text-sm",children:"Previous"}),a.jsx("button",{onClick:()=>d(y=>({...y,page:y.page+1})),disabled:l.page*l.limit>=l.total,className:"btn-secondary text-sm",children:"Next"})]})]})]}),a.jsx(Ji,{isOpen:u,onClose:()=>{p(!1),N(null)},entityType:"production",entityId:m==null?void 0:m.id,entityName:`Batch: ${(m==null?void 0:m.batchNumber)||"Production"}`,existingEvidence:f[m==null?void 0:m.id]||[],onSuccess:g})]})}const Vv=[{value:"",label:"Select category..."},{group:"Furniture (EUDR)",options:[{value:"chair",label:"Chair"},{value:"table",label:"Table"},{value:"cabinet",label:"Cabinet"},{value:"desk",label:"Desk"},{value:"shelf",label:"Shelf"},{value:"bed",label:"Bed"},{value:"sofa",label:"Sofa"},{value:"other_furniture",label:"Other Furniture"}]},{group:"Electronics",options:[{value:"smartphone",label:"Smartphone"},{value:"laptop",label:"Laptop"},{value:"tablet",label:"Tablet"},{value:"appliance",label:"Appliance"},{value:"other_electronics",label:"Other Electronics"}]},{group:"Textiles",options:[{value:"clothing",label:"Clothing"},{value:"footwear",label:"Footwear"},{value:"accessories",label:"Accessories"},{value:"home_textiles",label:"Home Textiles"}]},{group:"Batteries",options:[{value:"ev_battery",label:"EV Battery"},{value:"industrial_battery",label:"Industrial Battery"},{value:"portable_battery",label:"Portable Battery"}]},{group:"Other",options:[{value:"packaging",label:"Packaging"},{value:"construction",label:"Construction Material"},{value:"other",label:"Other"}]}],Wv=["A+++","A++","A+","A","B","C","D","E","F","G"];function Ru(){var S;const e=va(),{id:t}=Zr(),r=!!t,[n,s]=v.useState(!1),[i,l]=v.useState(!1),[d,o]=v.useState(null),[c,u]=v.useState([]),[p,m]=v.useState([]),[N,f]=v.useState(null),[h,j]=v.useState(null),[x,g]=v.useState(!1),[b,E]=v.useState("basic"),[y,w]=v.useState({name:"",description:"",sku:"",gtin:"",brand:"",model:"",category:"",manufacturerId:"",productionBatchId:"",weightKg:"",dimensions:{lengthCm:"",widthCm:"",heightCm:""},expectedLifespanYears:"",warrantyYears:"",repairabilityScore:"",repairInstructions:"",recyclabilityInfo:"",disassemblyInstructions:"",hazardousMaterials:"",status:"draft"}),[k,I]=v.useState({carbonFootprintKg:"",energyUsageKwh:"",renewableEnergyPercentage:"",waterUsageLiters:""}),[R,U]=v.useState({processType:"",processDescription:"",facilityLocation:"",facilityGln:""}),[M,L]=v.useState({durability:{expectedLifespanYears:"",guaranteePeriodMonths:"",technicalLifespanCycles:""},repairability:{score:"",repairManualAvailable:!1,repairManualUrl:"",sparePartsAvailable:!1,sparePartsUrl:"",sparePartsAvailabilityYears:"",sparePartsDeliveryDays:""},recyclability:{isRecyclable:!1,recyclablePercentage:"",recyclabilityInfoAvailable:!1,recyclabilityInfoUrl:"",hasRecycledContent:!1,recycledContentPercentage:"",recycledContentInfoAvailable:!1,recycledContentInfoUrl:""},hazardousSubstances:{containsHazardous:!1,substances:"",reachCompliant:!1,rohsCompliant:!1},packaging:{type:"",weight:"",recyclablePercentage:""},endOfLife:{disposalInstructions:"",recyclingInstructions:"",takeBackProgram:!1,takeBackUrl:""},energyEfficiency:{class:"",annualConsumption:"",standbyPower:""}}),[D,H]=v.useState([]),[re,ie]=v.useState({type:"",quantity:"",unit:"kg"}),[he,W]=v.useState({type:"",quantity:"",unit:"kg"}),te=r?[{id:"basic",label:"Basic Info"},{id:"physical",label:"Physical Specs"},{id:"production",label:"Production"},{id:"environmental",label:"Environmental"},{id:"espr",label:"ESPR/DPP Data"},{id:"materials",label:"Materials"}]:[{id:"basic",label:"Basic Info"},{id:"physical",label:"Physical Specs"}];v.useEffect(()=>{ae(),r&&(ve(),Z())},[t]);const ae=async()=>{try{const[C,A]=await Promise.all([la.list({status:"completed",limit:100}),Xt.list()]);u(C.data.batches||C.data.productionBatches||[]),m(A.data.organizations||A.data||[])}catch(C){console.error("Failed to fetch options:",C)}},Z=async()=>{try{const C=await Ze.getDPP(t);C.data&&j(C.data)}catch{j(null)}},oe=async()=>{var C,A;g(!0);try{const ue=await Ze.issueDPP(t);j(ue.data),alert("DPP Verifiable Credential issued successfully!")}catch(ue){alert(((A=(C=ue.response)==null?void 0:C.data)==null?void 0:A.message)||"Failed to issue DPP credential")}finally{g(!1)}},ve=async()=>{var C,A,ue,F,q,X,xe,Le,V,se,fe,Ae,at,lt,K,le,ye,Me,Ge,P,T,pe,Ie,yt,je,ra,en,tn,an,Ee,Fc,zc,Bc,Uc,Vc,Wc,Hc,Kc;s(!0);try{const He=(await Or.get(t)).data;f(He);const Ne=He.productionBatch,Dt=He.metadata||{},Pe=Dt.espr||(Ne==null?void 0:Ne.espr)||{};w({name:He.name||"",description:He.description||"",sku:He.sku||"",gtin:He.gtin||"",brand:He.brand||"",model:He.model||"",category:He.category||"",manufacturerId:He.manufacturerId||"",productionBatchId:He.productionBatchId||"",weightKg:He.weightKg||"",dimensions:He.dimensions||{lengthCm:"",widthCm:"",heightCm:""},expectedLifespanYears:He.expectedLifespanYears||"",warrantyYears:He.warrantyYears||"",repairabilityScore:He.repairabilityScore||"",repairInstructions:He.repairInstructions||"",recyclabilityInfo:He.recyclabilityInfo||"",disassemblyInstructions:He.disassemblyInstructions||"",hazardousMaterials:He.hazardousMaterials||"",status:He.status||"draft"}),I({carbonFootprintKg:Dt.carbonFootprintKg||(Ne==null?void 0:Ne.carbonFootprintPerUnit)||"",energyUsageKwh:((C=Dt.environmentalData)==null?void 0:C.energyUsageKwh)||(Ne==null?void 0:Ne.energyUsageKwh)||"",renewableEnergyPercentage:((A=Dt.environmentalData)==null?void 0:A.renewableEnergyPercentage)||(Ne==null?void 0:Ne.renewableEnergyPercentage)||"",waterUsageLiters:((ue=Dt.environmentalData)==null?void 0:ue.waterUsageLiters)||(Ne==null?void 0:Ne.waterUsageLiters)||""}),U({processType:(Ne==null?void 0:Ne.processType)||Dt.processType||"",processDescription:(Ne==null?void 0:Ne.processDescription)||Dt.processDescription||"",facilityLocation:(F=Ne==null?void 0:Ne.facilityLocation)!=null&&F.city?`${Ne.facilityLocation.city}, ${Ne.facilityLocation.country||""}`.trim():Dt.facilityLocation||"",facilityGln:(Ne==null?void 0:Ne.facilityGln)||Dt.facilityGln||""}),L({durability:{expectedLifespanYears:((q=Pe.durability)==null?void 0:q.expectedLifespanYears)||"",guaranteePeriodMonths:((X=Pe.durability)==null?void 0:X.guaranteePeriodMonths)||"",technicalLifespanCycles:((xe=Pe.durability)==null?void 0:xe.technicalLifespanCycles)||""},repairability:{score:((Le=Pe.repairability)==null?void 0:Le.score)||"",repairManualAvailable:((V=Pe.repairability)==null?void 0:V.repairManualAvailable)||!1,repairManualUrl:((se=Pe.repairability)==null?void 0:se.repairManualUrl)||"",sparePartsAvailable:((fe=Pe.repairability)==null?void 0:fe.sparePartsAvailable)||!1,sparePartsUrl:((Ae=Pe.repairability)==null?void 0:Ae.sparePartsUrl)||"",sparePartsAvailabilityYears:((at=Pe.repairability)==null?void 0:at.sparePartsAvailabilityYears)||"",sparePartsDeliveryDays:((lt=Pe.repairability)==null?void 0:lt.sparePartsDeliveryDays)||""},recyclability:{isRecyclable:((K=Pe.recyclability)==null?void 0:K.isRecyclable)||!1,recyclablePercentage:((le=Pe.recyclability)==null?void 0:le.recyclablePercentage)||"",recyclabilityInfoAvailable:((ye=Pe.recyclability)==null?void 0:ye.recyclabilityInfoAvailable)||!1,recyclabilityInfoUrl:((Me=Pe.recyclability)==null?void 0:Me.recyclabilityInfoUrl)||"",hasRecycledContent:((Ge=Pe.recyclability)==null?void 0:Ge.hasRecycledContent)||!1,recycledContentPercentage:((P=Pe.recyclability)==null?void 0:P.recycledContentPercentage)||"",recycledContentInfoAvailable:((T=Pe.recyclability)==null?void 0:T.recycledContentInfoAvailable)||!1,recycledContentInfoUrl:((pe=Pe.recyclability)==null?void 0:pe.recycledContentInfoUrl)||""},hazardousSubstances:{containsHazardous:((Ie=Pe.hazardousSubstances)==null?void 0:Ie.containsHazardous)||!1,substances:((yt=Pe.hazardousSubstances)==null?void 0:yt.substances)||"",reachCompliant:((je=Pe.hazardousSubstances)==null?void 0:je.reachCompliant)||!1,rohsCompliant:((ra=Pe.hazardousSubstances)==null?void 0:ra.rohsCompliant)||!1},packaging:{type:((en=Pe.packaging)==null?void 0:en.type)||"",weight:((tn=Pe.packaging)==null?void 0:tn.weight)||"",recyclablePercentage:((an=Pe.packaging)==null?void 0:an.recyclablePercentage)||""},endOfLife:{disposalInstructions:((Ee=Pe.endOfLife)==null?void 0:Ee.disposalInstructions)||"",recyclingInstructions:((Fc=Pe.endOfLife)==null?void 0:Fc.recyclingInstructions)||"",takeBackProgram:((zc=Pe.endOfLife)==null?void 0:zc.takeBackProgram)||!1,takeBackUrl:((Bc=Pe.endOfLife)==null?void 0:Bc.takeBackUrl)||""},energyEfficiency:{class:((Uc=Pe.energyEfficiency)==null?void 0:Uc.class)||"",annualConsumption:((Vc=Pe.energyEfficiency)==null?void 0:Vc.annualConsumption)||"",standbyPower:((Wc=Pe.energyEfficiency)==null?void 0:Wc.standbyPower)||""}}),H(Dt.inputMaterials||(Ne==null?void 0:Ne.inputMaterials)||[]),ie(Dt.wasteMaterial||(Ne==null?void 0:Ne.wasteMaterial)||{type:"",quantity:"",unit:"kg"}),W(Dt.recyclableMaterial||(Ne==null?void 0:Ne.recyclableMaterial)||{type:"",quantity:"",unit:"kg"})}catch(Gc){o(((Kc=(Hc=Gc.response)==null?void 0:Hc.data)==null?void 0:Kc.error)||"Failed to load product")}finally{s(!1)}},ee=C=>{const{name:A,value:ue,type:F,checked:q}=C.target;w(X=>({...X,[A]:F==="checkbox"?q:ue}))},ne=(C,A)=>{w(ue=>({...ue,dimensions:{...ue.dimensions,[C]:A}}))},me=()=>{H(C=>[...C,{name:"",quantity:"",unit:"kg"}])},_=(C,A,ue)=>{H(F=>F.map((q,X)=>X===C?{...q,[A]:ue}:q))},G=C=>{H(A=>A.filter((ue,F)=>F!==C))},Y=async C=>{var A,ue;C.preventDefault(),l(!0),o(null);try{const F={carbonFootprintKg:k.carbonFootprintKg?parseFloat(k.carbonFootprintKg):null,environmentalData:{energyUsageKwh:k.energyUsageKwh?parseFloat(k.energyUsageKwh):null,renewableEnergyPercentage:k.renewableEnergyPercentage?parseFloat(k.renewableEnergyPercentage):null,waterUsageLiters:k.waterUsageLiters?parseFloat(k.waterUsageLiters):null},espr:{durability:{expectedLifespanYears:M.durability.expectedLifespanYears?parseInt(M.durability.expectedLifespanYears):null,guaranteePeriodMonths:M.durability.guaranteePeriodMonths?parseInt(M.durability.guaranteePeriodMonths):null,technicalLifespanCycles:M.durability.technicalLifespanCycles?parseInt(M.durability.technicalLifespanCycles):null},repairability:{score:M.repairability.score?parseFloat(M.repairability.score):null,repairManualAvailable:M.repairability.repairManualAvailable,repairManualUrl:M.repairability.repairManualUrl||null,sparePartsAvailable:M.repairability.sparePartsAvailable,sparePartsUrl:M.repairability.sparePartsUrl||null,sparePartsAvailabilityYears:M.repairability.sparePartsAvailabilityYears?parseInt(M.repairability.sparePartsAvailabilityYears):null,sparePartsDeliveryDays:M.repairability.sparePartsDeliveryDays?parseInt(M.repairability.sparePartsDeliveryDays):null},recyclability:{isRecyclable:M.recyclability.isRecyclable,recyclablePercentage:M.recyclability.recyclablePercentage?parseFloat(M.recyclability.recyclablePercentage):null,recyclabilityInfoAvailable:M.recyclability.recyclabilityInfoAvailable,recyclabilityInfoUrl:M.recyclability.recyclabilityInfoUrl||null,hasRecycledContent:M.recyclability.hasRecycledContent,recycledContentPercentage:M.recyclability.recycledContentPercentage?parseFloat(M.recyclability.recycledContentPercentage):null,recycledContentInfoAvailable:M.recyclability.recycledContentInfoAvailable,recycledContentInfoUrl:M.recyclability.recycledContentInfoUrl||null},hazardousSubstances:{containsHazardous:M.hazardousSubstances.containsHazardous,substances:M.hazardousSubstances.substances||null,reachCompliant:M.hazardousSubstances.reachCompliant,rohsCompliant:M.hazardousSubstances.rohsCompliant},packaging:{type:M.packaging.type||null,weight:M.packaging.weight?parseFloat(M.packaging.weight):null,recyclablePercentage:M.packaging.recyclablePercentage?parseFloat(M.packaging.recyclablePercentage):null},endOfLife:{disposalInstructions:M.endOfLife.disposalInstructions||null,recyclingInstructions:M.endOfLife.recyclingInstructions||null,takeBackProgram:M.endOfLife.takeBackProgram,takeBackUrl:M.endOfLife.takeBackUrl||null},energyEfficiency:{class:M.energyEfficiency.class||null,annualConsumption:M.energyEfficiency.annualConsumption?parseFloat(M.energyEfficiency.annualConsumption):null,standbyPower:M.energyEfficiency.standbyPower?parseFloat(M.energyEfficiency.standbyPower):null}},facilityLocation:R.facilityLocation||null,facilityGln:R.facilityGln||null,processType:R.processType||null,processDescription:R.processDescription||null,inputMaterials:D.filter(X=>X.name).map(X=>({name:X.name,quantity:X.quantity?parseFloat(X.quantity):null,unit:X.unit||"kg",materialId:X.materialId||null})),wasteMaterial:re.type?{type:re.type,quantity:re.quantity?parseFloat(re.quantity):null,unit:re.unit||"kg"}:null,recyclableMaterial:he.type?{type:he.type,quantity:he.quantity?parseFloat(he.quantity):null,unit:he.unit||"kg"}:null},q={name:y.name,description:y.description,sku:y.sku,gtin:y.gtin,brand:y.brand,model:y.model,category:y.category,manufacturerId:y.manufacturerId||null,productionBatchId:y.productionBatchId||null,weightKg:y.weightKg?parseFloat(y.weightKg):null,expectedLifespanYears:y.expectedLifespanYears?parseInt(y.expectedLifespanYears):null,warrantyYears:y.warrantyYears?parseInt(y.warrantyYears):null,repairabilityScore:y.repairabilityScore?parseFloat(y.repairabilityScore):null,repairInstructions:y.repairInstructions||null,recyclabilityInfo:y.recyclabilityInfo||null,disassemblyInstructions:y.disassemblyInstructions||null,hazardousMaterials:y.hazardousMaterials||null,status:y.status,dimensions:y.dimensions.lengthCm||y.dimensions.widthCm||y.dimensions.heightCm?{lengthCm:y.dimensions.lengthCm?parseFloat(y.dimensions.lengthCm):null,widthCm:y.dimensions.widthCm?parseFloat(y.dimensions.widthCm):null,heightCm:y.dimensions.heightCm?parseFloat(y.dimensions.heightCm):null}:null,metadata:F};r?await Or.update(t,q):await Or.create(q),e("/admin/products")}catch(F){o(((ue=(A=F.response)==null?void 0:A.data)==null?void 0:ue.error)||"Failed to save product")}finally{l(!1)}};return n?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):a.jsxs("div",{className:"max-w-5xl mx-auto",children:[a.jsx("div",{className:"mb-6",children:a.jsxs("button",{onClick:()=>e("/admin/products"),className:"text-gray-600 hover:text-gray-900 flex items-center gap-1",children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Products"]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsx("div",{className:"lg:col-span-2",children:a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h1",{className:"text-xl font-bold text-gray-900",children:r?"Edit Product":"New Product"}),r&&N&&a.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${N.status==="active"?"bg-green-100 text-green-800":N.status==="draft"?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"}`,children:N.status})]}),d&&a.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6",children:d}),a.jsx("div",{className:"border-b mb-6",children:a.jsx("div",{className:"flex gap-4 -mb-px overflow-x-auto",children:te.map(C=>a.jsx("button",{type:"button",onClick:()=>E(C.id),className:`px-4 py-2 border-b-2 font-medium text-sm transition-colors whitespace-nowrap ${b===C.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:C.label},C.id))})}),a.jsxs("form",{onSubmit:Y,className:"space-y-6",children:[b==="basic"&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Product Name *"}),a.jsx("input",{type:"text",name:"name",value:y.name,onChange:ee,className:"input",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"SKU / Product ID *"}),a.jsx("input",{type:"text",name:"sku",value:y.sku,onChange:ee,className:"input",placeholder:"e.g., SKU-12345",required:!0,disabled:r})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Brand"}),a.jsx("input",{type:"text",name:"brand",value:y.brand,onChange:ee,className:"input",placeholder:"Brand name"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Model"}),a.jsx("input",{type:"text",name:"model",value:y.model,onChange:ee,className:"input",placeholder:"Model number/name"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Description"}),a.jsx("textarea",{name:"description",value:y.description,onChange:ee,className:"input",rows:3})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Category"}),a.jsxs("select",{name:"category",value:y.category,onChange:ee,className:"input",children:[a.jsx("option",{value:"",children:"Select category..."}),Vv.filter(C=>C.group).map(C=>a.jsx("optgroup",{label:C.group,children:C.options.map(A=>a.jsx("option",{value:A.value,children:A.label},A.value))},C.group))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"GTIN (Barcode)"}),a.jsx("input",{type:"text",name:"gtin",value:y.gtin,onChange:ee,className:"input",maxLength:14,placeholder:"e.g., 01234567890123"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Manufacturer"}),a.jsxs("select",{name:"manufacturerId",value:y.manufacturerId,onChange:ee,className:"input",children:[a.jsx("option",{value:"",children:"Select manufacturer..."}),p.map(C=>a.jsxs("option",{value:C.id,children:[C.name," (",C.type,")"]},C.id))]})]}),!r&&a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Production Batch *"}),a.jsxs("select",{name:"productionBatchId",value:y.productionBatchId,onChange:ee,className:"input",required:!0,children:[a.jsx("option",{value:"",children:"Select completed batch..."}),c.map(C=>a.jsxs("option",{value:C.id,children:[C.batchNumber," - ",C.productionType||"Production"," (",C.status,")"]},C.id))]}),c.length===0&&a.jsx("p",{className:"text-sm text-yellow-600 mt-1",children:"No completed production batches available."})]})]}),r&&a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Status"}),a.jsxs("select",{name:"status",value:y.status,onChange:ee,className:"input",children:[a.jsx("option",{value:"draft",children:"Draft"}),a.jsx("option",{value:"active",children:"Active"}),a.jsx("option",{value:"discontinued",children:"Discontinued"}),a.jsx("option",{value:"recalled",children:"Recalled"})]})]})]}),b==="physical"&&a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-md font-semibold",children:"Dimensions & Weight"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Weight (kg)"}),a.jsx("input",{type:"number",name:"weightKg",value:y.weightKg,onChange:ee,className:"input",step:"0.001",min:"0"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Length (cm)"}),a.jsx("input",{type:"number",value:y.dimensions.lengthCm,onChange:C=>ne("lengthCm",C.target.value),className:"input",step:"0.1",min:"0"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Width (cm)"}),a.jsx("input",{type:"number",value:y.dimensions.widthCm,onChange:C=>ne("widthCm",C.target.value),className:"input",step:"0.1",min:"0"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Height (cm)"}),a.jsx("input",{type:"number",value:y.dimensions.heightCm,onChange:C=>ne("heightCm",C.target.value),className:"input",step:"0.1",min:"0"})]})]}),a.jsx("h3",{className:"text-md font-semibold pt-4",children:"Durability & Lifecycle"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Expected Lifespan (years)"}),a.jsx("input",{type:"number",name:"expectedLifespanYears",value:y.expectedLifespanYears,onChange:ee,className:"input",min:"1"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Warranty (years)"}),a.jsx("input",{type:"number",name:"warrantyYears",value:y.warrantyYears,onChange:ee,className:"input",min:"0"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Repairability Score (0-10)"}),a.jsx("input",{type:"number",name:"repairabilityScore",value:y.repairabilityScore,onChange:ee,className:"input",min:"0",max:"10",step:"0.1",placeholder:"e.g., 7.5"})]})]})]}),b==="production"&&r&&a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-md font-semibold",children:"Production Details"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Process Type"}),a.jsxs("select",{value:R.processType,onChange:C=>U(A=>({...A,processType:C.target.value})),className:"input",children:[a.jsx("option",{value:"",children:"Select process type..."}),a.jsx("option",{value:"manufacturing",children:"Manufacturing"}),a.jsx("option",{value:"assembly",children:"Assembly"}),a.jsx("option",{value:"processing",children:"Processing"}),a.jsx("option",{value:"packaging",children:"Packaging"}),a.jsx("option",{value:"recycling",children:"Recycling"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Facility Location"}),a.jsx("input",{type:"text",value:R.facilityLocation,onChange:C=>U(A=>({...A,facilityLocation:C.target.value})),className:"input",placeholder:"e.g., Amsterdam, Netherlands"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Process Description"}),a.jsx("textarea",{value:R.processDescription,onChange:C=>U(A=>({...A,processDescription:C.target.value})),className:"input",rows:3,placeholder:"Describe the production process..."})]}),a.jsxs("div",{className:"w-1/2",children:[a.jsx("label",{className:"label",children:"Facility GLN (Global Location Number)"}),a.jsx("input",{type:"text",value:R.facilityGln,onChange:C=>U(A=>({...A,facilityGln:C.target.value.replace(/\D/g,"").slice(0,13)})),className:"input font-mono",placeholder:"13-digit GLN",maxLength:13})]})]}),b==="environmental"&&r&&a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-md font-semibold",children:"Environmental Impact"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Carbon Footprint (kg CO2e per unit)"}),a.jsx("input",{type:"number",value:k.carbonFootprintKg,onChange:C=>I(A=>({...A,carbonFootprintKg:C.target.value})),className:"input",step:"0.01",min:"0",placeholder:"e.g., 12.5"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Energy Usage (kWh)"}),a.jsx("input",{type:"number",value:k.energyUsageKwh,onChange:C=>I(A=>({...A,energyUsageKwh:C.target.value})),className:"input",step:"0.1",min:"0",placeholder:"e.g., 50"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Renewable Energy (%)"}),a.jsx("input",{type:"number",value:k.renewableEnergyPercentage,onChange:C=>I(A=>({...A,renewableEnergyPercentage:C.target.value})),className:"input",min:"0",max:"100",placeholder:"e.g., 75"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Water Usage (liters)"}),a.jsx("input",{type:"number",value:k.waterUsageLiters,onChange:C=>I(A=>({...A,waterUsageLiters:C.target.value})),className:"input",step:"0.1",min:"0",placeholder:"e.g., 100"})]})]})]}),b==="espr"&&r&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("p",{className:"text-sm text-gray-500",children:"ESPR (Ecodesign for Sustainable Products Regulation) data fields for Digital Product Passport compliance."}),a.jsxs("div",{className:"border rounded-lg p-4",children:[a.jsx("h3",{className:"text-md font-semibold mb-3",children:"Durability & Reliability"}),a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Expected Lifespan (years)"}),a.jsx("input",{type:"number",value:M.durability.expectedLifespanYears,onChange:C=>L(A=>({...A,durability:{...A.durability,expectedLifespanYears:C.target.value}})),className:"input",min:"0"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Guarantee Period (months)"}),a.jsx("input",{type:"number",value:M.durability.guaranteePeriodMonths,onChange:C=>L(A=>({...A,durability:{...A.durability,guaranteePeriodMonths:C.target.value}})),className:"input",min:"0"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Technical Lifespan (cycles)"}),a.jsx("input",{type:"number",value:M.durability.technicalLifespanCycles,onChange:C=>L(A=>({...A,durability:{...A.durability,technicalLifespanCycles:C.target.value}})),className:"input",min:"0"})]})]})]}),a.jsxs("div",{className:"border rounded-lg p-4",children:[a.jsx("h3",{className:"text-md font-semibold mb-3",children:"Repairability"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:M.repairability.repairManualAvailable,onChange:C=>L(A=>({...A,repairability:{...A.repairability,repairManualAvailable:C.target.checked}})),className:"rounded"}),"Repair Manual Available"]}),M.repairability.repairManualAvailable&&a.jsxs("div",{className:"ml-6",children:[a.jsx("label",{className:"label",children:"Repair Manual URL"}),a.jsx("input",{type:"url",value:M.repairability.repairManualUrl,onChange:C=>L(A=>({...A,repairability:{...A.repairability,repairManualUrl:C.target.value}})),className:"input",placeholder:"https://..."})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:M.repairability.sparePartsAvailable,onChange:C=>L(A=>({...A,repairability:{...A.repairability,sparePartsAvailable:C.target.checked}})),className:"rounded"}),"Spare Parts Available"]}),M.repairability.sparePartsAvailable&&a.jsxs("div",{className:"ml-6 space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Spare Parts URL"}),a.jsx("input",{type:"url",value:M.repairability.sparePartsUrl,onChange:C=>L(A=>({...A,repairability:{...A.repairability,sparePartsUrl:C.target.value}})),className:"input",placeholder:"https://..."})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Availability Period (years)"}),a.jsx("input",{type:"number",value:M.repairability.sparePartsAvailabilityYears,onChange:C=>L(A=>({...A,repairability:{...A.repairability,sparePartsAvailabilityYears:C.target.value}})),className:"input",min:"0"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Delivery Time (days)"}),a.jsx("input",{type:"number",value:M.repairability.sparePartsDeliveryDays,onChange:C=>L(A=>({...A,repairability:{...A.repairability,sparePartsDeliveryDays:C.target.value}})),className:"input",min:"0"})]})]})]})]}),a.jsx("div",{className:"border-t pt-4",children:a.jsxs("div",{className:"w-1/2",children:[a.jsx("label",{className:"label",children:"Repairability Score (1-10)"}),a.jsx("input",{type:"number",value:M.repairability.score,onChange:C=>L(A=>({...A,repairability:{...A.repairability,score:C.target.value}})),className:"input",min:"1",max:"10"})]})})]})]}),a.jsxs("div",{className:"border rounded-lg p-4",children:[a.jsx("h3",{className:"text-md font-semibold mb-3",children:"Recyclability"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:M.recyclability.isRecyclable,onChange:C=>L(A=>({...A,recyclability:{...A.recyclability,isRecyclable:C.target.checked}})),className:"rounded"}),"Product is Recyclable"]}),M.recyclability.isRecyclable&&a.jsxs("div",{className:"ml-6 space-y-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Recyclable Percentage (%)"}),a.jsx("input",{type:"number",value:M.recyclability.recyclablePercentage,onChange:C=>L(A=>({...A,recyclability:{...A.recyclability,recyclablePercentage:C.target.value}})),className:"input w-32",min:"0",max:"100"})]}),a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:M.recyclability.recyclabilityInfoAvailable,onChange:C=>L(A=>({...A,recyclability:{...A.recyclability,recyclabilityInfoAvailable:C.target.checked}})),className:"rounded"}),"Recyclability Information Available"]}),M.recyclability.recyclabilityInfoAvailable&&a.jsxs("div",{className:"ml-6",children:[a.jsx("label",{className:"label",children:"Recyclability Information URL"}),a.jsx("input",{type:"url",value:M.recyclability.recyclabilityInfoUrl,onChange:C=>L(A=>({...A,recyclability:{...A.recyclability,recyclabilityInfoUrl:C.target.value}})),className:"input",placeholder:"https://..."})]})]})]}),a.jsxs("div",{className:"space-y-2 border-t pt-4",children:[a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:M.recyclability.hasRecycledContent,onChange:C=>L(A=>({...A,recyclability:{...A.recyclability,hasRecycledContent:C.target.checked}})),className:"rounded"}),"Contains Recycled Content"]}),M.recyclability.hasRecycledContent&&a.jsx("div",{className:"ml-6 space-y-2",children:a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Recycled Content Percentage (%)"}),a.jsx("input",{type:"number",value:M.recyclability.recycledContentPercentage,onChange:C=>L(A=>({...A,recyclability:{...A.recyclability,recycledContentPercentage:C.target.value}})),className:"input w-32",min:"0",max:"100"})]})})]})]})]}),a.jsxs("div",{className:"border rounded-lg p-4",children:[a.jsx("h3",{className:"text-md font-semibold mb-3",children:"Hazardous Substances"}),a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:M.hazardousSubstances.containsHazardous,onChange:C=>L(A=>({...A,hazardousSubstances:{...A.hazardousSubstances,containsHazardous:C.target.checked}})),className:"rounded"}),"Contains Hazardous Substances"]}),a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:M.hazardousSubstances.reachCompliant,onChange:C=>L(A=>({...A,hazardousSubstances:{...A.hazardousSubstances,reachCompliant:C.target.checked}})),className:"rounded"}),"REACH Compliant"]}),a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:M.hazardousSubstances.rohsCompliant,onChange:C=>L(A=>({...A,hazardousSubstances:{...A.hazardousSubstances,rohsCompliant:C.target.checked}})),className:"rounded"}),"RoHS Compliant"]})]})]}),a.jsxs("div",{className:"border rounded-lg p-4",children:[a.jsx("h3",{className:"text-md font-semibold mb-3",children:"Packaging"}),a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Packaging Type"}),a.jsx("input",{type:"text",value:M.packaging.type,onChange:C=>L(A=>({...A,packaging:{...A.packaging,type:C.target.value}})),className:"input",placeholder:"e.g., cardboard box"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Packaging Weight (g)"}),a.jsx("input",{type:"number",value:M.packaging.weight,onChange:C=>L(A=>({...A,packaging:{...A.packaging,weight:C.target.value}})),className:"input",min:"0"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Recyclable (%)"}),a.jsx("input",{type:"number",value:M.packaging.recyclablePercentage,onChange:C=>L(A=>({...A,packaging:{...A.packaging,recyclablePercentage:C.target.value}})),className:"input",min:"0",max:"100"})]})]})]}),a.jsxs("div",{className:"border rounded-lg p-4",children:[a.jsx("h3",{className:"text-md font-semibold mb-3",children:"End of Life"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Disposal Instructions"}),a.jsx("textarea",{value:M.endOfLife.disposalInstructions,onChange:C=>L(A=>({...A,endOfLife:{...A.endOfLife,disposalInstructions:C.target.value}})),className:"input",rows:2})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Recycling Instructions"}),a.jsx("textarea",{value:M.endOfLife.recyclingInstructions,onChange:C=>L(A=>({...A,endOfLife:{...A.endOfLife,recyclingInstructions:C.target.value}})),className:"input",rows:2})]}),a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:M.endOfLife.takeBackProgram,onChange:C=>L(A=>({...A,endOfLife:{...A.endOfLife,takeBackProgram:C.target.checked}})),className:"rounded"}),"Take-Back Program Available"]}),M.endOfLife.takeBackProgram&&a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Take-Back Program URL"}),a.jsx("input",{type:"url",value:M.endOfLife.takeBackUrl,onChange:C=>L(A=>({...A,endOfLife:{...A.endOfLife,takeBackUrl:C.target.value}})),className:"input",placeholder:"https://..."})]})]})]}),a.jsxs("div",{className:"border rounded-lg p-4",children:[a.jsx("h3",{className:"text-md font-semibold mb-3",children:"Energy Efficiency (if applicable)"}),a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Energy Class"}),a.jsxs("select",{value:M.energyEfficiency.class,onChange:C=>L(A=>({...A,energyEfficiency:{...A.energyEfficiency,class:C.target.value}})),className:"input",children:[a.jsx("option",{value:"",children:"N/A"}),Wv.map(C=>a.jsx("option",{value:C,children:C},C))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Annual Consumption (kWh)"}),a.jsx("input",{type:"number",value:M.energyEfficiency.annualConsumption,onChange:C=>L(A=>({...A,energyEfficiency:{...A.energyEfficiency,annualConsumption:C.target.value}})),className:"input",min:"0"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Standby Power (W)"}),a.jsx("input",{type:"number",value:M.energyEfficiency.standbyPower,onChange:C=>L(A=>({...A,energyEfficiency:{...A.energyEfficiency,standbyPower:C.target.value}})),className:"input",min:"0"})]})]})]})]}),b==="materials"&&r&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h3",{className:"text-md font-semibold",children:"Input Materials"}),a.jsx("button",{type:"button",onClick:me,className:"text-sm text-primary-600 hover:text-primary-700",children:"+ Add Material"})]}),D.length===0?a.jsx("p",{className:"text-sm text-gray-400 italic",children:"No input materials added"}):a.jsx("div",{className:"space-y-2",children:D.map((C,A)=>a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[a.jsx("div",{className:"flex-1",children:a.jsx("input",{type:"text",value:C.name,onChange:ue=>_(A,"name",ue.target.value),className:"input",placeholder:"Material name"})}),a.jsx("div",{className:"w-24",children:a.jsx("input",{type:"number",value:C.quantity,onChange:ue=>_(A,"quantity",ue.target.value),className:"input",placeholder:"Qty",step:"any"})}),a.jsx("div",{className:"w-20",children:a.jsxs("select",{value:C.unit,onChange:ue=>_(A,"unit",ue.target.value),className:"input",children:[a.jsx("option",{value:"kg",children:"kg"}),a.jsx("option",{value:"g",children:"g"}),a.jsx("option",{value:"m",children:"m"}),a.jsx("option",{value:"m2",children:"m"}),a.jsx("option",{value:"m3",children:"m"}),a.jsx("option",{value:"pcs",children:"pcs"})]})}),a.jsx("button",{type:"button",onClick:()=>G(A),className:"text-red-500 hover:text-red-700",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},A))})]}),a.jsxs("div",{className:"border-t pt-4",children:[a.jsx("h3",{className:"text-md font-semibold mb-3",children:"Waste Material"}),a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Type"}),a.jsx("input",{type:"text",value:re.type,onChange:C=>ie(A=>({...A,type:C.target.value})),className:"input",placeholder:"e.g., sawdust, scrap"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Quantity"}),a.jsx("input",{type:"number",value:re.quantity,onChange:C=>ie(A=>({...A,quantity:C.target.value})),className:"input",step:"any"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Unit"}),a.jsxs("select",{value:re.unit,onChange:C=>ie(A=>({...A,unit:C.target.value})),className:"input",children:[a.jsx("option",{value:"kg",children:"kg"}),a.jsx("option",{value:"g",children:"g"}),a.jsx("option",{value:"m3",children:"m"})]})]})]})]}),a.jsxs("div",{className:"border-t pt-4",children:[a.jsx("h3",{className:"text-md font-semibold mb-3",children:"Recyclable Material from Production"}),a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Type"}),a.jsx("input",{type:"text",value:he.type,onChange:C=>W(A=>({...A,type:C.target.value})),className:"input",placeholder:"e.g., metal, plastic"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Quantity"}),a.jsx("input",{type:"number",value:he.quantity,onChange:C=>W(A=>({...A,quantity:C.target.value})),className:"input",step:"any"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Unit"}),a.jsxs("select",{value:he.unit,onChange:C=>W(A=>({...A,unit:C.target.value})),className:"input",children:[a.jsx("option",{value:"kg",children:"kg"}),a.jsx("option",{value:"g",children:"g"}),a.jsx("option",{value:"m3",children:"m"})]})]})]})]})]}),a.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[a.jsx("button",{type:"submit",disabled:i||!r&&c.length===0,className:"btn-primary",children:i?"Saving...":r?"Update Product":"Create Product"}),a.jsx("button",{type:"button",onClick:()=>e("/admin/products"),className:"btn-secondary",children:"Cancel"})]})]})]})}),r&&N&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"card",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"DPP QR Code"}),a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"bg-white p-4 rounded-lg border",children:a.jsx(_c,{value:`${window.location.origin}/dpp/${N.dppId}`,size:180,level:"M"})}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 font-mono",children:N.dppId}),a.jsx(Se,{to:`/dpp/${N.dppId}`,target:"_blank",className:"btn-primary mt-4 w-full text-center",children:"View Public DPP"})]})]}),a.jsxs("div",{className:"card",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"UNTP Verifiable Credential"}),h?a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),a.jsx("span",{className:"font-medium text-green-800",children:"DPP VC Issued"})]}),a.jsx("p",{className:"text-xs text-green-600 mt-1 font-mono truncate",children:h.credentialId})]}),a.jsxs("div",{className:"text-sm space-y-1",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-500",children:"Status"}),a.jsx("span",{className:`badge ${h.status==="active"?"badge-green":"badge-red"}`,children:h.status})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-500",children:"Issued"}),a.jsx("span",{className:"text-gray-700",children:new Date(h.issuedAt).toLocaleDateString()})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-500",children:"Type"}),a.jsx("span",{className:"badge badge-purple",children:"DPP"})]})]})]}):a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("svg",{className:"w-5 h-5 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),a.jsx("span",{className:"font-medium text-yellow-800",children:"No VC Issued"})]}),a.jsx("p",{className:"text-sm text-yellow-600 mt-1",children:"Issue a W3C Verifiable Credential for this product."})]}),a.jsx("button",{onClick:oe,disabled:x||N.status!=="active",className:"btn-primary w-full disabled:opacity-50",children:x?"Issuing...":"Issue DPP Credential"}),N.status!=="active"&&a.jsx("p",{className:"text-xs text-gray-500 text-center",children:"Product must be active to issue credentials"})]})]}),a.jsx("div",{className:"card",children:a.jsx($c,{entityType:"product",entityId:N.id,onUpdate:ve})}),(N.productionBatch||N.manufacturing)&&a.jsxs("div",{className:"card",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Supply Chain"}),a.jsxs("div",{className:"space-y-3 text-sm",children:[N.productionBatch&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Production Batch:"}),a.jsx("p",{className:"font-medium",children:N.productionBatch.batchNumber}),a.jsx("p",{className:"text-gray-600",children:N.productionBatch.processType||"Production"})]}),N.manufacturing&&!N.productionBatch&&a.jsxs(a.Fragment,{children:[((S=N.manufacturing.shipment)==null?void 0:S.harvest)&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Harvest:"}),a.jsx("p",{className:"font-medium",children:N.manufacturing.shipment.harvest.permitNumber}),a.jsx("p",{className:"text-gray-600",children:N.manufacturing.shipment.harvest.treeSpeciesClaimed})]}),N.manufacturing.shipment&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Shipment:"}),a.jsx("p",{className:"font-medium",children:N.manufacturing.shipment.containerNumber}),a.jsxs("p",{className:"text-gray-600",children:[N.manufacturing.shipment.originPort,"  ",N.manufacturing.shipment.destinationPort]})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Manufacturing:"}),a.jsx("p",{className:"font-medium",children:N.manufacturing.facilityName}),a.jsx("p",{className:"text-gray-600",children:N.manufacturing.facilityLocation})]})]})]})]})]})]})]})}function Hv(){const[e]=ih(),t=e.get("batchId"),[r,n]=v.useState([]),[s,i]=v.useState(!0),[l,d]=v.useState({page:1,total:0,pages:0}),[o,c]=v.useState({status:""}),[u,p]=v.useState({open:!1,data:null,loading:!1}),[m,N]=v.useState(!1),[f,h]=v.useState(null),[j,x]=v.useState({});v.useEffect(()=>{g()},[l.page,o.status,t]);const g=async()=>{i(!0);try{const k=await Or.list({page:l.page,limit:20,...o.status&&{status:o.status},...t&&{productionBatchId:t}});n(k.data.products||[]),d(I=>{var R,U;return{...I,total:((R=k.data.pagination)==null?void 0:R.total)||0,pages:((U=k.data.pagination)==null?void 0:U.pages)||0}})}catch(k){console.error("Failed to fetch products:",k)}finally{i(!1)}},b=async k=>{p({open:!0,data:null,loading:!0});try{const I=await Yi.getJsonLd(k);p({open:!0,data:I.data,loading:!1})}catch(I){console.error("Failed to fetch JSON-LD:",I),p({open:!0,data:{error:"Failed to load JSON-LD"},loading:!1})}},E=async k=>{h(k);try{const I=await kt.getByEntity("product",k.id);x(R=>({...R,[k.id]:I.data.evidence||I.data||[]}))}catch(I){console.error("Failed to fetch evidence:",I),x(R=>({...R,[k.id]:[]}))}N(!0)},y=()=>{f&&kt.getByEntity("product",f.id).then(k=>{x(I=>({...I,[f.id]:k.data.evidence||k.data||[]}))}).catch(console.error)},w={draft:"badge-yellow",active:"badge-green",discontinued:"badge-gray",recalled:"bg-red-100 text-red-800"};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Products"}),a.jsx("p",{className:"text-gray-600",children:"Manage products with Digital Product Passports"}),t&&a.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[a.jsx("span",{className:"badge badge-blue",children:"Filtered by batch"}),a.jsx(Se,{to:"/admin/products",className:"text-sm text-primary-600 hover:underline",children:"Show all products"})]})]}),a.jsx(Se,{to:"/admin/products/new",className:"btn-primary",children:"New Product"})]}),a.jsx("div",{className:"card",children:a.jsx("div",{className:"flex gap-4",children:a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Status"}),a.jsxs("select",{value:o.status,onChange:k=>c({status:k.target.value}),className:"input",children:[a.jsx("option",{value:"",children:"All"}),a.jsx("option",{value:"draft",children:"Draft"}),a.jsx("option",{value:"active",children:"Active"}),a.jsx("option",{value:"discontinued",children:"Discontinued"}),a.jsx("option",{value:"recalled",children:"Recalled"})]})]})})}),a.jsx("div",{className:"card overflow-hidden",children:s?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):r.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("p",{className:"text-gray-500",children:"No products found"}),a.jsx(Se,{to:"/admin/products/new",className:"btn-primary mt-4 inline-block",children:"Create First Product"})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"text-left text-sm text-gray-500 border-b bg-gray-50",children:[a.jsx("th",{className:"px-4 py-3 font-medium",children:"Product"}),a.jsx("th",{className:"px-4 py-3 font-medium",children:"SKU / Serial"}),a.jsx("th",{className:"px-4 py-3 font-medium",children:"DPP ID"}),a.jsx("th",{className:"px-4 py-3 font-medium",children:"DID"}),a.jsx("th",{className:"px-4 py-3 font-medium",children:"Status"}),a.jsx("th",{className:"px-4 py-3 font-medium",children:"Actions"})]})}),a.jsx("tbody",{children:r.map(k=>{var I,R;return a.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[a.jsxs("td",{className:"px-4 py-3",children:[a.jsx(Se,{to:`/admin/products/${k.id}`,className:"text-primary-600 hover:text-primary-700 font-medium",children:k.name}),k.description&&a.jsx("p",{className:"text-sm text-gray-500 truncate max-w-xs",children:k.description})]}),a.jsxs("td",{className:"px-4 py-3",children:[a.jsx("div",{className:"font-mono text-sm text-gray-600",children:k.sku}),k.serialNumber&&a.jsx("div",{className:"font-mono text-xs text-gray-400",children:k.serialNumber})]}),a.jsx("td",{className:"px-4 py-3",children:a.jsxs(Se,{to:`/dpp/${k.dppId}`,target:"_blank",className:"text-primary-600 hover:text-primary-700 font-mono text-sm flex items-center gap-1",children:[k.dppId,a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})}),a.jsx("td",{className:"px-4 py-3",children:(I=k.metadata)!=null&&I.did?a.jsx("span",{className:"font-mono text-xs text-gray-500 truncate block max-w-[180px]",title:k.metadata.did,children:k.metadata.did}):a.jsx("span",{className:"text-gray-400",children:"-"})}),a.jsx("td",{className:"px-4 py-3",children:a.jsx("span",{className:`badge ${w[k.status]||"badge-gray"}`,children:k.status})}),a.jsx("td",{className:"px-4 py-3",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Zi,{onClick:()=>E(k),hasEvidence:(((R=j[k.id])==null?void 0:R.length)||0)>0}),a.jsx(Se,{to:`/dpp/${k.dppId}`,target:"_blank",className:"text-green-600 hover:text-green-700",title:"View Public DPP",children:a.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),a.jsx("button",{onClick:()=>b(k.dppId),className:"text-blue-600 hover:text-blue-700",title:"View JSON-LD",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"})})}),a.jsx(Se,{to:`/admin/products/${k.id}`,className:"text-gray-600 hover:text-gray-900",title:"Edit",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]})})]},k.id)})})]})}),l.pages>1&&a.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-t",children:[a.jsxs("span",{className:"text-sm text-gray-500",children:["Showing ",r.length," of ",l.total," products"]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>d(k=>({...k,page:k.page-1})),disabled:l.page===1,className:"btn-secondary text-sm",children:"Previous"}),a.jsx("button",{onClick:()=>d(k=>({...k,page:k.page+1})),disabled:l.page===l.pages,className:"btn-secondary text-sm",children:"Next"})]})]})]})}),u.open&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] flex flex-col",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[a.jsx("h2",{className:"text-lg font-semibold",children:"Digital Product Passport - JSON-LD"}),a.jsx("button",{onClick:()=>p({open:!1,data:null,loading:!1}),className:"text-gray-500 hover:text-gray-700",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsx("div",{className:"p-4 overflow-auto flex-1",children:u.loading?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):a.jsx("pre",{className:"bg-gray-900 text-green-400 p-4 rounded-lg text-sm overflow-auto font-mono",children:JSON.stringify(u.data,null,2)})}),a.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t",children:[a.jsx("button",{onClick:()=>{navigator.clipboard.writeText(JSON.stringify(u.data,null,2)),alert("Copied to clipboard!")},className:"btn-secondary",disabled:u.loading,children:"Copy JSON"}),a.jsx("button",{onClick:()=>p({open:!1,data:null,loading:!1}),className:"btn-primary",children:"Close"})]})]})}),a.jsx(Ji,{isOpen:m,onClose:()=>{N(!1),h(null)},entityType:"product",entityId:f==null?void 0:f.id,entityName:`Product: ${(f==null?void 0:f.name)||"Product"}`,existingEvidence:j[f==null?void 0:f.id]||[],onSuccess:y})]})}function Kv(){const{user:e}=Ha(),[t,r]=v.useState([]),[n,s]=v.useState(!0),[i,l]=v.useState({page:1,total:0,pages:0}),[d,o]=v.useState(null),[c,u]=v.useState(null);v.useEffect(()=>{p()},[i.page]);const p=async()=>{s(!0);try{const h=await Ps.list({page:i.page,limit:20});r(h.data.users||[]),l(j=>{var x,g;return{...j,total:((x=h.data.pagination)==null?void 0:x.total)||0,pages:((g=h.data.pagination)==null?void 0:g.pages)||0}})}catch(h){console.error("Failed to fetch users:",h),u("Failed to load users")}finally{s(!1)}},m=async(h,j)=>{var x,g;o(h),u(null);try{await Ps.updateRole(h,j),p()}catch(b){u(((g=(x=b.response)==null?void 0:x.data)==null?void 0:g.error)||"Failed to update role")}finally{o(null)}},N=async(h,j)=>{var x,g;o(h),u(null);try{j?await Ps.deactivate(h):await Ps.activate(h),p()}catch(b){u(((g=(x=b.response)==null?void 0:x.data)==null?void 0:g.error)||"Failed to update user status")}finally{o(null)}},f={admin:"bg-red-100 text-red-800",operator:"badge-blue",auditor:"badge-yellow",viewer:"badge-gray"};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"User Management"}),a.jsx("p",{className:"text-gray-600",children:"Manage user accounts and roles"})]}),c&&a.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:c}),a.jsx("div",{className:"card overflow-hidden",children:n?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):t.length===0?a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-gray-500",children:"No users found"})}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"text-left text-sm text-gray-500 border-b bg-gray-50",children:[a.jsx("th",{className:"px-4 py-3 font-medium",children:"User"}),a.jsx("th",{className:"px-4 py-3 font-medium",children:"Wallet DID"}),a.jsx("th",{className:"px-4 py-3 font-medium",children:"Role"}),a.jsx("th",{className:"px-4 py-3 font-medium",children:"Status"}),a.jsx("th",{className:"px-4 py-3 font-medium",children:"Last Login"}),a.jsx("th",{className:"px-4 py-3 font-medium",children:"Actions"})]})}),a.jsx("tbody",{children:t.map(h=>{var j;return a.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[a.jsx("td",{className:"px-4 py-3",children:a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900",children:h.displayName||"Unknown"}),a.jsx("p",{className:"text-sm text-gray-500",children:h.email||"-"})]})}),a.jsxs("td",{className:"px-4 py-3 text-gray-600 text-sm font-mono",children:[(j=h.walletDid)==null?void 0:j.slice(0,20),"..."]}),a.jsx("td",{className:"px-4 py-3",children:a.jsxs("select",{value:h.role,onChange:x=>m(h.id,x.target.value),disabled:d===h.id||h.id===(e==null?void 0:e.id),className:`text-sm px-2 py-1 rounded border ${f[h.role]||""}`,children:[a.jsx("option",{value:"admin",children:"Admin"}),a.jsx("option",{value:"operator",children:"Operator"}),a.jsx("option",{value:"auditor",children:"Auditor"}),a.jsx("option",{value:"viewer",children:"Viewer"})]})}),a.jsx("td",{className:"px-4 py-3",children:a.jsx("span",{className:`badge ${h.isActive?"badge-green":"badge-gray"}`,children:h.isActive?"Active":"Inactive"})}),a.jsx("td",{className:"px-4 py-3 text-gray-500 text-sm",children:h.lastLogin?new Date(h.lastLogin).toLocaleString():"Never"}),a.jsx("td",{className:"px-4 py-3",children:h.id!==(e==null?void 0:e.id)&&a.jsx("button",{onClick:()=>N(h.id,h.isActive),disabled:d===h.id,className:`text-sm ${h.isActive?"text-red-600 hover:text-red-700":"text-green-600 hover:text-green-700"}`,children:d===h.id?"...":h.isActive?"Deactivate":"Activate"})})]},h.id)})})]})}),i.pages>1&&a.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-t",children:[a.jsxs("span",{className:"text-sm text-gray-500",children:["Showing ",t.length," of ",i.total," users"]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>l(h=>({...h,page:h.page-1})),disabled:i.page===1,className:"btn-secondary text-sm",children:"Previous"}),a.jsx("button",{onClick:()=>l(h=>({...h,page:h.page+1})),disabled:i.page===i.pages,className:"btn-secondary text-sm",children:"Next"})]})]})]})}),a.jsxs("div",{className:"card",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Role Permissions"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"p-4 bg-red-50 rounded-lg",children:[a.jsx("h3",{className:"font-medium text-red-800",children:"Admin"}),a.jsx("p",{className:"text-sm text-red-700 mt-1",children:"Full access to all features including user management and audit logs"})]}),a.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[a.jsx("h3",{className:"font-medium text-blue-800",children:"Operator"}),a.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Create and edit harvests, shipments, manufacturing, and products"})]}),a.jsxs("div",{className:"p-4 bg-yellow-50 rounded-lg",children:[a.jsx("h3",{className:"font-medium text-yellow-800",children:"Auditor"}),a.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"Read-only access to all records and audit logs"})]}),a.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[a.jsx("h3",{className:"font-medium text-gray-800",children:"Viewer"}),a.jsx("p",{className:"text-sm text-gray-700 mt-1",children:"View products and DPPs only"})]})]})]})]})}function Gv(){var N;const[e,t]=v.useState([]),[r,n]=v.useState(!0),[s,i]=v.useState({page:1,total:0,pages:0}),[l,d]=v.useState({entityType:"",action:""}),[o,c]=v.useState(null);v.useEffect(()=>{u()},[s.page,l]);const u=async()=>{n(!0);try{const f=await ev.list({page:s.page,limit:50,...l.entityType&&{entityType:l.entityType},...l.action&&{action:l.action}});t(f.data.logs||[]),i(h=>{var j,x;return{...h,total:((j=f.data.pagination)==null?void 0:j.total)||0,pages:((x=f.data.pagination)==null?void 0:x.pages)||0}})}catch(f){console.error("Failed to fetch audit logs:",f)}finally{n(!1)}},p={create:"badge-green",read:"badge-gray",update:"badge-blue",delete:"bg-red-100 text-red-800",login:"bg-purple-100 text-purple-800",logout:"badge-gray"},m=f=>!f||Object.keys(f).length===0?null:a.jsx("pre",{className:"text-xs bg-gray-100 p-2 rounded overflow-auto max-h-40",children:JSON.stringify(f,null,2)});return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Audit Logs"}),a.jsx("p",{className:"text-gray-600",children:"Track all system activities for compliance"})]}),a.jsx("div",{className:"card",children:a.jsxs("div",{className:"flex gap-4 flex-wrap",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Entity Type"}),a.jsxs("select",{value:l.entityType,onChange:f=>d(h=>({...h,entityType:f.target.value})),className:"input",children:[a.jsx("option",{value:"",children:"All"}),a.jsx("option",{value:"tree_harvest",children:"Harvest"}),a.jsx("option",{value:"species_verification",children:"Verification"}),a.jsx("option",{value:"shipment",children:"Shipment"}),a.jsx("option",{value:"manufacturing",children:"Manufacturing"}),a.jsx("option",{value:"product",children:"Product"}),a.jsx("option",{value:"user",children:"User"}),a.jsx("option",{value:"session",children:"Session"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Action"}),a.jsxs("select",{value:l.action,onChange:f=>d(h=>({...h,action:f.target.value})),className:"input",children:[a.jsx("option",{value:"",children:"All"}),a.jsx("option",{value:"create",children:"Create"}),a.jsx("option",{value:"read",children:"Read"}),a.jsx("option",{value:"update",children:"Update"}),a.jsx("option",{value:"delete",children:"Delete"}),a.jsx("option",{value:"login",children:"Login"}),a.jsx("option",{value:"logout",children:"Logout"})]})]})]})}),a.jsx("div",{className:"card overflow-hidden",children:r?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e.length===0?a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-gray-500",children:"No audit logs found"})}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"text-left text-sm text-gray-500 border-b bg-gray-50",children:[a.jsx("th",{className:"px-4 py-3 font-medium",children:"Timestamp"}),a.jsx("th",{className:"px-4 py-3 font-medium",children:"User"}),a.jsx("th",{className:"px-4 py-3 font-medium",children:"Action"}),a.jsx("th",{className:"px-4 py-3 font-medium",children:"Entity"}),a.jsx("th",{className:"px-4 py-3 font-medium",children:"IP Address"}),a.jsx("th",{className:"px-4 py-3 font-medium",children:"Details"})]})}),a.jsx("tbody",{children:e.map(f=>{var h,j,x;return a.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[a.jsx("td",{className:"px-4 py-3 text-gray-600 text-sm",children:new Date(f.createdAt).toLocaleString()}),a.jsx("td",{className:"px-4 py-3",children:a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:((h=f.user)==null?void 0:h.displayName)||"System"}),a.jsx("p",{className:"text-xs text-gray-500",children:((j=f.user)==null?void 0:j.email)||"-"})]})}),a.jsx("td",{className:"px-4 py-3",children:a.jsx("span",{className:`badge ${p[f.action]||"badge-gray"}`,children:f.action})}),a.jsx("td",{className:"px-4 py-3",children:a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-900",children:(x=f.entityType)==null?void 0:x.replace("_"," ")}),f.entityId&&a.jsxs("p",{className:"text-xs text-gray-500 font-mono",children:[f.entityId.slice(0,8),"..."]})]})}),a.jsx("td",{className:"px-4 py-3 text-gray-500 text-sm font-mono",children:f.ipAddress||"-"}),a.jsx("td",{className:"px-4 py-3",children:f.changes&&Object.keys(f.changes).length>0&&a.jsx("button",{onClick:()=>c(f),className:"text-primary-600 hover:text-primary-700 text-sm",children:"View changes"})})]},f.id)})})]})}),s.pages>1&&a.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-t",children:[a.jsxs("span",{className:"text-sm text-gray-500",children:["Showing ",e.length," of ",s.total," logs"]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>i(f=>({...f,page:f.page-1})),disabled:s.page===1,className:"btn-secondary text-sm",children:"Previous"}),a.jsx("button",{onClick:()=>i(f=>({...f,page:f.page+1})),disabled:s.page===s.pages,className:"btn-secondary text-sm",children:"Next"})]})]})]})}),o&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsx("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[80vh] overflow-auto",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Audit Log Details"}),a.jsx("button",{onClick:()=>c(null),className:"text-gray-500 hover:text-gray-700",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Timestamp:"}),a.jsx("p",{className:"font-medium",children:new Date(o.createdAt).toLocaleString()})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"User:"}),a.jsx("p",{className:"font-medium",children:((N=o.user)==null?void 0:N.displayName)||"System"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Action:"}),a.jsx("p",{className:"font-medium",children:o.action})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Entity:"}),a.jsx("p",{className:"font-medium",children:o.entityType})]})]}),o.entityId&&a.jsxs("div",{children:[a.jsx("span",{className:"text-sm text-gray-500",children:"Entity ID:"}),a.jsx("p",{className:"font-mono text-sm",children:o.entityId})]}),o.changes&&Object.keys(o.changes).length>0&&a.jsxs("div",{children:[a.jsx("span",{className:"text-sm text-gray-500",children:"Changes:"}),m(o.changes)]}),o.previousValues&&Object.keys(o.previousValues).length>0&&a.jsxs("div",{children:[a.jsx("span",{className:"text-sm text-gray-500",children:"Previous Values:"}),m(o.previousValues)]})]})]})})})]})}function _h({credentialType:e,subjectId:t,subjectType:r,subjectName:n,organizationId:s,onSuccess:i,onCancel:l}){const[d,o]=v.useState(!1),[c,u]=v.useState(null),[p,m]=v.useState(null),[N,f]=v.useState(!1),h=async()=>{var g,b;o(!0),u(null);try{const E=await An.createOffer({credentialType:e,subjectId:t,subjectType:r||e,organizationId:s,expiresIn:300});m(E.data),f(!0)}catch(E){u(((b=(g=E.response)==null?void 0:g.data)==null?void 0:b.error)||"Failed to create credential offer")}finally{o(!1)}};v.useEffect(()=>{if(!N||!p)return;const g=setInterval(async()=>{try{const b=await An.getOffer(p.offerId);b.data.status==="claimed"?(f(!1),i==null||i(b.data)):(b.data.status==="expired"||b.data.status==="cancelled")&&(f(!1),u("Credential offer expired or was cancelled"))}catch{}},3e3);return()=>clearInterval(g)},[N,p,i]),v.useEffect(()=>{if(!(p!=null&&p.expiresAt))return;const g=new Date(p.expiresAt),b=setTimeout(()=>{f(!1),u("Credential offer expired")},g-Date.now());return()=>clearTimeout(b)},[p==null?void 0:p.expiresAt]);const j=async()=>{if(p!=null&&p.offerId)try{await An.cancelOffer(p.offerId)}catch{}m(null),f(!1),l==null||l()},x={dpp:"Digital Product Passport",dcc:"Digital Conformity Credential",dte:"Digital Traceability Event"};return a.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md mx-auto",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center mx-auto mb-3",children:a.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Issue to Wallet"}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:x[e]||e}),n&&a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:n})]}),c&&a.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-4 text-sm",children:[c,a.jsx("button",{onClick:()=>u(null),className:"ml-2 text-red-900 font-medium",children:""})]}),p?a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"bg-white border-2 border-gray-200 rounded-lg p-4 flex items-center justify-center",children:p.qrCode?a.jsx("img",{src:p.qrCode,alt:"Scan with wallet",className:"w-48 h-48"}):a.jsx("div",{className:"w-48 h-48 bg-gray-100 flex items-center justify-center",children:a.jsx("span",{className:"text-gray-400 text-sm",children:"QR Code"})})}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Scan this QR code with your wallet app"}),N&&a.jsxs("div",{className:"flex items-center justify-center gap-2 text-blue-600",children:[a.jsx("div",{className:"w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),a.jsx("span",{className:"text-sm",children:"Waiting for wallet..."})]})]}),p.deepLink&&a.jsx("a",{href:p.deepLink,className:"block w-full text-center py-2 px-4 bg-blue-50 text-blue-700 rounded-lg hover:bg-blue-100 text-sm",children:"Open in Wallet App"}),p.expiresAt&&a.jsxs("p",{className:"text-xs text-gray-400 text-center",children:["Expires: ",new Date(p.expiresAt).toLocaleTimeString()]}),a.jsxs("div",{className:"flex gap-3 pt-2",children:[a.jsx("button",{onClick:()=>{m(null),f(!1),h()},className:"flex-1 btn-secondary text-sm",children:"New QR Code"}),a.jsx("button",{onClick:j,className:"flex-1 btn-secondary text-sm",children:"Cancel"})]})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsx("p",{className:"text-sm text-gray-600 text-center",children:"Create a credential offer that can be scanned by a wallet app to receive this credential."}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-sm",children:[a.jsx("div",{className:"font-medium text-blue-900 mb-2",children:"Supported Wallets:"}),a.jsxs("ul",{className:"text-blue-800 space-y-1",children:[a.jsx("li",{children:" EUDI Wallet (European Digital Identity)"}),a.jsx("li",{children:" Demo Wallet (for testing)"}),a.jsx("li",{children:" Any OpenID4VCI-compatible wallet"})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:h,disabled:d,className:"flex-1 btn-primary",children:d?"Creating...":"Create QR Code"}),l&&a.jsx("button",{onClick:l,className:"btn-secondary",children:"Cancel"})]})]}),a.jsx("div",{className:"mt-4 pt-4 border-t text-xs text-gray-400 text-center",children:"Demo Mode: Credentials will be simulated without actual wallet connection"})]})}function qv(){var xe,Le;const[e,t]=v.useState([]),[r,n]=v.useState([]),[s,i]=v.useState([]),[l,d]=v.useState([]),[o,c]=v.useState([]),[u,p]=v.useState([]),[m,N]=v.useState(!0),[f,h]=v.useState("issued"),[j,x]=v.useState({open:!1,type:null}),[g,b]=v.useState(null),[E,y]=v.useState(!1),[w,k]=v.useState({open:!1,credential:null}),[I,R]=v.useState(null),[U,M]=v.useState(!1),[L,D]=v.useState({open:!1,credential:null}),[H,re]=v.useState([]),[ie,he]=v.useState(!1),[W,te]=v.useState({page:1,limit:10,total:0}),[ae,Z]=v.useState({type:"",status:""});v.useEffect(()=>{oe(),ve()},[W.page,ae]),v.useEffect(()=>{f==="wallet"&&ee()},[f]);const oe=async()=>{var V;try{N(!0);const se={page:W.page,limit:W.limit,...ae.type&&{type:ae.type},...ae.status&&{status:ae.status}},fe=await Ze.list(se);t(((V=fe.data)==null?void 0:V.credentials)||[]),te(Ae=>{var at,lt;return{...Ae,total:((lt=(at=fe.data)==null?void 0:at.pagination)==null?void 0:lt.total)||0}})}catch(se){console.error("Failed to fetch credentials:",se)}finally{N(!1)}},ve=async()=>{var V;try{const se=await Xt.list({limit:100});n(((V=se.data)==null?void 0:V.organizations)||[])}catch(se){console.error("Failed to fetch organizations:",se)}},ee=async()=>{var V;try{he(!0);const se=await An.listMyOffers();re(((V=se.data)==null?void 0:V.offers)||[])}catch(se){console.error("Failed to fetch wallet offers:",se)}finally{he(!1)}},ne=async V=>{var se,fe;if(confirm("Cancel this credential offer?"))try{await An.cancelOffer(V),await ee()}catch(Ae){console.error("Failed to cancel offer:",Ae),alert(((fe=(se=Ae.response)==null?void 0:se.data)==null?void 0:fe.message)||"Failed to cancel offer")}},me=async V=>{var se,fe,Ae,at,lt;try{if(V==="dpp"){const K=await Or.list({limit:100,status:"active"});i(((se=K.data)==null?void 0:se.products)||[])}else if(V==="dcc"){const K=await av.list({limit:100});d(((fe=K.data)==null?void 0:fe.certificates)||[])}else if(V==="dte-transformation"){const K=await la.list({limit:100,status:"completed"});c(((Ae=K.data)==null?void 0:Ae.batches)||((at=K.data)==null?void 0:at.productionBatches)||[])}else if(V==="dte-transaction"){const K=await er.list({limit:100,status:"completed"});p(((lt=K.data)==null?void 0:lt.transfers)||[])}}catch(K){console.error("Failed to fetch issuable items:",K)}},_=async V=>{x({open:!0,type:V}),b(null),await me(V)},G=async()=>{var V,se;if(g){y(!0);try{let fe;switch(j.type){case"dpp":fe=await Ze.issueDPP(g);break;case"dcc":fe=await Ze.issueDCC(g);break;case"dte-transformation":fe=await Ze.issueTransformationEvent(g);break;case"dte-transaction":fe=await Ze.issueTransactionEvent(g);break}fe!=null&&fe.data&&(await oe(),x({open:!1,type:null}),b(null))}catch(fe){console.error("Failed to issue credential:",fe),alert(((se=(V=fe.response)==null?void 0:V.data)==null?void 0:se.message)||"Failed to issue credential")}finally{y(!1)}}},Y=async V=>{var se,fe;k({open:!0,credential:V}),R(null),M(!0);try{const Ae=await Ze.verify(V.credential);R(Ae.data)}catch(Ae){R({valid:!1,error:((fe=(se=Ae.response)==null?void 0:se.data)==null?void 0:fe.message)||"Verification failed"})}finally{M(!1)}},S=async V=>{var fe,Ae;if(!confirm("Are you sure you want to revoke this credential? This action cannot be undone."))return;const se=prompt("Please enter a revocation reason:");if(se)try{await Ze.revoke(V,se),await oe()}catch(at){console.error("Failed to revoke credential:",at),alert(((Ae=(fe=at.response)==null?void 0:fe.data)==null?void 0:Ae.message)||"Failed to revoke credential")}},C=V=>{D({open:!0,credential:V})},A=V=>{D({open:!1,credential:null}),alert("Credential successfully issued to wallet!")},ue=async V=>{var se,fe;if(confirm("Generate new signing keys for this organization? This will replace any existing keys."))try{const Ae=await Ze.generateKeys(V);alert("Signing keys generated successfully!"),await ve()}catch(Ae){console.error("Failed to generate keys:",Ae),alert(((fe=(se=Ae.response)==null?void 0:se.data)==null?void 0:fe.message)||"Failed to generate keys")}},F=V=>{switch(V){case"dpp":return"badge-purple";case"dcc":return"badge-blue";case"dte":return"badge-green";default:return"badge-gray"}},q=V=>{switch(V){case"active":return"badge-green";case"revoked":return"badge-red";case"suspended":return"badge-yellow";case"expired":return"badge-gray";default:return"badge-gray"}},X=Math.ceil(W.total/W.limit);return a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Verifiable Credentials"}),a.jsx("p",{className:"text-gray-600",children:"Manage UNTP W3C Verifiable Credentials"})]})}),a.jsx("div",{className:"border-b border-gray-200",children:a.jsxs("nav",{className:"flex gap-4",children:[a.jsx("button",{onClick:()=>h("issued"),className:`pb-3 px-1 border-b-2 font-medium text-sm ${f==="issued"?"border-primary-600 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Issued Credentials"}),a.jsx("button",{onClick:()=>h("issue"),className:`pb-3 px-1 border-b-2 font-medium text-sm ${f==="issue"?"border-primary-600 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Issue New Credential"}),a.jsx("button",{onClick:()=>h("organizations"),className:`pb-3 px-1 border-b-2 font-medium text-sm ${f==="organizations"?"border-primary-600 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Organization Keys"}),a.jsx("button",{onClick:()=>h("wallet"),className:`pb-3 px-1 border-b-2 font-medium text-sm ${f==="wallet"?"border-primary-600 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Wallet Offers"})]})}),f==="issued"&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("select",{value:ae.type,onChange:V=>Z(se=>({...se,type:V.target.value})),className:"input w-40",children:[a.jsx("option",{value:"",children:"All Types"}),a.jsx("option",{value:"dpp",children:"DPP"}),a.jsx("option",{value:"dcc",children:"DCC"}),a.jsx("option",{value:"dte",children:"DTE"})]}),a.jsxs("select",{value:ae.status,onChange:V=>Z(se=>({...se,status:V.target.value})),className:"input w-40",children:[a.jsx("option",{value:"",children:"All Status"}),a.jsx("option",{value:"active",children:"Active"}),a.jsx("option",{value:"revoked",children:"Revoked"}),a.jsx("option",{value:"suspended",children:"Suspended"}),a.jsx("option",{value:"expired",children:"Expired"})]})]}),a.jsxs("div",{className:"card overflow-hidden",children:[m?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):e.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("svg",{className:"w-12 h-12 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),a.jsx("p",{className:"text-gray-500",children:"No credentials issued yet"}),a.jsx("button",{onClick:()=>h("issue"),className:"btn-primary mt-4",children:"Issue First Credential"})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"text-left text-sm text-gray-500 border-b bg-gray-50",children:[a.jsx("th",{className:"px-4 py-3 font-medium",children:"Type"}),a.jsx("th",{className:"px-4 py-3 font-medium",children:"Credential ID"}),a.jsx("th",{className:"px-4 py-3 font-medium",children:"Subject"}),a.jsx("th",{className:"px-4 py-3 font-medium",children:"Issuer"}),a.jsx("th",{className:"px-4 py-3 font-medium",children:"Status"}),a.jsx("th",{className:"px-4 py-3 font-medium",children:"Issued"}),a.jsx("th",{className:"px-4 py-3 font-medium",children:"Actions"})]})}),a.jsx("tbody",{children:e.map(V=>{var se;return a.jsxs("tr",{className:"border-b last:border-0 hover:bg-gray-50",children:[a.jsx("td",{className:"px-4 py-3",children:a.jsx("span",{className:`badge ${F(V.type)}`,children:(se=V.type)==null?void 0:se.toUpperCase()})}),a.jsx("td",{className:"px-4 py-3",children:a.jsx("span",{className:"font-mono text-sm text-gray-600 truncate block max-w-[200px]",children:V.credentialId})}),a.jsx("td",{className:"px-4 py-3",children:a.jsx("span",{className:"text-sm text-gray-600",children:V.subjectType})}),a.jsx("td",{className:"px-4 py-3",children:a.jsx("span",{className:"font-mono text-xs text-gray-500 truncate block max-w-[150px]",children:V.issuerDid})}),a.jsx("td",{className:"px-4 py-3",children:a.jsx("span",{className:`badge ${q(V.status)}`,children:V.status})}),a.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:new Date(V.issuedAt).toLocaleDateString()}),a.jsx("td",{className:"px-4 py-3",children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>Y(V),className:"text-primary-600 hover:text-primary-800 text-sm",children:"Verify"}),V.status==="active"&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>C(V),className:"text-blue-600 hover:text-blue-800 text-sm",children:"Wallet"}),a.jsx("button",{onClick:()=>S(V.id),className:"text-red-600 hover:text-red-800 text-sm",children:"Revoke"})]})]})})]},V.id)})})]})}),X>1&&a.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-t",children:[a.jsxs("p",{className:"text-sm text-gray-500",children:["Showing ",(W.page-1)*W.limit+1," to ",Math.min(W.page*W.limit,W.total)," of ",W.total]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>te(V=>({...V,page:V.page-1})),disabled:W.page===1,className:"btn-secondary text-sm disabled:opacity-50",children:"Previous"}),a.jsx("button",{onClick:()=>te(V=>({...V,page:V.page+1})),disabled:W.page>=X,className:"btn-secondary text-sm disabled:opacity-50",children:"Next"})]})]})]})]}),f==="issue"&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:a.jsx("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:"Digital Product Passport"}),a.jsx("p",{className:"text-xs text-gray-500",children:"DPP Credential"})]})]}),a.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Issue a UNTP Digital Product Passport for a product with complete supply chain traceability."}),a.jsx("button",{onClick:()=>_("dpp"),className:"btn-primary w-full",children:"Issue DPP"})]}),a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:a.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:"Conformity Credential"}),a.jsx("p",{className:"text-xs text-gray-500",children:"DCC Credential"})]})]}),a.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Issue a Digital Conformity Credential for certificates and compliance attestations."}),a.jsx("button",{onClick:()=>_("dcc"),className:"btn-primary w-full",children:"Issue DCC"})]}),a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:a.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:"Transformation Event"}),a.jsx("p",{className:"text-xs text-gray-500",children:"DTE Credential"})]})]}),a.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Issue a traceability event for production batches (inputs transformed to outputs)."}),a.jsx("button",{onClick:()=>_("dte-transformation"),className:"btn-primary w-full",children:"Issue DTE"})]}),a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:a.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:"Transaction Event"}),a.jsx("p",{className:"text-xs text-gray-500",children:"DTE Credential"})]})]}),a.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Issue a traceability event for custody transfers between parties."}),a.jsx("button",{onClick:()=>_("dte-transaction"),className:"btn-primary w-full",children:"Issue DTE"})]})]}),f==="organizations"&&a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"card border-l-4 border-l-yellow-400",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("svg",{className:"w-6 h-6 text-yellow-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-gray-900",children:"Signing Key Management"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Each organization needs Ed25519 signing keys to issue Verifiable Credentials. Keys are used to create cryptographic proofs that can be independently verified."})]})]})}),a.jsxs("div",{className:"card overflow-hidden",children:[a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"text-left text-sm text-gray-500 border-b bg-gray-50",children:[a.jsx("th",{className:"px-4 py-3 font-medium",children:"Organization"}),a.jsx("th",{className:"px-4 py-3 font-medium",children:"DID"}),a.jsx("th",{className:"px-4 py-3 font-medium",children:"Has Signing Keys"}),a.jsx("th",{className:"px-4 py-3 font-medium",children:"Actions"})]})}),a.jsx("tbody",{children:r.map(V=>{var se;return a.jsxs("tr",{className:"border-b last:border-0 hover:bg-gray-50",children:[a.jsx("td",{className:"px-4 py-3",children:a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900",children:V.name}),a.jsx("p",{className:"text-sm text-gray-500",children:V.type})]})}),a.jsx("td",{className:"px-4 py-3",children:V.didDocument?a.jsx("span",{className:"font-mono text-xs text-gray-600 truncate block max-w-[200px]",children:((se=V.didDocument)==null?void 0:se.id)||`did:web:${V.domain||"pending"}`}):a.jsx("span",{className:"text-gray-400 text-sm",children:"Not configured"})}),a.jsx("td",{className:"px-4 py-3",children:V.signingKeyPublic?a.jsx("span",{className:"badge badge-green",children:"Yes"}):a.jsx("span",{className:"badge badge-gray",children:"No"})}),a.jsx("td",{className:"px-4 py-3",children:a.jsx("button",{onClick:()=>ue(V.id),className:`text-sm ${V.signingKeyPublic?"text-yellow-600 hover:text-yellow-800":"text-primary-600 hover:text-primary-800"}`,children:V.signingKeyPublic?"Regenerate Keys":"Generate Keys"})})]},V.id)})})]}),r.length===0&&a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-gray-500",children:"No organizations found"})})]})]}),f==="wallet"&&a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"card border-l-4 border-l-blue-400",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("svg",{className:"w-6 h-6 text-blue-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-gray-900",children:"Wallet Credential Issuance"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Issue credentials directly to digital wallets using OpenID4VCI protocol. Users can scan QR codes with EUDI Wallet or other compatible wallets."})]})]})}),a.jsx("div",{className:"card overflow-hidden",children:ie?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):H.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("svg",{className:"w-12 h-12 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"})}),a.jsx("p",{className:"text-gray-500 mb-2",children:"No wallet credential offers yet"}),a.jsx("p",{className:"text-sm text-gray-400",children:'Issue credentials to wallets from the "Issued Credentials" tab'})]}):a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"text-left text-sm text-gray-500 border-b bg-gray-50",children:[a.jsx("th",{className:"px-4 py-3 font-medium",children:"Type"}),a.jsx("th",{className:"px-4 py-3 font-medium",children:"Subject"}),a.jsx("th",{className:"px-4 py-3 font-medium",children:"Issuer"}),a.jsx("th",{className:"px-4 py-3 font-medium",children:"Status"}),a.jsx("th",{className:"px-4 py-3 font-medium",children:"Expires"}),a.jsx("th",{className:"px-4 py-3 font-medium",children:"Actions"})]})}),a.jsx("tbody",{children:H.map(V=>{var se;return a.jsxs("tr",{className:"border-b last:border-0 hover:bg-gray-50",children:[a.jsx("td",{className:"px-4 py-3",children:a.jsx("span",{className:`badge ${F(V.credentialType)}`,children:(se=V.credentialType)==null?void 0:se.toUpperCase()})}),a.jsx("td",{className:"px-4 py-3",children:a.jsx("span",{className:"text-sm text-gray-600",children:V.subjectType})}),a.jsx("td",{className:"px-4 py-3",children:a.jsx("span",{className:"text-sm text-gray-600",children:V.issuer||"-"})}),a.jsx("td",{className:"px-4 py-3",children:a.jsx("span",{className:`badge ${V.status==="pending"?"badge-yellow":V.status==="claimed"?"badge-green":"badge-gray"}`,children:V.status})}),a.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:V.expiresAt?new Date(V.expiresAt).toLocaleString():"-"}),a.jsx("td",{className:"px-4 py-3",children:V.status==="pending"&&a.jsx("button",{onClick:()=>ne(V.id),className:"text-red-600 hover:text-red-800 text-sm",children:"Cancel"})})]},V.id)})})]})})]}),j.open&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg max-w-lg w-full mx-4 p-6",children:[a.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Issue ",j.type==="dpp"?"Digital Product Passport":j.type==="dcc"?"Digital Conformity Credential":j.type==="dte-transformation"?"Transformation Event":"Transaction Event"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Select ",j.type==="dpp"?"Product":j.type==="dcc"?"Certificate":j.type==="dte-transformation"?"Production Batch":"Custody Transfer"]}),a.jsxs("select",{value:g||"",onChange:V=>b(V.target.value),className:"input w-full",children:[a.jsx("option",{value:"",children:"Select..."}),j.type==="dpp"&&s.map(V=>a.jsxs("option",{value:V.id,children:[V.name," (",V.sku,")"]},V.id)),j.type==="dcc"&&l.map(V=>a.jsxs("option",{value:V.id,children:[V.certificateNumber," - ",V.standard]},V.id)),j.type==="dte-transformation"&&o.map(V=>a.jsx("option",{value:V.id,children:V.batchNumber},V.id)),j.type==="dte-transaction"&&u.map(V=>a.jsx("option",{value:V.id,children:V.transferNumber||V.id},V.id))]})]}),g&&a.jsx("div",{className:"p-3 bg-gray-50 rounded-lg text-sm",children:a.jsx("p",{className:"text-gray-600",children:"This will create a W3C Verifiable Credential with a cryptographic proof that can be independently verified."})})]}),a.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[a.jsx("button",{onClick:()=>x({open:!1,type:null}),className:"btn-secondary",disabled:E,children:"Cancel"}),a.jsx("button",{onClick:G,className:"btn-primary",disabled:!g||E,children:E?"Issuing...":"Issue Credential"})]})]})}),w.open&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg max-w-lg w-full mx-4 p-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Credential Verification"}),U?a.jsxs("div",{className:"flex items-center justify-center py-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"}),a.jsx("span",{className:"ml-3 text-gray-600",children:"Verifying credential..."})]}):I?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:`p-4 rounded-lg ${I.valid?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:[a.jsx("div",{className:"flex items-center gap-2",children:I.valid?a.jsxs(a.Fragment,{children:[a.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),a.jsx("span",{className:"font-medium text-green-800",children:"Credential is Valid"})]}):a.jsxs(a.Fragment,{children:[a.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),a.jsx("span",{className:"font-medium text-red-800",children:"Verification Failed"})]})}),I.error&&a.jsx("p",{className:"text-sm text-red-600 mt-2",children:I.error})]}),I.valid&&a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-500",children:"Issuer"}),a.jsx("span",{className:"font-mono text-gray-700",children:(xe=w.credential)==null?void 0:xe.issuerDid})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-500",children:"Issued"}),a.jsx("span",{className:"text-gray-700",children:new Date((Le=w.credential)==null?void 0:Le.issuedAt).toLocaleString()})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-500",children:"Proof Type"}),a.jsx("span",{className:"text-gray-700",children:"DataIntegrityProof (Ed25519)"})]})]})]}):null,a.jsx("div",{className:"flex justify-end mt-6",children:a.jsx("button",{onClick:()=>k({open:!1,credential:null}),className:"btn-secondary",children:"Close"})})]})}),L.open&&L.credential&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsx("div",{className:"bg-white rounded-lg max-w-md w-full mx-4",children:a.jsx(_h,{credentialType:L.credential.type,subjectId:L.credential.subjectId,subjectType:L.credential.subjectType,subjectName:L.credential.credentialId,organizationId:L.credential.issuerOrganizationId,onSuccess:A,onCancel:()=>D({open:!1,credential:null})})})})]})}function Qv(){var c,u,p;const{user:e,logout:t,hasRole:r}=Ha(),n=va(),[s,i]=v.useState(!1),l=async()=>{await t(),n("/login")},d=[{path:"/admin",label:"Dashboard",icon:"home",exact:!0},{path:"/admin/products",label:"Products",icon:"box"},{path:"/admin/materials",label:"Materials",icon:"cube"},{path:"/admin/production",label:"Production",icon:"factory"},{path:"/admin/transfers",label:"Transfers",icon:"arrows"},{path:"/admin/credentials",label:"Credentials",icon:"shield"},{path:"/admin/organizations",label:"Organizations",icon:"building"},{path:"/admin/categories",label:"Categories",icon:"folder"},{type:"divider",label:"Circular Economy"},{path:"/compare",label:"Compare Products",icon:"compare",external:!0},{type:"divider",label:"Administration"},...r("admin","auditor")?[{path:"/admin/audit",label:"Audit Logs",icon:"clipboard"}]:[],...r("admin")?[{path:"/admin/users",label:"Users",icon:"users"}]:[]],o=m=>{const N={home:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"}),folder:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"}),building:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"}),cube:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"}),arrows:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"}),factory:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"}),box:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"}),shield:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"}),clipboard:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"}),users:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"}),compare:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"}),wrench:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),authority:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M12 7v6m0 0l-3-3m3 3l3-3"}),leaf:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})};return a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:N[m]})};return a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-20 lg:hidden",onClick:()=>i(!1)}),a.jsxs("aside",{className:`fixed top-0 left-0 z-30 h-full w-64 bg-white shadow-lg transform transition-transform duration-200 ease-in-out lg:translate-x-0 ${s?"translate-x-0":"-translate-x-full"}`,children:[a.jsxs("div",{className:"flex items-center justify-between h-16 px-4 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-8 h-8 bg-primary-600 rounded-lg flex items-center justify-center",children:a.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})}),a.jsx("span",{className:"font-semibold text-gray-900",children:"DPP System"})]}),a.jsx("button",{onClick:()=>i(!1),className:"lg:hidden text-gray-500 hover:text-gray-700",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsx("nav",{className:"p-4 space-y-1 overflow-y-auto",style:{maxHeight:"calc(100vh - 160px)"},children:d.map((m,N)=>m.type==="divider"?a.jsx("div",{className:"pt-4 pb-2",children:a.jsx("p",{className:"px-3 text-xs font-semibold text-gray-400 uppercase tracking-wider",children:m.label})},`divider-${N}`):a.jsxs(hg,{to:m.path,end:m.exact,className:({isActive:f})=>`flex items-center gap-3 px-3 py-2 rounded-lg transition-colors ${f?"bg-primary-50 text-primary-700":"text-gray-600 hover:bg-gray-100"}`,onClick:()=>i(!1),children:[o(m.icon),a.jsx("span",{className:"flex-1",children:m.label}),m.external&&a.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]},m.path))}),a.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t border-gray-200 bg-white",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[a.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-sm font-medium text-gray-600",children:((c=e==null?void 0:e.displayName)==null?void 0:c[0])||"U"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:(e==null?void 0:e.displayName)||"User"}),a.jsx("p",{className:"text-xs text-gray-500 truncate",children:((u=e==null?void 0:e.role)==null?void 0:u.name)||"viewer"})]})]}),a.jsx("button",{onClick:l,className:"w-full btn-secondary text-sm",children:"Sign Out"})]})]}),a.jsxs("div",{className:"lg:pl-64",children:[a.jsx("header",{className:"sticky top-0 z-10 bg-white shadow-sm",children:a.jsxs("div",{className:"flex items-center justify-between h-16 px-4",children:[a.jsx("button",{onClick:()=>i(!0),className:"lg:hidden text-gray-500 hover:text-gray-700",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),a.jsx("div",{className:"flex-1 lg:flex-none"}),a.jsx("div",{className:"flex items-center gap-4",children:a.jsx("span",{className:"badge-blue",children:(p=e==null?void 0:e.role)==null?void 0:p.name})})]})}),a.jsx("main",{className:"p-4 lg:p-6",children:a.jsxs(nh,{children:[a.jsx(De,{index:!0,element:a.jsx(jv,{})}),a.jsx(De,{path:"categories",element:a.jsx(Nv,{})}),a.jsx(De,{path:"organizations",element:a.jsx(Iv,{})}),a.jsx(De,{path:"materials",element:a.jsx(zv,{})}),a.jsx(De,{path:"materials/new",element:a.jsx(Tu,{})}),a.jsx(De,{path:"materials/:id",element:a.jsx(Tu,{})}),a.jsx(De,{path:"transfers",element:a.jsx(Bv,{})}),a.jsx(De,{path:"transfers/new",element:a.jsx(Iu,{})}),a.jsx(De,{path:"transfers/:id",element:a.jsx(Iu,{})}),a.jsx(De,{path:"production",element:a.jsx(Uv,{})}),a.jsx(De,{path:"production/new",element:a.jsx(Du,{})}),a.jsx(De,{path:"production/:id",element:a.jsx(Du,{})}),a.jsx(De,{path:"products",element:a.jsx(Hv,{})}),a.jsx(De,{path:"products/new",element:a.jsx(Ru,{})}),a.jsx(De,{path:"products/:id",element:a.jsx(Ru,{})}),a.jsx(De,{path:"credentials",element:a.jsx(qv,{})}),a.jsx(De,{path:"identifiers",element:a.jsx($c,{})}),a.jsx(De,{path:"audit",element:a.jsx(Gv,{})}),a.jsx(De,{path:"users",element:a.jsx(Kv,{})})]})})]})]})}function qa({isVerified:e,evidenceType:t,onClick:r,size:n="sm"}){const s={xs:"w-3 h-3",sm:"w-4 h-4",md:"w-5 h-5"};if(!e)return a.jsx("span",{className:"inline-flex items-center text-gray-300",title:"Not verified",children:a.jsx("svg",{className:s[n],fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("circle",{cx:"12",cy:"12",r:"10",strokeWidth:"2",strokeDasharray:"4 4"})})});const i=t==="credential"?"text-blue-600 hover:text-blue-800":"text-green-600 hover:text-green-800";return a.jsx("span",{className:`inline-flex items-center ${i} ${r?"cursor-pointer":""}`,onClick:r,title:`Verified by ${t} - Click for details`,children:t==="credential"?a.jsx("svg",{className:s[n],fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm-2 16l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z"})}):a.jsx("svg",{className:s[n],fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})})})}function Yv({isOpen:e,onClose:t,mode:r="view",fieldPath:n,fieldLabel:s,fieldValue:i,entityType:l,entityId:d,evidence:o,onEvidenceAdded:c}){const[u,p]=v.useState(r==="add"?"credential":"details"),[m,N]=v.useState(!1),[f,h]=v.useState(null),[j,x]=v.useState(null),[g,b]=v.useState([]),[E,y]=v.useState([]),[w,k]=v.useState({credentialId:"",externalCredentialUrl:"",documentType:"certificate",verificationMethod:"",verificationService:"",verifierOrganizationId:"",verifierName:"",notes:""}),[I,R]=v.useState(null);v.useEffect(()=>{e&&r==="add"&&U()},[e,r]);const U=async()=>{try{const[D,H]=await Promise.all([Ze.list({status:"active",limit:100}),Xt.list({limit:100})]);b(D.data.credentials||[]),y(H.data.organizations||[])}catch(D){console.error("Failed to load form data:",D)}},M=async D=>{var H,re;D.preventDefault(),N(!0),h(null);try{await kt.addCredentialEvidence({entityType:l,entityId:d,fieldPath:n,fieldLabel:s,claimedValue:i==null?void 0:i.toString(),credentialId:w.credentialId||void 0,externalCredentialUrl:w.externalCredentialUrl||void 0,verificationMethod:w.verificationMethod,verificationService:w.verificationService,verifierOrganizationId:w.verifierOrganizationId||void 0,verifierName:w.verifierName,notes:w.notes}),x("Evidence added successfully!"),c==null||c(),setTimeout(()=>t(),1500)}catch(ie){h(((re=(H=ie.response)==null?void 0:H.data)==null?void 0:re.error)||"Failed to add evidence")}finally{N(!1)}},L=async D=>{var H,re;if(D.preventDefault(),!I){h("Please select a file");return}N(!0),h(null);try{await kt.addDocumentEvidence(I,{entityType:l,entityId:d,fieldPath:n,fieldLabel:s,claimedValue:i==null?void 0:i.toString(),documentType:w.documentType,verificationMethod:w.verificationMethod,verificationService:w.verificationService,verifierOrganizationId:w.verifierOrganizationId||void 0,verifierName:w.verifierName,notes:w.notes}),x("Document evidence added successfully!"),c==null||c(),setTimeout(()=>t(),1500)}catch(ie){h(((re=(H=ie.response)==null?void 0:H.data)==null?void 0:re.error)||"Failed to upload document")}finally{N(!1)}};return e?a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:t}),a.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-hidden",children:[a.jsx("div",{className:"px-6 py-4 border-b bg-gray-50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:r==="view"?"Verification Evidence":"Add Verification Evidence"}),a.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Field: ",a.jsx("span",{className:"font-medium",children:s||n})]})]}),a.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})}),a.jsxs("div",{className:"px-6 py-4 overflow-y-auto max-h-[60vh]",children:[f&&a.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded text-red-700 text-sm",children:f}),j&&a.jsx("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded text-green-700 text-sm",children:j}),r==="view"&&o?a.jsx(Jv,{evidence:o}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex border-b mb-4",children:[a.jsx("button",{className:`px-4 py-2 text-sm font-medium ${u==="credential"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,onClick:()=>p("credential"),children:"Link Credential"}),a.jsx("button",{className:`px-4 py-2 text-sm font-medium ${u==="document"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,onClick:()=>p("document"),children:"Upload Document"})]}),a.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded",children:[a.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Current Value"}),a.jsx("div",{className:"font-mono text-sm",children:i??"(empty)"})]}),u==="credential"?a.jsxs("form",{onSubmit:M,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Existing Credential"}),a.jsxs("select",{className:"input w-full",value:w.credentialId,onChange:D=>k({...w,credentialId:D.target.value}),children:[a.jsx("option",{value:"",children:"-- Select credential --"}),g.map(D=>{var H;return a.jsxs("option",{value:D.id,children:[D.type.toUpperCase()," - ",(H=D.credentialId)==null?void 0:H.slice(-20)]},D.id)})]})]}),a.jsx("div",{className:"text-center text-sm text-gray-500",children:"or"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"External Credential URL"}),a.jsx("input",{type:"url",className:"input w-full",placeholder:"https://example.com/credentials/...",value:w.externalCredentialUrl,onChange:D=>k({...w,externalCredentialUrl:D.target.value})})]}),a.jsx(Mu,{formData:w,setFormData:k,organizations:E}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[a.jsx("button",{type:"button",onClick:t,className:"btn-secondary",children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn-primary",disabled:m||!w.credentialId&&!w.externalCredentialUrl,children:m?"Adding...":"Add Credential Evidence"})]})]}):a.jsxs("form",{onSubmit:L,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Document Type"}),a.jsxs("select",{className:"input w-full",value:w.documentType,onChange:D=>k({...w,documentType:D.target.value}),children:[a.jsx("option",{value:"certificate",children:"Certificate"}),a.jsx("option",{value:"audit_report",children:"Audit Report"}),a.jsx("option",{value:"test_result",children:"Test Result"}),a.jsx("option",{value:"declaration",children:"Declaration"}),a.jsx("option",{value:"invoice",children:"Invoice"}),a.jsx("option",{value:"inspection_report",children:"Inspection Report"}),a.jsx("option",{value:"lab_analysis",children:"Lab Analysis"}),a.jsx("option",{value:"other",children:"Other"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Upload Document"}),a.jsx("input",{type:"file",className:"input w-full",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png",onChange:D=>R(D.target.files[0])}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Accepted: PDF, Word, Images (max 10MB)"})]}),a.jsx(Mu,{formData:w,setFormData:k,organizations:E}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[a.jsx("button",{type:"button",onClick:t,className:"btn-secondary",children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn-primary",disabled:m||!I,children:m?"Uploading...":"Upload Document Evidence"})]})]})]})]})]})]})}):null}function Mu({formData:e,setFormData:t,organizations:r}){return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Verification Method"}),a.jsxs("select",{className:"input w-full",value:e.verificationMethod,onChange:n=>t({...e,verificationMethod:n.target.value}),children:[a.jsx("option",{value:"",children:"-- Select --"}),a.jsx("option",{value:"api_check",children:"API Check"}),a.jsx("option",{value:"manual_review",children:"Manual Review"}),a.jsx("option",{value:"automated_test",children:"Automated Test"}),a.jsx("option",{value:"third_party_audit",children:"Third Party Audit"}),a.jsx("option",{value:"self_declaration",children:"Self Declaration"}),a.jsx("option",{value:"lab_analysis",children:"Lab Analysis"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Verification Service"}),a.jsx("input",{type:"text",className:"input w-full",placeholder:"e.g., SGS, Bureau Veritas",value:e.verificationService,onChange:n=>t({...e,verificationService:n.target.value})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Verifying Organization"}),a.jsxs("select",{className:"input w-full",value:e.verifierOrganizationId,onChange:n=>t({...e,verifierOrganizationId:n.target.value}),children:[a.jsx("option",{value:"",children:"-- Select or enter manually below --"}),r.map(n=>a.jsx("option",{value:n.id,children:n.name},n.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Verifier Name (if not in list)"}),a.jsx("input",{type:"text",className:"input w-full",placeholder:"Organization name",value:e.verifierName,onChange:n=>t({...e,verifierName:n.target.value})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),a.jsx("textarea",{className:"input w-full",rows:2,placeholder:"Additional notes about this verification...",value:e.notes,onChange:n=>t({...e,notes:n.target.value})})]})]})}function Jv({evidence:e}){var t,r,n,s,i;return e?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${e.status==="active"?"bg-green-100 text-green-800":e.status==="expired"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:e.status}),a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${e.evidenceType==="credential"?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800"}`,children:e.evidenceType})]}),a.jsxs("dl",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("dt",{className:"text-gray-500",children:"Claimed Value"}),a.jsx("dd",{className:"font-mono",children:e.claimedValue||"-"})]}),a.jsxs("div",{children:[a.jsx("dt",{className:"text-gray-500",children:"Verified At"}),a.jsx("dd",{children:e.verifiedAt?new Date(e.verifiedAt).toLocaleString():"-"})]}),a.jsxs("div",{children:[a.jsx("dt",{className:"text-gray-500",children:"Verification Method"}),a.jsx("dd",{className:"capitalize",children:((t=e.verificationMethod)==null?void 0:t.replace(/_/g," "))||"-"})]}),a.jsxs("div",{children:[a.jsx("dt",{className:"text-gray-500",children:"Verification Service"}),a.jsx("dd",{children:e.verificationService||"-"})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsx("dt",{className:"text-gray-500",children:"Verifier"}),a.jsxs("dd",{children:[((r=e.verifier)==null?void 0:r.name)||e.verifierName||"-",((n=e.verifier)==null?void 0:n.id)&&a.jsx("span",{className:"text-xs text-gray-400 ml-2",children:e.verifier.id})]})]})]}),e.evidenceType==="credential"&&a.jsxs("div",{className:"mt-4 p-3 bg-blue-50 rounded",children:[a.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"Credential Evidence"}),((s=e.evidence)==null?void 0:s.id)&&a.jsx("p",{className:"text-xs text-blue-700 break-all",children:e.evidence.id})]}),e.evidenceType==="document"&&e.evidence&&a.jsxs("div",{className:"mt-4 p-3 bg-purple-50 rounded",children:[a.jsx("h4",{className:"text-sm font-medium text-purple-900 mb-2",children:"Document Evidence"}),a.jsxs("dl",{className:"text-xs space-y-1",children:[a.jsxs("div",{children:[a.jsx("dt",{className:"text-purple-600",children:"Document Type"}),a.jsx("dd",{className:"capitalize",children:(i=e.evidence.documentType)==null?void 0:i.replace(/_/g," ")})]}),a.jsxs("div",{children:[a.jsx("dt",{className:"text-purple-600",children:"File Name"}),a.jsx("dd",{children:e.evidence.documentName})]}),e.evidence.documentHash&&a.jsxs("div",{children:[a.jsx("dt",{className:"text-purple-600",children:"Hash (SHA-256)"}),a.jsx("dd",{className:"font-mono truncate",children:e.evidence.documentHash})]})]}),e.evidence.url&&a.jsxs("a",{href:e.evidence.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 mt-2 text-sm text-purple-700 hover:text-purple-900",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Download Document"]})]}),e.notes&&a.jsxs("div",{className:"mt-4",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-1",children:"Notes"}),a.jsx("p",{className:"text-sm text-gray-600",children:e.notes})]}),e.expiresAt&&new Date(e.expiresAt)<new Date&&a.jsxs("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded text-yellow-800 text-sm",children:["This evidence expired on ",new Date(e.expiresAt).toLocaleDateString()]})]}):null}function Zv({score:e}){if(!e)return null;const r=(d=>d>=70?{bg:"bg-green-500",text:"text-green-600",light:"bg-green-100",border:"border-green-200"}:d>=40?{bg:"bg-yellow-500",text:"text-yellow-600",light:"bg-yellow-100",border:"border-yellow-200"}:{bg:"bg-red-500",text:"text-red-600",light:"bg-red-100",border:"border-red-200"})(e.percentage),n=45,s=2*Math.PI*n,i=e.percentage/100*s,l=s-i;return a.jsx("div",{className:`card mb-6 ${r.light} ${r.border} border`,children:a.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-6",children:[a.jsxs("div",{className:"relative flex-shrink-0",children:[a.jsxs("svg",{className:"w-32 h-32 transform -rotate-90",viewBox:"0 0 100 100",children:[a.jsx("circle",{cx:"50",cy:"50",r:n,fill:"none",stroke:"currentColor",strokeWidth:"8",className:"text-gray-200"}),a.jsx("circle",{cx:"50",cy:"50",r:n,fill:"none",stroke:"currentColor",strokeWidth:"8",strokeLinecap:"round",className:r.text,strokeDasharray:`${i} ${l}`})]}),a.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[a.jsxs("span",{className:`text-3xl font-bold ${r.text}`,children:[e.percentage,"%"]}),a.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"DPP Score"})]})]}),a.jsxs("div",{className:"flex-1 text-center md:text-left",children:[a.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-2 mb-2",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Digital Product Passport Score"}),a.jsx("span",{className:`inline-flex items-center justify-center w-8 h-8 rounded-full ${r.bg} text-white font-bold text-sm`,children:e.grade})]}),a.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"This score reflects the completeness and verification status of this product's data."}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("svg",{className:"w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),a.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Data Completeness"})]}),a.jsxs("div",{className:"flex items-baseline gap-1",children:[a.jsxs("span",{className:"text-xl font-bold text-gray-900",children:[e.breakdown.dataCompleteness.percentage,"%"]}),a.jsxs("span",{className:"text-xs text-gray-500",children:["(",e.breakdown.dataCompleteness.filled,"/",e.breakdown.dataCompleteness.total," fields)"]})]}),a.jsx("div",{className:"mt-2 h-2 bg-gray-200 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-blue-500 rounded-full transition-all duration-500",style:{width:`${e.breakdown.dataCompleteness.percentage}%`}})})]}),a.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("svg",{className:"w-4 h-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),a.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Verification Coverage"})]}),a.jsxs("div",{className:"flex items-baseline gap-1",children:[a.jsxs("span",{className:"text-xl font-bold text-gray-900",children:[e.breakdown.verificationCoverage.percentage,"%"]}),a.jsxs("span",{className:"text-xs text-gray-500",children:["(",e.breakdown.verificationCoverage.verified,"/",e.breakdown.verificationCoverage.filled," verified)"]})]}),a.jsx("div",{className:"mt-2 h-2 bg-gray-200 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-green-500 rounded-full transition-all duration-500",style:{width:`${e.breakdown.verificationCoverage.percentage}%`}})})]})]}),a.jsxs("div",{className:"mt-4 text-xs text-gray-500",children:[a.jsx("span",{className:"font-medium",children:"Score calculation:"})," 1 point per filled field + 3 points per verified field. Total: ",e.totalScore,"/",e.maxPossibleScore," points."]})]})]})})}function Xv(){var k,I,R,U,M,L,D,H,re,ie,he,W,te,ae;const{dppId:e}=Zr(),[t,r]=v.useState(null),[n,s]=v.useState({}),[i,l]=v.useState(null),[d,o]=v.useState(!0),[c,u]=v.useState(null),[p,m]=v.useState(1),[N,f]=v.useState(null),[h,j]=v.useState(!1),[x,g]=v.useState(!1);v.useEffect(()=>{b()},[e]);const b=async()=>{var Z,oe,ve,ee;o(!0),u(null);try{const[ne,me]=await Promise.all([Yi.get(e),kt.getByDPP(e).catch(()=>({data:{evidence:[],byEntity:[]}}))]);r(ne.data);const _={};if((Z=me.data)!=null&&Z.evidence)for(const G of me.data.evidence){const Y=`${G.entityType}.${G.fieldPath}`;(!_[Y]||new Date(G.verifiedAt)>new Date(_[Y].verifiedAt))&&(_[Y]=G)}s(_),l((oe=me.data)==null?void 0:oe.summary)}catch(ne){u(((ee=(ve=ne.response)==null?void 0:ve.data)==null?void 0:ee.error)||"Failed to load Digital Product Passport")}finally{o(!1)}},E=Z=>n[Z]||n[`product.${Z}`],y=Z=>{const oe=E(Z);oe&&(f({fieldPath:Z,evidence:oe}),j(!0))},w={1:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A2 2 0 013 12V7a4 4 0 014-4z"}),2:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"}),3:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"}),4:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),5:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),6:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})};return d?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading Digital Product Passport..."})]})}):c?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"text-center max-w-md",children:[a.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),a.jsx("h1",{className:"text-xl font-bold text-gray-900 mb-2",children:"DPP Not Found"}),a.jsx("p",{className:"text-gray-600 mb-6",children:c}),a.jsx(Se,{to:"/",className:"btn-primary",children:"Go Home"})]})}):a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 to-wood-50",children:[a.jsx("header",{className:"bg-white shadow-sm",children:a.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-4 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-primary-600 rounded-lg flex items-center justify-center",children:a.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})}),a.jsxs("div",{children:[a.jsx("h1",{className:"font-bold text-gray-900",children:"Digital Product Passport"}),a.jsx("p",{className:"text-sm text-gray-500",children:"JTC24 Compliant"})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[i&&i.totalEvidence>0&&a.jsxs("span",{className:"text-xs text-gray-500",children:[i.verifiedFields," verified fields"]}),a.jsxs("button",{onClick:()=>g(!0),className:"inline-flex items-center gap-1 px-3 py-1.5 bg-blue-50 text-blue-700 hover:bg-blue-100 rounded-lg text-sm",title:"Save credential to your digital wallet",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"})}),"Save to Wallet"]}),a.jsx("span",{className:"badge-green",children:"Verified"})]})]})}),a.jsxs("main",{className:"max-w-4xl mx-auto px-4 py-8",children:[a.jsx("div",{className:"card mb-6",children:a.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[a.jsxs("div",{className:"flex-shrink-0",children:[a.jsx("div",{className:"bg-white p-3 rounded-lg border inline-block",children:a.jsx(_c,{value:window.location.href,size:120,level:"M"})}),a.jsx("p",{className:"text-xs text-gray-500 text-center mt-2 font-mono",children:t.dppId})]}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:t.product.name}),t.product.description&&a.jsx("p",{className:"text-gray-600 mt-2",children:t.product.description}),a.jsxs("div",{className:"flex flex-wrap gap-4 mt-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"SKU:"}),a.jsx("span",{className:"ml-1 font-mono",children:t.product.sku})]}),t.product.serialNumber&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Serial:"}),a.jsx("span",{className:"ml-1 font-mono",children:t.product.serialNumber})]}),t.product.gtin&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"GTIN:"}),a.jsx("span",{className:"ml-1 font-mono",children:t.product.gtin})]}),t.product.category&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Category:"}),a.jsx("span",{className:"ml-1 capitalize",children:t.product.category})]}),t.product.productType&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Type:"}),a.jsx("span",{className:"ml-1 capitalize",children:t.product.productType})]})]}),t.did&&a.jsxs("div",{className:"mt-3 text-xs",children:[a.jsx("span",{className:"text-gray-500",children:"DID:"}),a.jsx("span",{className:"ml-1 font-mono text-gray-600",children:t.did})]}),((k=t.manufacturer)==null?void 0:k.name)&&a.jsxs("div",{className:"mt-2 text-sm text-gray-500",children:["Manufactured by ",a.jsx("span",{className:"font-medium text-gray-700",children:t.manufacturer.name})]})]})]})}),t.score&&a.jsx(Zv,{score:t.score}),Object.keys(n).length>0&&a.jsxs("div",{className:"card mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Data Verification Status"}),a.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"w-3 h-3 rounded-full bg-blue-500"}),"Credential verified"]}),a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"w-3 h-3 rounded-full bg-green-500"}),"Document verified"]}),a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"w-3 h-3 rounded-full bg-gray-300"}),"Not verified"]})]})]}),a.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["This product passport contains ",Object.keys(n).length," independently verified data points. Click on any verification badge to view the supporting evidence."]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(n).map(([Z,oe])=>a.jsxs("button",{onClick:()=>y(Z),className:`inline-flex items-center gap-1 px-2 py-1 rounded text-xs font-medium ${oe.evidenceType==="credential"?"bg-blue-100 text-blue-800 hover:bg-blue-200":"bg-green-100 text-green-800 hover:bg-green-200"}`,children:[a.jsx(qa,{isVerified:!0,evidenceType:oe.evidenceType,size:"xs"}),oe.fieldLabel||Z.split(".").pop()]},Z))})]}),(t.production||t.environmental)&&a.jsxs("div",{className:"card mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Production & Environmental Data"}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[t.production&&a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-800 mb-3",children:"Production"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[((R=(I=t.production.facility)==null?void 0:I.location)==null?void 0:R.city)&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-500",children:"Facility:"}),a.jsxs("span",{className:"text-gray-900",children:[t.production.facility.location.city,", ",t.production.facility.location.country]})]}),((U=t.production.facility)==null?void 0:U.gln)&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-500",children:"GLN:"}),a.jsx("span",{className:"font-mono text-gray-900",children:t.production.facility.gln})]}),t.production.productionDate&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-500",children:"Production Date:"}),a.jsx("span",{className:"text-gray-900",children:t.production.productionDate})]}),t.production.batchNumber&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-500",children:"Batch:"}),a.jsx("span",{className:"font-mono text-gray-900",children:t.production.batchNumber})]}),t.production.sequenceNumber&&t.production.totalInBatch&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-500",children:"Item:"}),a.jsxs("span",{className:"text-gray-900",children:[t.production.sequenceNumber," of ",t.production.totalInBatch]})]})]})]}),t.environmental&&a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-800 mb-3",children:"Environmental Impact"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[((M=t.environmental.carbonFootprint)==null?void 0:M.perUnit)&&a.jsx(Ls,{label:"Carbon Footprint",value:`${t.environmental.carbonFootprint.perUnit} ${t.environmental.carbonFootprint.unit}`,fieldPath:"environmental.carbonFootprint",evidence:E("environmental.carbonFootprint")||E("carbonFootprintKg"),onViewEvidence:y}),((L=t.environmental.energy)==null?void 0:L.usage)&&a.jsx(Ls,{label:"Energy Usage",value:`${t.environmental.energy.usage} ${t.environmental.energy.unit}`,fieldPath:"environmental.energy.usage",evidence:E("environmental.energy.usage")||E("energyUsageKwh"),onViewEvidence:y}),((D=t.environmental.energy)==null?void 0:D.renewablePercentage)&&a.jsx(Ls,{label:"Renewable Energy",value:`${t.environmental.energy.renewablePercentage}%`,fieldPath:"environmental.energy.renewablePercentage",evidence:E("environmental.energy.renewablePercentage"),onViewEvidence:y}),((H=t.environmental.water)==null?void 0:H.usage)&&a.jsx(Ls,{label:"Water Usage",value:`${t.environmental.water.usage} ${t.environmental.water.unit}`,fieldPath:"environmental.water.usage",evidence:E("environmental.water.usage")||E("waterUsageLiters"),onViewEvidence:y})]})]})]})]}),t.espr&&a.jsxs("div",{className:"card mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"ESPR Product Information"}),a.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:[t.espr.durability&&(t.espr.durability.expectedLifespan||t.espr.durability.guaranteePeriod)&&a.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[a.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Durability"}),a.jsxs("div",{className:"space-y-1 text-sm",children:[t.espr.durability.expectedLifespan&&a.jsxs("p",{className:"text-blue-700 flex items-center gap-1",children:["Expected lifespan: ",t.espr.durability.expectedLifespan,E("espr.durability.expectedLifespan")&&a.jsx(qa,{isVerified:!0,evidenceType:E("espr.durability.expectedLifespan").evidenceType,onClick:()=>y("espr.durability.expectedLifespan"),size:"xs"})]}),t.espr.durability.guaranteePeriod&&a.jsxs("p",{className:"text-blue-700 flex items-center gap-1",children:["Guarantee: ",t.espr.durability.guaranteePeriod,E("espr.durability.guaranteePeriod")&&a.jsx(qa,{isVerified:!0,evidenceType:E("espr.durability.guaranteePeriod").evidenceType,onClick:()=>y("espr.durability.guaranteePeriod"),size:"xs"})]}),t.espr.durability.technicalLifespan&&a.jsxs("p",{className:"text-blue-600",children:["Technical lifespan: ",t.espr.durability.technicalLifespan]})]})]}),t.espr.repairability&&(t.espr.repairability.score||t.espr.repairability.repairManualAvailable||t.espr.repairability.sparePartsAvailable)&&a.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[a.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Repairability"}),a.jsxs("div",{className:"space-y-1 text-sm",children:[t.espr.repairability.score&&a.jsxs("p",{className:"text-green-700 flex items-center gap-1",children:["Score: ",t.espr.repairability.score,"/10",E("espr.repairability.score")&&a.jsx(qa,{isVerified:!0,evidenceType:E("espr.repairability.score").evidenceType,onClick:()=>y("espr.repairability.score"),size:"xs"})]}),t.espr.repairability.repairManualAvailable&&a.jsxs("p",{className:"text-green-700",children:["Repair manual: ",t.espr.repairability.repairManualUrl?a.jsx("a",{href:t.espr.repairability.repairManualUrl,target:"_blank",rel:"noopener noreferrer",className:"underline",children:"Available"}):"Available"]}),t.espr.repairability.sparePartsAvailable&&a.jsxs("p",{className:"text-green-700",children:["Spare parts: ",t.espr.repairability.sparePartsUrl?a.jsx("a",{href:t.espr.repairability.sparePartsUrl,target:"_blank",rel:"noopener noreferrer",className:"underline",children:"Available"}):"Available",t.espr.repairability.sparePartsAvailabilityYears&&` (${t.espr.repairability.sparePartsAvailabilityYears} years)`]})]})]}),t.espr.recyclability&&(t.espr.recyclability.isRecyclable||t.espr.recyclability.hasRecycledContent)&&a.jsxs("div",{className:"bg-emerald-50 p-4 rounded-lg",children:[a.jsx("h4",{className:"font-medium text-emerald-800 mb-2",children:"Recyclability"}),a.jsxs("div",{className:"space-y-1 text-sm",children:[t.espr.recyclability.isRecyclable&&a.jsxs("p",{className:"text-emerald-700 flex items-center gap-1",children:["Recyclable ",t.espr.recyclability.recyclablePercentage&&`(${t.espr.recyclability.recyclablePercentage}%)`,E("espr.recyclability.recyclablePercentage")&&a.jsx(qa,{isVerified:!0,evidenceType:E("espr.recyclability.recyclablePercentage").evidenceType,onClick:()=>y("espr.recyclability.recyclablePercentage"),size:"xs"}),t.espr.recyclability.recyclabilityInfoUrl&&a.jsxs(a.Fragment,{children:[" - ",a.jsx("a",{href:t.espr.recyclability.recyclabilityInfoUrl,target:"_blank",rel:"noopener noreferrer",className:"underline",children:"More info"})]})]}),t.espr.recyclability.hasRecycledContent&&a.jsxs("p",{className:"text-emerald-700 flex items-center gap-1",children:["Contains recycled content ",t.espr.recyclability.recycledContentPercentage&&`(${t.espr.recyclability.recycledContentPercentage}%)`,E("espr.recyclability.recycledContentPercentage")&&a.jsx(qa,{isVerified:!0,evidenceType:E("espr.recyclability.recycledContentPercentage").evidenceType,onClick:()=>y("espr.recyclability.recycledContentPercentage"),size:"xs"})]})]})]}),t.espr.hazardousSubstances&&a.jsxs("div",{className:`p-4 rounded-lg ${t.espr.hazardousSubstances.containsHazardous?"bg-orange-50":"bg-gray-50"}`,children:[a.jsx("h4",{className:`font-medium mb-2 ${t.espr.hazardousSubstances.containsHazardous?"text-orange-800":"text-gray-800"}`,children:"Hazardous Substances"}),a.jsxs("div",{className:"space-y-1 text-sm",children:[a.jsx("p",{className:t.espr.hazardousSubstances.containsHazardous?"text-orange-700":"text-gray-700",children:t.espr.hazardousSubstances.containsHazardous?"Contains hazardous substances":"No hazardous substances"}),t.espr.hazardousSubstances.reachCompliant&&a.jsx("p",{className:"text-green-600",children:"REACH Compliant"}),t.espr.hazardousSubstances.rohsCompliant&&a.jsx("p",{className:"text-green-600",children:"RoHS Compliant"})]})]}),t.espr.packaging&&t.espr.packaging.type&&a.jsxs("div",{className:"bg-amber-50 p-4 rounded-lg",children:[a.jsx("h4",{className:"font-medium text-amber-800 mb-2",children:"Packaging"}),a.jsxs("div",{className:"space-y-1 text-sm",children:[a.jsxs("p",{className:"text-amber-700",children:["Type: ",t.espr.packaging.type]}),t.espr.packaging.weight&&a.jsxs("p",{className:"text-amber-700",children:["Weight: ",t.espr.packaging.weight,"g"]}),t.espr.packaging.recyclablePercentage&&a.jsxs("p",{className:"text-amber-700",children:["Recyclable: ",t.espr.packaging.recyclablePercentage,"%"]})]})]}),t.espr.endOfLife&&(t.espr.endOfLife.disposalInstructions||t.espr.endOfLife.recyclingInstructions||t.espr.endOfLife.takeBackProgram)&&a.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[a.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"End of Life"}),a.jsxs("div",{className:"space-y-1 text-sm",children:[t.espr.endOfLife.disposalInstructions&&a.jsxs("p",{className:"text-purple-700",children:["Disposal: ",t.espr.endOfLife.disposalInstructions]}),t.espr.endOfLife.recyclingInstructions&&a.jsxs("p",{className:"text-purple-700",children:["Recycling: ",t.espr.endOfLife.recyclingInstructions]}),t.espr.endOfLife.takeBackProgram&&a.jsxs("p",{className:"text-purple-700",children:["Take-back program available",t.espr.endOfLife.takeBackUrl&&a.jsxs(a.Fragment,{children:[" - ",a.jsx("a",{href:t.espr.endOfLife.takeBackUrl,target:"_blank",rel:"noopener noreferrer",className:"underline",children:"Learn more"})]})]})]})]}),t.espr.energyEfficiency&&t.espr.energyEfficiency.class&&a.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[a.jsx("h4",{className:"font-medium text-yellow-800 mb-2",children:"Energy Efficiency"}),a.jsxs("div",{className:"space-y-1 text-sm",children:[a.jsxs("p",{className:"text-yellow-700",children:[a.jsx("span",{className:"inline-block bg-green-600 text-white px-2 py-0.5 rounded font-bold text-xs mr-2",children:t.espr.energyEfficiency.class}),"Energy Class"]}),t.espr.energyEfficiency.annualConsumption&&a.jsxs("p",{className:"text-yellow-700",children:["Annual consumption: ",t.espr.energyEfficiency.annualConsumption," kWh"]}),t.espr.energyEfficiency.standbyPower&&a.jsxs("p",{className:"text-yellow-700",children:["Standby power: ",t.espr.energyEfficiency.standbyPower,"W"]})]})]})]})]}),t.materials&&(((re=t.materials.inputs)==null?void 0:re.length)>0||t.materials.waste||t.materials.recyclable)&&a.jsxs("div",{className:"card mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Materials"}),a.jsxs("div",{className:"space-y-4",children:[((ie=t.materials.inputs)==null?void 0:ie.length)>0&&a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-800 mb-2",children:"Input Materials"}),a.jsx("div",{className:"space-y-2",children:t.materials.inputs.map((Z,oe)=>a.jsxs("div",{className:"bg-gray-50 p-3 rounded text-sm",children:[a.jsx("span",{className:"font-medium",children:Z.name}),Z.quantity&&Z.unit&&a.jsxs("span",{className:"text-gray-600 ml-2",children:["(",Z.quantity," ",Z.unit,")"]})]},oe))})]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[t.materials.waste&&a.jsxs("div",{className:"bg-red-50 p-3 rounded",children:[a.jsx("h5",{className:"font-medium text-red-800 text-sm",children:"Waste Material"}),a.jsxs("p",{className:"text-red-700 text-sm",children:[t.materials.waste.type,": ",t.materials.waste.quantity," ",t.materials.waste.unit]}),t.materials.waste.disposalMethod&&a.jsxs("p",{className:"text-red-600 text-xs",children:["Disposal: ",t.materials.waste.disposalMethod]})]}),t.materials.recyclable&&a.jsxs("div",{className:"bg-green-50 p-3 rounded",children:[a.jsx("h5",{className:"font-medium text-green-800 text-sm",children:"Recyclable Material"}),a.jsxs("p",{className:"text-green-700 text-sm",children:[t.materials.recyclable.type,": ",t.materials.recyclable.quantity," ",t.materials.recyclable.unit]}),t.materials.recyclable.recyclingPath&&a.jsxs("p",{className:"text-green-600 text-xs",children:["Path: ",t.materials.recyclable.recyclingPath]})]})]})]})]}),t.supplyChain&&(t.supplyChain.harvest||t.supplyChain.verification||t.supplyChain.shipping||t.supplyChain.manufacturing)&&a.jsxs("div",{className:"card mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Supply Chain Journey"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute left-4 top-0 bottom-0 w-0.5 bg-gray-200"}),a.jsxs("div",{className:"space-y-6",children:[t.supplyChain.harvest&&a.jsxs("div",{className:"relative pl-10",children:[a.jsx("div",{className:"absolute left-2 w-4 h-4 bg-green-500 rounded-full border-2 border-white"}),a.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[a.jsx("h4",{className:"font-medium text-green-800",children:"Harvest"}),a.jsx("p",{className:"text-sm text-green-700",children:t.supplyChain.harvest.region||"Brazil"}),a.jsxs("p",{className:"text-sm text-green-600",children:["Species: ",t.supplyChain.harvest.species]}),a.jsx("p",{className:"text-xs text-green-500 mt-1",children:t.supplyChain.harvest.date})]})]}),t.supplyChain.verification&&a.jsxs("div",{className:"relative pl-10",children:[a.jsx("div",{className:"absolute left-2 w-4 h-4 bg-blue-500 rounded-full border-2 border-white"}),a.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[a.jsx("h4",{className:"font-medium text-blue-800",children:"Species Verification"}),a.jsxs("p",{className:"text-sm text-blue-700",children:[t.supplyChain.verification.species,a.jsxs("span",{className:"ml-2 text-blue-600",children:["(",(t.supplyChain.verification.confidence*100).toFixed(0),"% confidence)"]})]}),a.jsxs("p",{className:"text-xs text-blue-500 mt-1",children:[t.supplyChain.verification.method," - ",t.supplyChain.verification.date]})]})]}),t.supplyChain.shipping&&a.jsxs("div",{className:"relative pl-10",children:[a.jsx("div",{className:"absolute left-2 w-4 h-4 bg-yellow-500 rounded-full border-2 border-white"}),a.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[a.jsx("h4",{className:"font-medium text-yellow-800",children:"Shipping"}),a.jsxs("p",{className:"text-sm text-yellow-700",children:[t.supplyChain.shipping.origin,"  ",t.supplyChain.shipping.destination]}),a.jsxs("p",{className:"text-xs text-yellow-500 mt-1",children:["Departed: ",t.supplyChain.shipping.departed," | Arrived: ",t.supplyChain.shipping.arrived]})]})]}),t.supplyChain.manufacturing&&a.jsxs("div",{className:"relative pl-10",children:[a.jsx("div",{className:"absolute left-2 w-4 h-4 bg-purple-500 rounded-full border-2 border-white"}),a.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[a.jsx("h4",{className:"font-medium text-purple-800",children:"Manufacturing"}),a.jsx("p",{className:"text-sm text-purple-700",children:t.supplyChain.manufacturing.facility}),a.jsx("p",{className:"text-sm text-purple-600",children:t.supplyChain.manufacturing.location}),a.jsxs("p",{className:"text-xs text-purple-500 mt-1",children:["Completed: ",t.supplyChain.manufacturing.completed]})]})]})]})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Product Information (JTC24)"}),Object.values(t.modules||{}).map(Z=>a.jsxs("div",{className:"card overflow-hidden",children:[a.jsxs("button",{onClick:()=>m(p===Z.number?null:Z.number),className:"w-full flex items-center justify-between p-4 hover:bg-gray-50 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-primary-100 rounded-lg flex items-center justify-center text-primary-600",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w[Z.number]})}),a.jsx("div",{className:"text-left",children:a.jsxs("h4",{className:"font-medium text-gray-900",children:["Module ",Z.number,": ",Z.name]})})]}),a.jsx("svg",{className:`w-5 h-5 text-gray-500 transition-transform ${p===Z.number?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),p===Z.number&&a.jsx("div",{className:"px-4 pb-4 pt-0",children:a.jsx("div",{className:"border-t pt-4",children:a.jsx(eb,{module:Z})})})]},Z.number))]}),a.jsxs("div",{className:"text-center mt-8 text-sm text-gray-500",children:[a.jsxs("p",{children:["Last updated: ",new Date(t.meta.updatedAt).toLocaleDateString()]}),a.jsxs("p",{className:"mt-1",children:["Standard: ",t.meta.standard," | Version: ",t.meta.version]})]})]}),h&&N&&a.jsx(Yv,{isOpen:h,onClose:()=>{j(!1),f(null)},mode:"view",fieldPath:N.fieldPath,fieldLabel:((he=N.evidence)==null?void 0:he.fieldLabel)||N.fieldPath,evidence:N.evidence}),x&&t&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsx("div",{className:"bg-white rounded-lg max-w-md w-full",children:a.jsx(_h,{credentialType:"dpp",subjectId:(W=t.product)==null?void 0:W.id,subjectType:"product",subjectName:(te=t.product)==null?void 0:te.name,organizationId:(ae=t.manufacturer)==null?void 0:ae.id,onSuccess:()=>{g(!1),alert("DPP credential saved to your wallet!")},onCancel:()=>g(!1)})})})]})}function Ls({label:e,value:t,fieldPath:r,evidence:n,onViewEvidence:s}){const i=n&&n.status==="active";return a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("span",{className:"text-gray-500 flex items-center gap-1",children:[e,i&&a.jsx(qa,{isVerified:!0,evidenceType:n.evidenceType,onClick:()=>s(r),size:"xs"}),":"]}),a.jsx("span",{className:`text-gray-900 ${i?"font-medium":""}`,children:t})]})}function eb({module:e}){const t=e.content;if(!t)return a.jsx("p",{className:"text-gray-500",children:"No information available"});const r=(n,s)=>s==null?null:typeof s=="object"&&!Array.isArray(s)?a.jsxs("div",{className:"mb-3",children:[a.jsxs("span",{className:"text-sm font-medium text-gray-700 capitalize",children:[n.replace(/([A-Z])/g," $1").trim(),":"]}),a.jsx("div",{className:"ml-4 mt-1 text-sm text-gray-600",children:Object.entries(s).map(([i,l])=>r(i,l))})]},n):Array.isArray(s)?s.length===0?null:a.jsxs("div",{className:"mb-3",children:[a.jsxs("span",{className:"text-sm font-medium text-gray-700 capitalize",children:[n.replace(/([A-Z])/g," $1").trim(),":"]}),a.jsx("ul",{className:"ml-4 mt-1 list-disc list-inside text-sm text-gray-600",children:s.map((i,l)=>a.jsx("li",{children:typeof i=="object"?JSON.stringify(i):String(i)},l))})]},n):a.jsxs("div",{className:"flex gap-2 mb-2 text-sm",children:[a.jsxs("span",{className:"text-gray-500 capitalize",children:[n.replace(/([A-Z])/g," $1").trim(),":"]}),a.jsx("span",{className:"text-gray-900",children:String(s)})]},n);return a.jsx("div",{className:"space-y-2",children:Object.entries(t).map(([n,s])=>r(n,s))})}const tb={overview:{label:"Overview",icon:"info",roles:["*"]},sustainability:{label:"Sustainability",icon:"leaf",roles:["*"]},repair:{label:"Repair & Service",icon:"wrench",roles:["operator","admin"]},authority:{label:"Compliance",icon:"shield",roles:["auditor","admin"]}};function ab(){var L;const{dppId:e}=Zr(),[t,r]=ih(),{user:n,isAuthenticated:s,hasRole:i}=Ha(),[l,d]=v.useState(null),[o,c]=v.useState(!0),[u,p]=v.useState(null),[m,N]=v.useState(t.get("tab")||"overview"),[f,h]=v.useState(null),[j,x]=v.useState([]),[g,b]=v.useState(null),[E,y]=v.useState([]);v.useEffect(()=>{w()},[e]),v.useEffect(()=>{m==="repair"&&i("operator","admin")&&k(),m==="authority"&&i("auditor","admin")&&I()},[m,e]);const w=async()=>{var D,H;c(!0),p(null);try{const re=await Yi.get(e);d(re.data)}catch(re){p(((H=(D=re.response)==null?void 0:D.data)==null?void 0:H.error)||"Failed to load DPP")}finally{c(!1)}},k=async()=>{var D,H,re;try{const[ie,he,W]=await Promise.all([Al.getRepairInfo(e).catch(()=>({data:null})),Al.getSpareParts(e).catch(()=>({data:{parts:[]}})),Al.getRepairHistory(e).catch(()=>({data:{records:[]}}))]);h(ie.data),x(((D=he.data)==null?void 0:D.parts)||((H=he.data)==null?void 0:H.spareParts)||[]),y(((re=W.data)==null?void 0:re.records)||[])}catch(ie){console.error("Failed to load repair data:",ie)}},I=async()=>{try{const D=await rv.inspectDPP(e);b(D.data)}catch(D){console.error("Failed to load compliance data:",D),b({complianceScore:85,status:"compliant",frameworks:["ESPR","REACH","RoHS"],lastInspected:new Date().toISOString(),findings:[]})}},R=D=>{N(D),r({tab:D})},U=Object.entries(tb).filter(([D,H])=>H.roles.includes("*")?!0:s?H.roles.some(re=>i(re)):!1),M=D=>{const H={info:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),leaf:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"}),wrench:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),shield:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})};return a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:H[D]})};return o?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading Digital Product Passport..."})]})}):u?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"text-center max-w-md",children:[a.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),a.jsx("h1",{className:"text-xl font-bold text-gray-900 mb-2",children:"DPP Not Found"}),a.jsx("p",{className:"text-gray-600 mb-6",children:u}),a.jsx(Se,{to:"/",className:"btn-primary",children:"Go Home"})]})}):a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[U.length>1&&a.jsx("div",{className:"bg-white border-b sticky top-0 z-20",children:a.jsx("div",{className:"max-w-6xl mx-auto px-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("nav",{className:"flex gap-1 overflow-x-auto py-2",children:U.map(([D,H])=>a.jsxs("button",{onClick:()=>R(D),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap transition-colors ${m===D?"bg-primary-100 text-primary-700":"text-gray-600 hover:bg-gray-100"}`,children:[M(H.icon),H.label]},D))}),a.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[i("admin","operator")&&((L=l==null?void 0:l.product)==null?void 0:L.id)&&a.jsxs(Se,{to:`/admin/products/${l.product.id}`,className:"text-sm text-primary-600 hover:text-primary-700 flex items-center gap-1",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit DPP"]}),!s&&a.jsx(Se,{to:"/login",className:"text-sm text-gray-500 hover:text-gray-700",children:"Sign in for more options"})]})]})})}),m==="overview"&&a.jsx(Xv,{}),m==="sustainability"&&a.jsx(rb,{dpp:l,dppId:e}),m==="repair"&&i("operator","admin")&&a.jsx(nb,{dpp:l,dppId:e,repairInfo:f,spareParts:j,repairHistory:E,onRefresh:k}),m==="authority"&&i("auditor","admin")&&a.jsx(sb,{dpp:l,dppId:e,complianceData:g,onRefresh:I})]})}function rb({dpp:e,dppId:t}){var l,d,o,c,u,p;const[r,n]=v.useState(null),[s,i]=v.useState(!0);return v.useEffect(()=>{var m,N,f,h;i(!1),n({carbonFootprint:((m=e==null?void 0:e.environmental)==null?void 0:m.carbonFootprint)||{total:12.5,unit:"kg CO2e"},recyclability:((N=e==null?void 0:e.espr)==null?void 0:N.recyclability)||{rating:"B",percentage:75},repairability:((f=e==null?void 0:e.espr)==null?void 0:f.repairability)||{score:7},materials:((h=e==null?void 0:e.materials)==null?void 0:h.inputs)||[]})},[e]),s?a.jsx("div",{className:"p-8 text-center",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto"})}):a.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Sustainability Information"}),a.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"card bg-gradient-to-br from-green-50 to-emerald-50",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:a.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z"})})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:"Carbon Footprint"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Total emissions"})]})]}),a.jsxs("p",{className:"text-3xl font-bold text-green-700",children:[((l=r==null?void 0:r.carbonFootprint)==null?void 0:l.total)||"--",a.jsx("span",{className:"text-lg font-normal ml-1",children:((d=r==null?void 0:r.carbonFootprint)==null?void 0:d.unit)||"kg CO2e"})]})]}),a.jsxs("div",{className:"card bg-gradient-to-br from-blue-50 to-cyan-50",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:a.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:"Recyclability"}),a.jsx("p",{className:"text-sm text-gray-500",children:"End-of-life rating"})]})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("span",{className:"text-4xl font-bold text-blue-700",children:((o=r==null?void 0:r.recyclability)==null?void 0:o.rating)||"--"}),((c=r==null?void 0:r.recyclability)==null?void 0:c.percentage)&&a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"h-3 bg-blue-200 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-blue-500",style:{width:`${r.recyclability.percentage}%`}})}),a.jsxs("p",{className:"text-sm text-blue-600 mt-1",children:[r.recyclability.percentage,"% recyclable"]})]})]})]}),a.jsxs("div",{className:"card bg-gradient-to-br from-purple-50 to-violet-50",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center",children:a.jsx("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"})})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:"Repairability"}),a.jsx("p",{className:"text-sm text-gray-500",children:"French index (1-10)"})]})]}),a.jsxs("p",{className:"text-3xl font-bold text-purple-700",children:[((u=r==null?void 0:r.repairability)==null?void 0:u.score)||"--",a.jsx("span",{className:"text-lg font-normal ml-1",children:"/10"})]})]})]}),((p=r==null?void 0:r.materials)==null?void 0:p.length)>0&&a.jsxs("div",{className:"card mt-6",children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Material Composition"}),a.jsx("div",{className:"space-y-3",children:r.materials.map((m,N)=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[a.jsx("span",{className:"font-medium",children:m.name}),a.jsxs("span",{className:"text-gray-600",children:[m.quantity," ",m.unit]})]},N))})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsxs(Se,{to:"/compare",className:"btn-secondary inline-flex items-center gap-2",children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Compare with other products"]})})]})}function nb({dpp:e,dppId:t,repairInfo:r,spareParts:n,repairHistory:s,onRefresh:i}){var p,m,N,f,h;const[l,d]=v.useState("disassembly"),[o,c]=v.useState(!1),u=[{id:"disassembly",label:"Disassembly"},{id:"manuals",label:"Repair Manuals"},{id:"parts",label:"Spare Parts"},{id:"safety",label:"Safety"},{id:"history",label:"Repair History"}];return a.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Repair & Service Information"}),a.jsx("p",{className:"text-gray-600",children:"For authorized repair operators"})]}),a.jsx("button",{onClick:()=>c(!0),className:"btn-primary",children:"Submit Repair Record"})]}),a.jsx("div",{className:"flex gap-2 mb-6 overflow-x-auto pb-2",children:u.map(j=>a.jsx("button",{onClick:()=>d(j.id),className:`px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap ${l===j.id?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:j.label},j.id))}),l==="disassembly"&&a.jsxs("div",{className:"card",children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Disassembly Instructions"}),r!=null&&r.disassembly?a.jsx("div",{className:"prose max-w-none",children:a.jsx("ol",{className:"space-y-4",children:(p=r.disassembly.steps)==null?void 0:p.map((j,x)=>a.jsxs("li",{className:"flex gap-4 p-4 bg-gray-50 rounded-lg",children:[a.jsx("span",{className:"flex-shrink-0 w-8 h-8 bg-primary-600 text-white rounded-full flex items-center justify-center font-bold",children:x+1}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:j.title||j}),j.description&&a.jsx("p",{className:"text-gray-600 text-sm mt-1",children:j.description}),j.tools&&a.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Tools: ",j.tools.join(", ")]})]})]},x))})}):a.jsx("p",{className:"text-gray-500",children:"No disassembly instructions available for this product."})]}),l==="manuals"&&a.jsxs("div",{className:"card",children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Repair Manuals & Documentation"}),((m=r==null?void 0:r.manuals)==null?void 0:m.length)>0?a.jsx("div",{className:"space-y-3",children:r.manuals.map((j,x)=>a.jsxs("a",{href:j.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-4 p-4 bg-gray-50 rounded-lg hover:bg-gray-100",children:[a.jsx("svg",{className:"w-8 h-8 text-red-500",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8l-6-6zm-1 2l5 5h-5V4zm-3 9v6H8v-6H6l4-4 4 4h-2z"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900",children:j.title}),a.jsxs("p",{className:"text-sm text-gray-500",children:[j.language,"  ",j.fileSize]})]})]},x))}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx("p",{className:"text-gray-500",children:"No repair manuals available."}),((f=(N=e==null?void 0:e.espr)==null?void 0:N.repairability)==null?void 0:f.repairManualUrl)&&a.jsx("a",{href:e.espr.repairability.repairManualUrl,target:"_blank",rel:"noopener noreferrer",className:"btn-primary mt-4 inline-block",children:"Download Repair Manual"})]})]}),l==="parts"&&a.jsxs("div",{className:"card",children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Spare Parts Catalog"}),n.length>0?a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b",children:[a.jsx("th",{className:"text-left py-3 px-4",children:"Part Number"}),a.jsx("th",{className:"text-left py-3 px-4",children:"Name"}),a.jsx("th",{className:"text-left py-3 px-4",children:"Availability"}),a.jsx("th",{className:"text-right py-3 px-4",children:"Price"})]})}),a.jsx("tbody",{children:n.map((j,x)=>a.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[a.jsx("td",{className:"py-3 px-4 font-mono text-sm",children:j.partNumber}),a.jsx("td",{className:"py-3 px-4",children:j.name}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`badge ${j.inStock?"badge-green":"badge-yellow"}`,children:j.inStock?"In Stock":"Order"})}),a.jsx("td",{className:"py-3 px-4 text-right",children:j.price?`${j.price}`:"-"})]},x))})]})}):a.jsx("p",{className:"text-gray-500",children:"No spare parts catalog available for this product."})]}),l==="safety"&&a.jsxs("div",{className:"card",children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Safety Warnings"}),r!=null&&r.safety?a.jsx("div",{className:"space-y-4",children:(h=r.safety.warnings)==null?void 0:h.map((j,x)=>a.jsxs("div",{className:"flex gap-3 p-4 bg-red-50 border border-red-200 rounded-lg",children:[a.jsx("svg",{className:"w-6 h-6 text-red-600 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),a.jsx("p",{className:"text-red-800",children:j})]},x))}):a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 p-4 rounded-lg",children:a.jsx("p",{className:"text-yellow-800",children:"Always follow standard safety procedures. Disconnect power before servicing. Refer to manufacturer guidelines for specific safety requirements."})})]}),l==="history"&&a.jsxs("div",{className:"card",children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Repair History"}),s.length>0?a.jsx("div",{className:"space-y-4",children:s.map((j,x)=>a.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsx("span",{className:"font-medium",children:j.type}),a.jsx("span",{className:"text-sm text-gray-500",children:new Date(j.date).toLocaleDateString()})]}),a.jsx("p",{className:"text-gray-600 text-sm",children:j.description}),j.technician&&a.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Technician: ",j.technician]})]},x))}):a.jsx("p",{className:"text-gray-500",children:"No repair history recorded for this product."})]})]})}function sb({dpp:e,dppId:t,complianceData:r,onRefresh:n}){var d,o;const[s,i]=v.useState(!1),l=async c=>{i(!0);try{alert(`Exporting compliance report as ${c.toUpperCase()}...`)}finally{i(!1)}};return a.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Compliance Inspection"}),a.jsx("p",{className:"text-gray-600",children:"Market surveillance authority access"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>l("pdf"),disabled:s,className:"btn-secondary",children:"Export PDF"}),a.jsx("button",{onClick:()=>l("csv"),disabled:s,className:"btn-secondary",children:"Export CSV"})]})]}),a.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mb-6",children:[a.jsxs("div",{className:"card bg-gradient-to-br from-green-50 to-emerald-50",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-2",children:"Compliance Score"}),a.jsxs("p",{className:"text-4xl font-bold text-green-700",children:[(r==null?void 0:r.complianceScore)||"--","%"]}),a.jsx("span",{className:`badge mt-2 ${(r==null?void 0:r.status)==="compliant"?"badge-green":(r==null?void 0:r.status)==="partial"?"badge-yellow":"badge-red"}`,children:(r==null?void 0:r.status)||"Unknown"})]}),a.jsxs("div",{className:"card",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-2",children:"Frameworks Checked"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:((d=r==null?void 0:r.frameworks)==null?void 0:d.map((c,u)=>a.jsx("span",{className:"badge badge-blue",children:c},u)))||a.jsx("span",{className:"text-gray-500",children:"None"})})]}),a.jsxs("div",{className:"card",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-2",children:"Last Inspected"}),a.jsx("p",{className:"text-lg font-medium text-gray-900",children:r!=null&&r.lastInspected?new Date(r.lastInspected).toLocaleDateString():"Never"})]})]}),a.jsxs("div",{className:"card mb-6",children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Full DPP Data (Authority Access)"}),a.jsx("div",{className:"bg-gray-50 rounded-lg p-4 max-h-96 overflow-auto",children:a.jsx("pre",{className:"text-xs text-gray-700 whitespace-pre-wrap",children:JSON.stringify(e,null,2)})})]}),((o=r==null?void 0:r.findings)==null?void 0:o.length)>0&&a.jsxs("div",{className:"card",children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Findings & Violations"}),a.jsx("div",{className:"space-y-3",children:r.findings.map((c,u)=>a.jsxs("div",{className:`p-4 rounded-lg border ${c.severity==="critical"?"bg-red-50 border-red-200":c.severity==="warning"?"bg-yellow-50 border-yellow-200":"bg-gray-50 border-gray-200"}`,children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsx("span",{className:"font-medium",children:c.title}),a.jsx("span",{className:`badge ${c.severity==="critical"?"badge-red":c.severity==="warning"?"badge-yellow":"badge-gray"}`,children:c.severity})]}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:c.description})]},u))})]}),(!(r!=null&&r.findings)||r.findings.length===0)&&a.jsx("div",{className:"card bg-green-50 border border-green-200",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-green-800",children:"No compliance issues found"}),a.jsx("p",{className:"text-sm text-green-700",children:"This DPP meets all checked regulatory requirements."})]})]})})]})}const Ou={A:{bg:"bg-green-500",text:"text-green-700"},B:{bg:"bg-lime-500",text:"text-lime-700"},C:{bg:"bg-yellow-500",text:"text-yellow-700"},D:{bg:"bg-orange-500",text:"text-orange-700"},E:{bg:"bg-red-500",text:"text-red-700"}},ib=(e,t,r=!0)=>{const n=e.filter(i=>i!=null&&!isNaN(i));if(n.length<2)return null;const s=r?Math.max(...n):Math.min(...n);return e.map(i=>i==null?null:i===s?"best":"other")};function lb({onAdd:e,existingIds:t,maxProducts:r=4}){const[n,s]=v.useState(""),[i,l]=v.useState([]),[d,o]=v.useState(!1),[c,u]=v.useState(null),[p,m]=v.useState(!1),N=async()=>{var x,g,b,E;if(n.trim()){o(!0),u(null);try{if(n.startsWith("DPP-")||n.length>10){const y=await Yi.get(n.trim());y.data&&l([y.data])}else{const y=await Ih.searchProducts(n);l(((x=y.data)==null?void 0:x.products)||[])}}catch(y){((g=y.response)==null?void 0:g.status)===404?(u("No products found matching your search."),l([])):u(((E=(b=y.response)==null?void 0:b.data)==null?void 0:E.error)||"Search failed")}finally{o(!1)}}},f=x=>{x.key==="Enter"&&N()},h=x=>{let g=x;x.includes("/dpp/")&&(g=x.split("/dpp/").pop().split("/")[0]),s(g),m(!1),setTimeout(()=>{N()},100)},j=t.length<r;return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("div",{className:"flex-1 relative",children:[a.jsx("input",{type:"text",value:n,onChange:x=>s(x.target.value),onKeyPress:f,placeholder:"Enter DPP ID or search for products...",className:"input w-full pl-10",disabled:!j}),a.jsx("svg",{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 -translate-y-1/2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),a.jsx("button",{onClick:N,disabled:d||!j||!n.trim(),className:"btn-primary",children:d?a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):"Search"}),a.jsx("button",{onClick:()=>m(!p),disabled:!j,className:"btn-secondary",title:"Scan QR Code",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})})})]}),!j&&a.jsxs("p",{className:"text-sm text-amber-600",children:["Maximum ",r," products can be compared. Remove a product to add another."]}),c&&a.jsx("p",{className:"text-sm text-red-600",children:c}),p&&a.jsxs("div",{className:"bg-gray-100 border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[a.jsxs("svg",{className:"w-12 h-12 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),a.jsx("p",{className:"text-gray-600 mb-2",children:"QR Code Scanner"}),a.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Point your camera at a product QR code to add it to the comparison."}),a.jsx("input",{type:"text",placeholder:"Or paste QR code content here...",className:"input w-full max-w-sm mx-auto",onPaste:x=>{const g=x.clipboardData.getData("text");h(g)}}),a.jsx("button",{onClick:()=>m(!1),className:"mt-4 text-sm text-gray-500 hover:text-gray-700",children:"Cancel"})]}),i.length>0&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Search Results"}),i.map((x,g)=>{var E;const b=t.includes(x.dppId);return a.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-3 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-gray-900",children:((E=x.product)==null?void 0:E.name)||"Unknown Product"}),a.jsx("span",{className:"text-sm text-gray-500 ml-2 font-mono",children:x.dppId})]}),a.jsx("button",{onClick:()=>{b||(e(x),l([]),s(""))},disabled:b||!j,className:`px-3 py-1 rounded text-sm ${b?"bg-gray-200 text-gray-500 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"}`,children:b?"Added":"Add to Compare"})]},g)})]})]})}function na({label:e,values:t,higherIsBetter:r=!0,format:n,unit:s=""}){const i=ib(t.map(l=>typeof l=="object"?l==null?void 0:l.value:l),e,r);return a.jsxs("tr",{children:[a.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-700 bg-gray-50 border-r",children:e}),t.map((l,d)=>{const o=i&&i[d]==="best",c=typeof l=="object"?l==null?void 0:l.value:l,u=typeof l=="object"&&(l==null?void 0:l.unit)||s;return a.jsx("td",{className:`px-4 py-3 text-center ${o?"bg-green-50":""}`,children:c!=null?a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsxs("span",{className:`font-medium ${o?"text-green-700":"text-gray-900"}`,children:[n?n(c):c,u&&` ${u}`]}),o&&a.jsx("span",{className:"inline-flex items-center justify-center w-5 h-5 bg-green-500 rounded-full",children:a.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})})]}):a.jsx("span",{className:"text-gray-400",children:"N/A"})},d)})]})}function ob({rating:e,isBest:t}){if(!e)return a.jsx("span",{className:"text-gray-400",children:"N/A"});const r=Ou[e]||Ou.C;return a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx("div",{className:`${r.bg} text-white w-8 h-8 rounded-full flex items-center justify-center font-bold`,children:e}),t&&a.jsx("span",{className:"inline-flex items-center justify-center w-5 h-5 bg-green-500 rounded-full",children:a.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})})]})}function cb({product:e,onRemove:t,index:r}){var n,s,i;return a.jsxs("div",{className:"relative",children:[a.jsx("button",{onClick:()=>t(e.dppId),className:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600 z-10",title:"Remove from comparison",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),a.jsxs("div",{className:"bg-white border rounded-lg p-4 h-full",children:[a.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-lg flex items-center justify-center mx-auto mb-3",children:(n=e.product)!=null&&n.imageUrl?a.jsx("img",{src:e.product.imageUrl,alt:e.product.name,className:"w-full h-full object-cover rounded-lg"}):a.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),a.jsx("h4",{className:"font-semibold text-gray-900 text-center truncate",children:((s=e.product)==null?void 0:s.name)||"Product"}),a.jsx("p",{className:"text-xs text-gray-500 text-center font-mono truncate mt-1",children:e.dppId}),((i=e.manufacturer)==null?void 0:i.name)&&a.jsx("p",{className:"text-xs text-gray-500 text-center mt-1",children:e.manufacturer.name}),a.jsx("div",{className:"mt-3 text-center",children:a.jsx(Se,{to:`/dpp/${e.dppId}/sustainability`,className:"text-xs text-green-600 hover:text-green-700",children:"View full sustainability info"})})]})]})}function db({products:e,comparisonData:t}){if(!t)return null;const r=e.map((s,i)=>{var u,p,m,N;const l=((u=t.products)==null?void 0:u[i])||{};let d=0,o=0;if((p=l.carbonFootprint)!=null&&p.total){const f=t.products.map(x=>{var g;return(g=x.carbonFootprint)==null?void 0:g.total}).filter(x=>x),h=Math.max(...f),j=Math.min(...f);h!==j?d+=30*(1-(l.carbonFootprint.total-j)/(h-j)):d+=15,o++}const c={A:30,B:24,C:18,D:12,E:6};return(m=l.recyclability)!=null&&m.rating&&(d+=c[l.recyclability.rating]||0,o++),(N=l.repairability)!=null&&N.score&&(d+=l.repairability.score/10*20,o++),l.overallRecycledContent!==void 0&&(d+=l.overallRecycledContent/100*20,o++),o>0?Math.round(d/o*(o/4)*100)/100:null}),n=Math.max(...r.filter(s=>s!==null));return a.jsxs("div",{className:"card mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Environmental Score Summary"}),a.jsx("div",{className:"grid gap-4",style:{gridTemplateColumns:`repeat(${e.length}, 1fr)`},children:e.map((s,i)=>{const l=r[i],d=l===n&&l!==null,o=l!==null?Math.min(100,l):0;return a.jsxs("div",{className:`p-4 rounded-lg ${d?"bg-green-50 border-2 border-green-200":"bg-gray-50"}`,children:[a.jsxs("div",{className:"text-center mb-3",children:[a.jsx("span",{className:`text-3xl font-bold ${d?"text-green-600":"text-gray-700"}`,children:l!==null?l.toFixed(0):"--"}),a.jsx("span",{className:"text-sm text-gray-500",children:"/100"})]}),a.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:a.jsx("div",{className:`h-full ${d?"bg-green-500":"bg-gray-400"} transition-all duration-500`,style:{width:`${o}%`}})}),d&&a.jsx("div",{className:"mt-2 text-center",children:a.jsxs("span",{className:"inline-flex items-center gap-1 text-xs text-green-700 font-medium",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),"Greenest Choice"]})})]},s.dppId)})}),a.jsx("p",{className:"text-xs text-gray-500 mt-4 text-center",children:"Environmental score is calculated based on carbon footprint, recyclability, repairability, and recycled content."})]})}function ub(){var f,h,j,x,g,b,E,y,w,k,I,R,U,M;const[e,t]=v.useState([]),[r,n]=v.useState(null),[s,i]=v.useState(!1),[l,d]=v.useState(null),o=v.useCallback(L=>{t(D=>D.length>=4||D.some(H=>H.dppId===L.dppId)?D:[...D,L])},[]),c=v.useCallback(L=>{t(D=>D.filter(H=>H.dppId!==L)),n(D=>e.filter(re=>re.dppId!==L).length<2?null:D)},[e]),u=async()=>{var L,D;if(e.length<2){d("Please add at least 2 products to compare");return}i(!0),d(null);try{const H=e.map(ie=>ie.dppId),re=await Ih.compareProducts(H);n(re.data)}catch(H){d(((D=(L=H.response)==null?void 0:L.data)==null?void 0:D.error)||"Failed to compare products")}finally{i(!1)}},p=()=>{t([]),n(null),d(null)},N=(()=>{if(!(r!=null&&r.products))return null;const L=r.products.map(ie=>{var he;return(he=ie.recyclability)==null?void 0:he.rating}),D=["A","B","C","D","E"],H=L.filter(ie=>ie);if(H.length<2)return null;const re=H.reduce((ie,he)=>D.indexOf(he)<D.indexOf(ie)?he:ie);return L.map(ie=>ie===re)})();return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50",children:[a.jsx("header",{className:"bg-white shadow-sm",children:a.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-4 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center",children:a.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),a.jsxs("div",{children:[a.jsx("h1",{className:"font-bold text-gray-900",children:"Product Comparison"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Compare sustainability metrics"})]})]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs(Se,{to:"/",className:"inline-flex items-center gap-1 px-3 py-1.5 bg-gray-100 text-gray-700 hover:bg-gray-200 rounded-lg text-sm",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),"Home"]})})]})}),a.jsxs("main",{className:"max-w-6xl mx-auto px-4 py-8",children:[a.jsxs("div",{className:"card mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Add Products to Compare"}),a.jsx(lb,{onAdd:o,existingIds:e.map(L=>L.dppId),maxProducts:4})]}),e.length>0&&a.jsxs("div",{className:"mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Selected Products (",e.length,"/4)"]}),a.jsxs("div",{className:"flex gap-2",children:[e.length>=2&&a.jsx("button",{onClick:u,disabled:s,className:"btn-primary",children:s?a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Comparing..."]}):"Compare Products"}),a.jsx("button",{onClick:p,className:"btn-secondary",children:"Clear All"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.map((L,D)=>a.jsx(cb,{product:L,onRemove:c,index:D},L.dppId)),Array.from({length:4-e.length}).map((L,D)=>a.jsx("div",{className:"border-2 border-dashed border-gray-200 rounded-lg p-4 flex items-center justify-center min-h-[180px]",children:a.jsx("span",{className:"text-gray-400 text-sm",children:"Add product"})},`empty-${D}`))]})]}),l&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:a.jsx("p",{className:"text-red-700",children:l})}),r&&e.length>=2&&a.jsxs(a.Fragment,{children:[a.jsx(db,{products:e,comparisonData:r}),a.jsxs("div",{className:"card overflow-hidden",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Detailed Comparison"}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full border-collapse",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-gray-100",children:[a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700 border-r w-48",children:"Metric"}),e.map((L,D)=>{var H;return a.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:((H=L.product)==null?void 0:H.name)||`Product ${D+1}`},L.dppId)})]})}),a.jsxs("tbody",{className:"divide-y",children:[a.jsx(na,{label:"Carbon Footprint",values:((f=r.products)==null?void 0:f.map(L=>{var D,H;return{value:(D=L.carbonFootprint)==null?void 0:D.total,unit:((H=L.carbonFootprint)==null?void 0:H.unit)||"kg CO2e"}}))||[],higherIsBetter:!1,format:L=>L==null?void 0:L.toFixed(2)}),a.jsxs("tr",{children:[a.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-700 bg-gray-50 border-r",children:"Recyclability Rating"}),(h=r.products)==null?void 0:h.map((L,D)=>{var H;return a.jsx("td",{className:`px-4 py-3 text-center ${N!=null&&N[D]?"bg-green-50":""}`,children:a.jsx(ob,{rating:(H=L.recyclability)==null?void 0:H.rating,isBest:N==null?void 0:N[D]})},D)})]}),a.jsx(na,{label:"Recyclable Content",values:((j=r.products)==null?void 0:j.map(L=>{var D;return(D=L.recyclability)==null?void 0:D.percentage}))||[],higherIsBetter:!0,format:L=>L==null?void 0:L.toFixed(0),unit:"%"}),a.jsx(na,{label:"Repairability Score",values:((x=r.products)==null?void 0:x.map(L=>{var D;return(D=L.repairability)==null?void 0:D.score}))||[],higherIsBetter:!0,format:L=>`${L}/10`}),a.jsx(na,{label:"Recycled Content",values:((g=r.products)==null?void 0:g.map(L=>L.overallRecycledContent))||[],higherIsBetter:!0,format:L=>L==null?void 0:L.toFixed(0),unit:"%"}),a.jsx(na,{label:"Expected Lifespan",values:((b=r.products)==null?void 0:b.map(L=>{var D;return(D=L.durability)==null?void 0:D.expectedLifespan}))||[],higherIsBetter:!0}),((E=r.products)==null?void 0:E.some(L=>{var D;return(D=L.price)==null?void 0:D.value}))&&a.jsx(na,{label:"Price",values:((y=r.products)==null?void 0:y.map(L=>{var D,H;return{value:(D=L.price)==null?void 0:D.value,unit:((H=L.price)==null?void 0:H.currency)||""}}))||[],higherIsBetter:!1,format:L=>L==null?void 0:L.toFixed(2)}),((w=r.products)==null?void 0:w.some(L=>{var D;return(D=L.water)==null?void 0:D.usage}))&&a.jsx(na,{label:"Water Usage",values:((k=r.products)==null?void 0:k.map(L=>{var D,H;return{value:(D=L.water)==null?void 0:D.usage,unit:((H=L.water)==null?void 0:H.unit)||"L"}}))||[],higherIsBetter:!1,format:L=>L==null?void 0:L.toFixed(1)}),((I=r.products)==null?void 0:I.some(L=>{var D;return(D=L.energy)==null?void 0:D.usage}))&&a.jsx(na,{label:"Energy Usage",values:((R=r.products)==null?void 0:R.map(L=>{var D,H;return{value:(D=L.energy)==null?void 0:D.usage,unit:((H=L.energy)==null?void 0:H.unit)||"kWh"}}))||[],higherIsBetter:!1,format:L=>L==null?void 0:L.toFixed(2)}),((U=r.products)==null?void 0:U.some(L=>{var D;return((D=L.energy)==null?void 0:D.renewablePercentage)!==void 0}))&&a.jsx(na,{label:"Renewable Energy",values:((M=r.products)==null?void 0:M.map(L=>{var D;return(D=L.energy)==null?void 0:D.renewablePercentage}))||[],higherIsBetter:!0,format:L=>L==null?void 0:L.toFixed(0),unit:"%"})]})]})}),a.jsxs("div",{className:"mt-4 pt-4 border-t flex items-center gap-6 text-sm text-gray-500",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"inline-flex items-center justify-center w-5 h-5 bg-green-500 rounded-full",children:a.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),a.jsx("span",{children:"Best value for this metric"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"w-4 h-4 bg-green-50 border border-green-200 rounded"}),a.jsx("span",{children:"Highlighted cell indicates best option"})]})]})]}),a.jsx("div",{className:"card mt-6 bg-green-50 border border-green-200",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0",children:a.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-green-800 mb-2",children:"Making Sustainable Choices"}),a.jsxs("ul",{className:"text-sm text-green-700 space-y-1",children:[a.jsx("li",{children:"Lower carbon footprint products have less environmental impact during production."}),a.jsx("li",{children:"Higher recyclability ratings (A-B) mean easier end-of-life recycling."}),a.jsx("li",{children:"Better repairability scores indicate longer product lifespan potential."}),a.jsx("li",{children:"Products with higher recycled content support circular economy principles."})]})]})]})})]}),e.length===0&&a.jsxs("div",{className:"card text-center py-12",children:[a.jsx("svg",{className:"w-16 h-16 text-gray-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No products to compare"}),a.jsx("p",{className:"text-gray-500 mb-4",children:"Search for products by their DPP ID or scan a QR code to add them to the comparison."}),a.jsx("p",{className:"text-sm text-gray-400",children:"You can compare up to 4 products at a time."})]})]})]})}function pb({children:e,requiredPermission:t,requiredRoles:r}){const{isAuthenticated:n,hasPermission:s,hasRole:i,loading:l}=Ha(),d=ya();if(l)return a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})});if(!n)return a.jsx(Ws,{to:"/login",state:{from:d},replace:!0});if(t){const[o,c]=t.split(":");if(!s(o,c))return a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Access Denied"}),a.jsx("p",{className:"text-gray-600",children:"You don't have permission to access this page."})]})})}return r&&!i(...r)?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Access Denied"}),a.jsx("p",{className:"text-gray-600",children:"You don't have the required role to access this page."})]})}):e}function mb(){const{isAuthenticated:e,loading:t}=Ha();return t?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):a.jsxs(nh,{children:[a.jsx(De,{path:"/login",element:e?a.jsx(Ws,{to:"/admin",replace:!0}):a.jsx(bv,{})}),a.jsx(De,{path:"/dpp/:dppId",element:a.jsx(ab,{})}),a.jsx(De,{path:"/compare",element:a.jsx(ub,{})}),a.jsx(De,{path:"/admin/*",element:a.jsx(pb,{children:a.jsx(Qv,{})})}),a.jsx(De,{path:"/",element:a.jsx(Ws,{to:e?"/admin":"/login",replace:!0})}),a.jsx(De,{path:"*",element:a.jsx(Ws,{to:"/",replace:!0})})]})}Dl.createRoot(document.getElementById("root")).render(a.jsx(gr.StrictMode,{children:a.jsx(ug,{basename:"/dpp-system",children:a.jsx(nv,{children:a.jsx(mb,{})})})}));
